

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/logo.png">
  <link rel="icon" href="/img/logo.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Dr.626">
  <meta name="keywords" content="">
  
    <meta name="description" content="ğŸ° Playwrightç”¨äºè·¨æµè§ˆå™¨æµ‹è¯•ï¼Œæ”¯æŒChromeã€Firefoxç­‰ï¼Œæä¾›ä¸€ä¸ªç®€å•è€Œå¼ºå¤§çš„APIæ¨¡æ‹Ÿç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­çš„äº¤äº’æ“ä½œã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="PlayWright æ¡†æ¶(äºŒ)">
<meta property="og:url" content="https://stitch-top.github.io/2023/11/02/ce-shi-kuang-jia/tf05-playwright/tf02-playwright-kuang-jia-er/index.html">
<meta property="og:site_name" content="Dr.626">
<meta property="og:description" content="ğŸ° Playwrightç”¨äºè·¨æµè§ˆå™¨æµ‹è¯•ï¼Œæ”¯æŒChromeã€Firefoxç­‰ï¼Œæä¾›ä¸€ä¸ªç®€å•è€Œå¼ºå¤§çš„APIæ¨¡æ‹Ÿç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­çš„äº¤äº’æ“ä½œã€‚">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://stitch-top.github.io/img/ThemeMap/9314065155.jpg">
<meta property="article:published_time" content="2023-11-02T13:10:10.000Z">
<meta property="article:modified_time" content="2024-07-19T08:56:05.372Z">
<meta property="article:author" content="Dr.626">
<meta property="article:tag" content="Python">
<meta property="article:tag" content="PlayWright">
<meta property="article:tag" content="POMæ¨¡å¼">
<meta property="article:tag" content="Mockæ¥å£">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://stitch-top.github.io/img/ThemeMap/9314065155.jpg">
  
  
  
  <title>PlayWright æ¡†æ¶(äºŒ) - Dr.626</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  



  
<link rel="stylesheet" href="/css/my.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"stitch-top.github.io","root":"/","version":"1.9.0","typing":{"enable":true,"typeSpeed":70,"cursorChar":"|","loop":true,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":"âœ"},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"left","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":1},"lazyload":{"enable":true,"loading_img":"/img/load.gif","onlypost":true,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":"Jg3BjUa3RtnEFSREy3wsmUR5-MdYXbMMI","app_key":"DwsEb5BeMxwdz0CEJ6MUBdu3","server_url":null,"path":"window.location.pathname","ignore_local":true}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>

  
  
<meta name="generator" content="Hexo 6.2.0"></head>


<body>
  
  

  <header>
    

<div class="header-inner" style="height: 100vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Dr.626</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                é¦–é¡µ
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                å½’æ¡£
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                åˆ†ç±»
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                æ ‡ç­¾
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                å…³äº
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                å‹é“¾
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button"
                 data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="iconfont icon-code"></i>
                å®éªŒå®¤
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                  
                  
                  
                  <a class="dropdown-item" href="/tagsnet">
                    <i class="iconfont icon-bookmark"></i>
                    æ–‡ç« å…³ç³»ç½‘
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/laboratory/plugin">
                    <i class="iconfont icon-bug"></i>
                    Hexoå°ç»„ä»¶
                  </a>
                
              </div>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/back-1.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="PlayWright æ¡†æ¶(äºŒ)"></span>
          
        </div>

        
          
  <div class="mt-3">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-author" aria-hidden="true"></i>
        Dr.626
      </span>
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-11-02 21:10" pubdate>
          2023å¹´11æœˆ2æ—¥ 21:10:10
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          51k å­—
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          426 åˆ†é’Ÿ
        
      </span>
    

    
    
      
        <span id="leancloud-page-views-container" class="post-meta" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="leancloud-page-views"></span> æ¬¡
        </span>
        
      
    
  </div>


        
      </div>

      
        <div class="scroll-down-bar">
          <i class="iconfont icon-arrowdown"></i>
        </div>
      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
  
  <!-- åŠ¨æ€çº¿æ¡èƒŒæ™¯
  <script type="text/javascript"
  color="0 0 255" opacity='1' zIndex="-2" count="200" src="../js/canvas-nest.js">
  </script> -->
  
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="padding-left: 2rem; margin-right: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;ç›®å½•</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">PlayWright æ¡†æ¶(äºŒ)</h1>
            
            <div class="markdown-body">
              
              <p>ğŸ° Playwrightç”¨äºè·¨æµè§ˆå™¨æµ‹è¯•ï¼Œæ”¯æŒChromeã€Firefoxç­‰ï¼Œæä¾›ä¸€ä¸ªç®€å•è€Œå¼ºå¤§çš„APIæ¨¡æ‹Ÿç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­çš„äº¤äº’æ“ä½œã€‚</p>
<span id="more"></span>



<h1 id="1-æ–¹æ³•æ±‡æ€»"><a href="#1-æ–¹æ³•æ±‡æ€»" class="headerlink" title="1 æ–¹æ³•æ±‡æ€»"></a>1 æ–¹æ³•æ±‡æ€»</h1><ul>
<li>æ–¹æ³•æ±‡æ€»<ul>
<li>Playwrightä¸­çš„æµ‹è¯•å±‚çº§ï¼šBrowser &gt; Context &gt; Page &gt; Locator &gt; ElementHandleã€‚</li>
<li>Pageå¯¹è±¡ï¼šç›´æ¥åœ¨æ•´ä¸ªé¡µé¢èŒƒå›´å†…è¿›è¡Œå…ƒç´ æŸ¥æ‰¾å’Œåˆ¤æ–­ã€‚<ul>
<li><code>page.is_hidden(selector: str)</code>Â·Â·Â·Â·Â·åˆ¤æ–­æŒ‡å®šé€‰æ‹©å™¨å¯¹åº”çš„å…ƒç´ æ˜¯å¦éšè—</li>
<li><code>page.is_visible(selector: str)</code>Â·Â·Â·Â·åˆ¤æ–­æŒ‡å®šé€‰æ‹©å™¨å¯¹åº”çš„å…ƒç´ æ˜¯å¦å¯è§</li>
<li><code>page.is_enabled(selector: str)</code>Â·Â·Â·Â·åˆ¤æ–­æŒ‡å®šé€‰æ‹©å™¨å¯¹åº”çš„å…ƒç´ æ˜¯å¦å¯ç”¨</li>
<li><code>page.is_editable(selector: str)</code>Â·Â·Â·åˆ¤æ–­æŒ‡å®šé€‰æ‹©å™¨å¯¹åº”çš„å…ƒç´ æ˜¯å¦å¯ç¼–è¾‘</li>
<li><code>page.is_disabled(selector: str)</code>Â·Â·Â·åˆ¤æ–­æŒ‡å®šé€‰æ‹©å™¨å¯¹åº”çš„å…ƒç´ æ˜¯å¦ä¸å¯ç”¨</li>
<li><code>page.is_checked(selector: str)</code>Â·Â·Â·Â·åˆ¤æ–­æŒ‡å®šé€‰æ‹©å™¨å¯¹åº”çš„å•é€‰Radioæˆ–å¤é€‰Checkboxï¼Œå…ƒç´ æ˜¯å¦è¢«é€‰ä¸­</li>
</ul>
</li>
<li>Locatorå¯¹è±¡ï¼šé€šè¿‡Pageé¡µé¢å¯¹è±¡çš„å®šä½æ–¹æ³•ï¼Œä¾‹å¦‚ä½¿ç”¨<code>page.locator(selector)</code>æ¥è·å–ElementHandleå…ƒç´ å¥æŸ„ã€‚<ul>
<li><code>locator.is_hidden()</code>Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·åˆ¤æ–­è¯¥å®šä½å™¨å¯¹è±¡å¯¹åº”çš„å…ƒç´ æ˜¯å¦éšè—</li>
<li><code>locator.is_visible()</code>Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·åˆ¤æ–­è¯¥å®šä½å™¨å¯¹è±¡å¯¹åº”çš„å…ƒç´ æ˜¯å¦å¯è§</li>
<li><code>locator.is_enabled()</code>Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·åˆ¤æ–­è¯¥å®šä½å™¨å¯¹è±¡å¯¹åº”çš„å…ƒç´ æ˜¯å¦å¯ç”¨</li>
<li><code>locator.is_editable()</code>Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·åˆ¤æ–­è¯¥å®šä½å™¨å¯¹è±¡å¯¹åº”çš„å…ƒç´ æ˜¯å¦å¯ç¼–è¾‘</li>
<li><code>locator.is_disabled()</code>Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·åˆ¤æ–­è¯¥å®šä½å™¨å¯¹è±¡å¯¹åº”çš„å…ƒç´ æ˜¯å¦ä¸å¯ç”¨</li>
<li><code>locator.is_checked()</code>Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·åˆ¤æ–­è¯¥å®šä½å™¨å¯¹è±¡å¯¹åº”çš„å•é€‰Radioæˆ–å¤é€‰Checkboxï¼Œå…ƒç´ æ˜¯å¦è¢«é€‰ä¸­</li>
</ul>
</li>
<li>ElementHandleå¯¹è±¡ï¼šé€šè¿‡ä½¿ç”¨<code>page.query_selector()</code>æ–¹æ³•ï¼Œæ¥è°ƒç”¨è¿”å›çš„ElementHandleå…ƒç´ å¥æŸ„ï¼Œä¸€èˆ¬ä¸å¸¸ç”¨ã€‚<ul>
<li><code>element_handle.is_hidden()</code>Â·Â·Â·Â·Â·Â·Â·Â·åˆ¤æ–­è¯¥å…ƒç´ å¥æŸ„å¯¹è±¡å¯¹åº”çš„å…ƒç´ æ˜¯å¦éšè—</li>
<li><code>element_handle.is_visible()</code>Â·Â·Â·Â·Â·Â·Â·åˆ¤æ–­è¯¥å…ƒç´ å¥æŸ„å¯¹è±¡å¯¹åº”çš„å…ƒç´ æ˜¯å¦å¯è§</li>
<li><code>element_handle.is_enabled()</code>Â·Â·Â·Â·Â·Â·Â·åˆ¤æ–­è¯¥å…ƒç´ å¥æŸ„å¯¹è±¡å¯¹åº”çš„å…ƒç´ æ˜¯å¦å¯ç”¨</li>
<li><code>element_handle.is_editable()</code>Â·Â·Â·Â·Â·Â·åˆ¤æ–­è¯¥å…ƒç´ å¥æŸ„å¯¹è±¡å¯¹åº”çš„å…ƒç´ æ˜¯å¦å¯ç¼–è¾‘</li>
<li><code>element_handle.is_disabled()</code>Â·Â·Â·Â·Â·Â·åˆ¤æ–­è¯¥å…ƒç´ å¥æŸ„å¯¹è±¡å¯¹åº”çš„å…ƒç´ æ˜¯å¦ä¸å¯ç”¨</li>
<li><code>element_handle.is_checked()</code>Â·Â·Â·Â·Â·Â·Â·åˆ¤æ–­è¯¥å…ƒç´ å¥æŸ„å¯¹è±¡å¯¹åº”çš„å•é€‰Radioæˆ–å¤é€‰Checkboxï¼Œå…ƒç´ æ˜¯å¦è¢«é€‰ä¸­</li>
</ul>
</li>
<li>Expectå¸¸ç”¨çš„æ–­è¨€æ–¹æ³•<ul>
<li><code>expect(api_response).to_be_ok()</code>Â·Â·Â·Â·Â·Â·Â·Â·Â·æ–­è¨€APIå“åº”æ˜¯å¦æˆåŠŸ</li>
<li>Pageé¡µé¢æ–­è¨€<ul>
<li><code>expect(page).to_have_url()</code>Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·æ–­è¨€é¡µé¢çš„URLæ˜¯å¦ç¬¦åˆé¢„æœŸ</li>
<li><code>expect(page).not_to_have_url()</code>Â·Â·Â·Â·Â·Â·æ–­è¨€é¡µé¢çš„URLæ˜¯å¦ä¸å­˜åœ¨</li>
<li><code>expect(page).to_have_title()</code>Â·Â·Â·Â·Â·Â·Â·Â·æ–­è¨€é¡µé¢çš„æ ‡é¢˜æ˜¯å¦ç¬¦åˆé¢„æœŸ</li>
<li><code>expect(page).not_to_have_title()</code>Â·Â·Â·Â·æ–­è¨€é¡µé¢çš„æ ‡é¢˜æ˜¯å¦ä¸å­˜åœ¨</li>
</ul>
</li>
<li><code>expect(locator).to_be_empty()</code>Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·æ–­è¨€locatorå¯¹åº”çš„å…ƒç´ æ˜¯å¦ä¸ºç©º</li>
<li><code>expect(locator).to_be_hidden()</code>Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·æ–­è¨€locatorå¯¹åº”çš„å…ƒç´ æ˜¯å¦éšè—</li>
<li><code>expect(locator).to_be_visible()</code>Â·Â·Â·Â·Â·Â·Â·Â·Â·æ–­è¨€locatorå¯¹åº”çš„å…ƒç´ æ˜¯å¦å¯è§</li>
<li><code>expect(locator).to_be_enabled()</code>Â·Â·Â·Â·Â·Â·Â·Â·Â·æ–­è¨€locatorå¯¹åº”çš„å…ƒç´ æ˜¯å¦å¯ç”¨</li>
<li><code>expect(locator).to_be_editable()</code>Â·Â·Â·Â·Â·Â·Â·Â·æ–­è¨€locatorå¯¹åº”çš„å…ƒç´ æ˜¯å¦å¯ç¼–è¾‘</li>
<li><code>expect(locator).to_be_disabled()</code>Â·Â·Â·Â·Â·Â·Â·Â·æ–­è¨€locatorå¯¹åº”çš„å…ƒç´ æ˜¯å¦ä¸å¯ç”¨</li>
<li><code>expect(locator).to_be_focused()</code>Â·Â·Â·Â·Â·Â·Â·Â·Â·æ–­è¨€locatorå¯¹åº”çš„å…ƒç´ æ˜¯å¦å¤„äºç„¦ç‚¹çŠ¶æ€</li>
<li><code>expect(locator).to_be_checked()</code>Â·Â·Â·Â·Â·Â·Â·Â·Â·æ–­è¨€locatorå¯¹åº”çš„å¤é€‰æ¡†æˆ–å•é€‰æ¡†å…ƒç´ æ˜¯å¦è¢«é€‰ä¸­</li>
<li><code>expect(locator).to_have_id()</code>Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·æ–­è¨€locatorå¯¹åº”çš„å…ƒç´ æ˜¯å¦å…·æœ‰ç‰¹å®šçš„id</li>
<li><code>expect(locator).to_have_count()</code>Â·Â·Â·Â·Â·Â·Â·Â·Â·æ–­è¨€locatorå¯¹åº”çš„å…ƒç´ æ•°é‡æ˜¯å¦ç¬¦åˆé¢„æœŸ</li>
<li><code>expect(locator).to_have_value()</code>Â·Â·Â·Â·Â·Â·Â·Â·Â·æ–­è¨€locatorå¯¹åº”çš„å…ƒç´ çš„å€¼æ˜¯å¦ç¬¦åˆé¢„æœŸ</li>
<li><code>expect(locator).to_have_text()</code>Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·æ–­è¨€locatorå¯¹åº”çš„å…ƒç´ æ˜¯å¦å…·æœ‰ç‰¹å®šçš„æ–‡æœ¬</li>
<li><code>expect(locator).to_have_class()</code>Â·Â·Â·Â·Â·Â·Â·Â·Â·æ–­è¨€locatorå¯¹åº”çš„å…ƒç´ æ˜¯å¦å…·æœ‰ç‰¹å®šçš„ç±»å</li>
<li><code>expect(locator).to_have_css()</code>Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·æ–­è¨€locatorå¯¹åº”çš„å…ƒç´ æ˜¯å¦å…·æœ‰ç‰¹å®šçš„CSSæ ·å¼</li>
<li><code>expect(locator).to_have_values()</code>Â·Â·Â·Â·Â·Â·Â·Â·æ–­è¨€locatorå¯¹åº”çš„å…ƒç´ çš„å€¼é›†åˆæ˜¯å¦ç¬¦åˆé¢„æœŸ</li>
<li><code>expect(locator).to_have_attribute()</code>Â·Â·Â·Â·Â·æ–­è¨€locatorå¯¹åº”çš„å…ƒç´ æ˜¯å¦å…·æœ‰ç‰¹å®šçš„å±æ€§</li>
<li><code>expect(locator).to_have_js_property()</code>Â·Â·Â·æ–­è¨€locatorå¯¹åº”çš„å…ƒç´ æ˜¯å¦å…·æœ‰ç‰¹å®šçš„JavaScriptå±æ€§</li>
<li><code>expect(locator).to_contain_text()</code>Â·Â·Â·Â·Â·Â·Â·æ–­è¨€locatorå¯¹åº”çš„å…ƒç´ æ˜¯å¦åŒ…å«ç‰¹å®šçš„æ–‡æœ¬</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="1-1-é¡µé¢å¯¼èˆª"><a href="#1-1-é¡µé¢å¯¼èˆª" class="headerlink" title="1-1 é¡µé¢å¯¼èˆª*"></a>1-1 é¡µé¢å¯¼èˆª*</h2><ul>
<li>é¡µé¢å¯¼èˆª<ul>
<li>å¼‚æ­¥å¯¼èˆª(Async navigation)<ul>
<li>æŒ‡ç­‰å¾…é¡µé¢å®Œæˆå¯¼èˆªçš„æ“ä½œï¼Œé¡µé¢å®Œæˆå¯¼èˆªåå†æ‰§è¡Œåç»­çš„æ“ä½œã€‚</li>
<li>å¯ä½¿ç”¨<code>page.goto()</code>æˆ–<code>page.wait_for_navigation()</code>æ–¹æ³•æ¥ç­‰å¾…é¡µé¢å¯¼èˆªå®Œæˆã€‚</li>
<li>å¼‚æ­¥å¯¼èˆªé€šå¸¸ç”¨äºå•ä¸€çš„é¡µé¢å¯¼èˆªï¼Œç­‰å¾…é¡µé¢è·³è½¬ï¼Œæˆ–åŠ è½½å®Œæ¯•åå†è¿›è¡Œåç»­æ“ä½œã€‚</li>
<li>è§¦å‘çš„å¯¼èˆªï¼šæŒ‡ä»£å¯¼èˆªåˆ°æ–°çš„URLã€åœ¨åŒä¸€ç½‘é¡µä¸­åˆ·æ–°ã€åé€€æˆ–å‰è¿›ï¼Œè¿™å››ç§æƒ…å†µã€‚</li>
</ul>
</li>
<li>å¤šé‡å¯¼èˆª(Multiple navigations)<ul>
<li>å¤šé‡å¯¼èˆªæŒ‡è¿ç»­è¿›è¡Œå¤šæ¬¡é¡µé¢å¯¼èˆªçš„æ“ä½œï¼Œæ¯æ¬¡å¯¼èˆªéƒ½éœ€è¦ç­‰å¾…é¡µé¢å®Œæˆè·³è½¬æˆ–åŠ è½½ã€‚</li>
<li>å¯ä½¿ç”¨<code>page.goto()</code>æˆ–<code>page.expect_navigation()</code>æ–¹æ³•æ¥æ˜ç¡®ç­‰å¾…ç‰¹å®šçš„å¯¼èˆªå®Œæˆã€‚</li>
<li>é€šå¸¸ç”¨äºéœ€è¿›è¡Œè¿ç»­å¤šæ¬¡é¡µé¢è·³è½¬çš„æƒ…å†µï¼Œå¦‚åº”ç”¨ç¨‹åºä¸­æ‰§è¡Œå¤šæ­¥éª¤æ“ä½œï¼Œæˆ–æµ‹è¯•æœŸé—´æ¨¡æ‹Ÿç”¨æˆ·æµè§ˆã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> asyncio<br><span class="hljs-keyword">from</span> playwright.async_api <span class="hljs-keyword">import</span> async_playwright<br><br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">example</span>():<br>    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> async_playwright() <span class="hljs-keyword">as</span> p:<br>        browser = <span class="hljs-keyword">await</span> p.chromium.launch(headless=<span class="hljs-literal">False</span>)<br>        page = <span class="hljs-keyword">await</span> browser.new_page()<br><br>        <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">on_navigation</span>(<span class="hljs-params">page, **kwargs</span>):                <span class="hljs-comment"># ç›‘å¬é¡µé¢å¯¼èˆªäº‹ä»¶</span><br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;é¡µé¢å¯¼èˆªå®Œæˆ&quot;</span>)<br>        page.on(<span class="hljs-string">&quot;navigation&quot;</span>, on_navigation)                    <span class="hljs-comment"># æ·»åŠ å¯¼èˆªäº‹ä»¶ç›‘å¬å™¨</span><br>        <span class="hljs-keyword">await</span> page.goto(<span class="hljs-string">&quot;https://www.baidu.com/&quot;</span>)               <span class="hljs-comment"># å¯¼èˆªåˆ°æŒ‡å®šURL</span><br>        <span class="hljs-keyword">try</span>:<br>            <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> page.expect_navigation():                <span class="hljs-comment"># ç­‰å¾…é¡µé¢å¯¼èˆªå®Œæˆ</span><br>                <span class="hljs-keyword">await</span> page.click(<span class="hljs-string">&quot;//*[@id=&#x27;s-top-left&#x27;]/a[1]&quot;</span>)<br>                <span class="hljs-keyword">await</span> page.reload()                             <span class="hljs-comment"># ä¸ºå•¥ä¸åŠ è¿™è¡Œä¼šæŠ¥é”™ï¼Ÿï¼Ÿï¼Ÿ</span><br>        <span class="hljs-keyword">except</span> TimeoutError:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;é¡µé¢å¯¼èˆªè¶…æ—¶&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;é¡µé¢å¯¼èˆªå®Œæˆï¼Œæ–°é¡µé¢åŠ è½½æˆåŠŸ&quot;</span>)<br><br>        <span class="hljs-keyword">await</span> browser.close()                                   <span class="hljs-comment"># å…³é—­æµè§ˆå™¨</span><br><br>asyncio.run(example())                                          <span class="hljs-comment"># è¿è¡Œä»£ç </span><br></code></pre></td></tr></table></figure>



<h2 id="1-2-é«˜çº§æ¨¡å¼"><a href="#1-2-é«˜çº§æ¨¡å¼" class="headerlink" title="1-2 é«˜çº§æ¨¡å¼"></a>1-2 é«˜çº§æ¨¡å¼</h2><ul>
<li>é«˜çº§æ¨¡å¼<ul>
<li><code>page.wait_for_function()</code>ï¼šç”¨äºç­‰å¾…æŒ‡å®šçš„JavaScriptå‡½æ•°è¿”å›trueæˆ–éç©ºç»“æœã€‚</li>
<li>å¯ç”¨äºæ£€æŸ¥é¡µé¢ä¸Šçš„æŸäº›æ¡ä»¶æ˜¯å¦æ»¡è¶³ï¼Œä¾‹å¦‚ï¼šç­‰å¾…ç‰¹å®šå…ƒç´ å‡ºç°æˆ–ç‰¹å®šæ–‡æœ¬è¢«æ›´æ–°ã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> asyncio<br><span class="hljs-keyword">from</span> playwright.async_api <span class="hljs-keyword">import</span> async_playwright<br><br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">wait_for_example</span>():<br>    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> async_playwright() <span class="hljs-keyword">as</span> p:<br>        browser = <span class="hljs-keyword">await</span> p.chromium.launch(headless=<span class="hljs-literal">False</span>)<br>        page = <span class="hljs-keyword">await</span> browser.new_page()<br><br>        <span class="hljs-keyword">await</span> page.goto(<span class="hljs-string">&quot;https://www.baidu.com/&quot;</span>)               <span class="hljs-comment"># æ‰“å¼€é¡µé¢</span><br>        <span class="hljs-keyword">await</span> page.wait_for_function(                           <span class="hljs-comment"># ç­‰å¾…é¡µé¢ä¸Šçš„æ ‡é¢˜å…ƒç´ å‡ºç°</span><br>            <span class="hljs-string">&quot;() =&gt; document.querySelector(&#x27;title&#x27;) !== null&quot;</span><br>        )<br>        title_text = <span class="hljs-keyword">await</span> page.evaluate(                       <span class="hljs-comment"># æ£€æŸ¥æ ‡é¢˜æ–‡æœ¬æ˜¯å¦ç¬¦åˆé¢„æœŸ</span><br>            <span class="hljs-string">&quot;document.querySelector(&#x27;title&#x27;).textContent&quot;</span><br>        )<br>        <span class="hljs-keyword">if</span> title_text == <span class="hljs-string">&quot;ç™¾åº¦ä¸€ä¸‹ï¼Œä½ å°±çŸ¥é“&quot;</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æ ‡é¢˜æ–‡æœ¬ç¬¦åˆé¢„æœŸ&quot;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æ ‡é¢˜æ–‡æœ¬ä¸ç¬¦åˆé¢„æœŸ&quot;</span>)<br><br>        <span class="hljs-keyword">await</span> browser.close()                                   <span class="hljs-comment"># å…³é—­æµè§ˆå™¨å¯¹è±¡</span><br><br>asyncio.run(wait_for_example())<br></code></pre></td></tr></table></figure>



<h2 id="1-3-svgå…ƒç´ æ“ä½œ"><a href="#1-3-svgå…ƒç´ æ“ä½œ" class="headerlink" title="1-3 svgå…ƒç´ æ“ä½œ"></a>1-3 svgå…ƒç´ æ“ä½œ</h2><ul>
<li>svgå…ƒç´ æ“ä½œ<ul>
<li>SVGå³Scalable Vector Graphicsï¼Œç”±W3Cåˆ¶å®šï¼Œç”¨äºæè¿°äºŒç»´çŸ¢é‡å›¾å½¢çš„XML(å¯æ‰©å±•æ ‡è®°è¯­è¨€)æ–‡ä»¶æ ¼å¼ã€‚</li>
<li>æ— æ³•ç”¨æ™®é€šçš„æ ‡ç­¾å®šä½åˆ°ï¼Œå¦‚<code>$x(&#39;//svg&#39;)</code>ï¼Œåªèƒ½é€šè¿‡<code>name()</code>å‡½æ•°å®šä½ï¼Œå¦‚<code>$x(&quot;//*[name()=&#39;svg&#39;]&quot;)</code>ã€‚</li>
<li>å¦‚æœé¡µé¢ä¸Šæœ‰å¤šä¸ªsvgå…ƒç´ ï¼Œ<code>//*[name()=&quot;svg&quot;]</code>å°†å®šä½å‡ºå…¨éƒ¨çš„svgå…ƒç´ ã€‚<ul>
<li>å¯ä»¥é€šè¿‡çˆ¶å…ƒç´ æ¥è¿›è¡ŒåŒºåˆ†ï¼Œä¾‹å¦‚ï¼š<code>//*[@id=&quot;box1&quot;]//*[name()=&quot;svg&quot;]</code>ã€‚</li>
<li>å¯ä½¿ç”¨<code>and</code>ç»„åˆå…¶ä»–å±æ€§ï¼Œä¾‹å¦‚ï¼š<code>//*[name()=&quot;svg&quot; and @width=&quot;500&quot;]</code>ã€‚</li>
</ul>
</li>
<li>å®šä½svgä¸Šçš„å­å…ƒç´ ï¼Œä»ç„¶å¯ä»¥é€šè¿‡<code>name()</code>å‡½æ•°å®šä½ï¼Œå¦‚<code>$x(&quot;//*[name()=&#39;svg&#39;]/*[name()=&#39;path&#39;]&quot;)</code>ã€‚</li>
<li>svgå…ƒç´ ä¸‹çš„circleæ˜¯å¯æ‹–åŠ¨çš„ï¼Œä¾‹å¦‚ï¼šå¾€å³æ‹–åŠ¨100ä¸ªåƒç´ ï¼Œé‚£ä¹ˆcxå€¼å°±ç”±åŸå…ˆçš„<code>cx=&quot;100&quot;</code>å˜ä¸º<code>cx=200</code>ã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> playwright.sync_api <span class="hljs-keyword">import</span> sync_playwright<br><br><span class="hljs-keyword">with</span> sync_playwright() <span class="hljs-keyword">as</span> p:<br>    browser = p.chromium.launch(headless=<span class="hljs-literal">False</span>)<br>    page = browser.new_page()<br>    page.goto(<span class="hljs-string">&quot;https://www.w3school.com.cn/svg/circle1.svg&quot;</span>)<br><br>    circle = page.locator(<br>        <span class="hljs-string">&quot;//*[name()=&#x27;svg&#x27;]/*[name()=&#x27;circle&#x27;]&quot;</span><br>    )                                                           <span class="hljs-comment"># svgå…ƒç´ å®šä½</span><br>    <span class="hljs-built_in">print</span>(circle.bounding_box())<br>    box = circle.bounding_box()<br><br>    circle.evaluate(                                            <span class="hljs-comment"># æ·»åŠ äº‹ä»¶ç›‘å¬</span><br>        <span class="hljs-string">&quot;node =&gt; node.addEventListener(&#x27;mousedown&#x27;, function()&quot;</span><br>        <span class="hljs-string">&quot;&#123;console.log(&#x27;ç›®æ ‡å…ƒç´ è¢«é¼ æ ‡downäº†&#x27;);&#125;);&quot;</span><br>    )<br><br>    page.mouse.move(                                            <span class="hljs-comment"># svgå…ƒç´ æ‹–æ‹½</span><br>        x=box[<span class="hljs-string">&quot;x&quot;</span>] + box[<span class="hljs-string">&quot;width&quot;</span>] / <span class="hljs-number">2</span>,<br>        y=box[<span class="hljs-string">&quot;y&quot;</span>] + box[<span class="hljs-string">&quot;height&quot;</span>] / <span class="hljs-number">2</span><br>    )<br>    page.mouse.down()<br>    page.mouse.move(<br>        x=box[<span class="hljs-string">&quot;x&quot;</span>] + box[<span class="hljs-string">&quot;width&quot;</span>] / <span class="hljs-number">2</span> + <span class="hljs-number">100</span>,<br>        y=box[<span class="hljs-string">&quot;y&quot;</span>] + box[<span class="hljs-string">&quot;height&quot;</span>] / <span class="hljs-number">2</span><br>    )<br>    page.mouse.up(button=<span class="hljs-string">&quot;middle&quot;</span>)<br>    page.pause()                                                <span class="hljs-comment"># F12çš„consoleæŸ¥çœ‹</span><br><br>    browser.close()                                             <span class="hljs-comment"># å…³é—­æµè§ˆå™¨å¯¹è±¡</span><br></code></pre></td></tr></table></figure>



<h2 id="1-4-æ—¥æœŸæ§ä»¶è¾“å…¥"><a href="#1-4-æ—¥æœŸæ§ä»¶è¾“å…¥" class="headerlink" title="1-4 æ—¥æœŸæ§ä»¶è¾“å…¥"></a>1-4 æ—¥æœŸæ§ä»¶è¾“å…¥</h2><ul>
<li>æ—¥æœŸæ§ä»¶è¾“å…¥<ul>
<li>è¾“å…¥æ¡†æ˜¯æ—¥æœŸæ§ä»¶æ—¶ï¼Œå…ˆçœ‹èƒ½å¦ç›´æ¥è¾“å…¥æ—¥æœŸï¼Œå¯ä»¥ç›´æ¥è¾“å…¥çš„æƒ…å†µä¸‹å°±ä¸ç”¨ç‚¹å¼€äº†ã€‚</li>
<li>è‹¥æœ‰<code>readonly</code>å±æ€§å°±ä¸èƒ½ç›´æ¥è¾“å…¥ï¼Œè¿™ç§æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨JavaScriptå»æ‰å±æ€§å†è¾“å…¥ã€‚</li>
</ul>
</li>
</ul>
<h3 id="1-ç›´æ¥è¾“å…¥"><a href="#1-ç›´æ¥è¾“å…¥" class="headerlink" title="(1) ç›´æ¥è¾“å…¥"></a>(1) ç›´æ¥è¾“å…¥</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> playwright.sync_api <span class="hljs-keyword">import</span> sync_playwright<br><br><span class="hljs-keyword">with</span> sync_playwright() <span class="hljs-keyword">as</span> p:<br>    browser = p.chromium.launch(headless=<span class="hljs-literal">False</span>)<br>    context = browser.new_context()<br>    page = context.new_page()<br>    page.goto(<br>        <span class="hljs-string">r&quot;http://wyeditor.com/layui_demo/%E6%97%A5%E6%9C%9F&quot;</span><br>        <span class="hljs-string">r&quot;%E5%92%8C%E6%97%B6%E9%97%B4%E7%BB%84%E4%BB%B6.html&quot;</span><br>    )<br>    page.locator(<br>        <span class="hljs-string">&quot;//*[@id=&#x27;LayEdit_267858&#x27;]&quot;</span><br>    ).fill(<span class="hljs-string">&quot;2023-09-01&quot;</span>)                                        <span class="hljs-comment"># æ—¥æœŸæ§ä»¶ç›´æ¥è¾“å…¥</span><br>    page.pause()<br><br>    browser.close()                                             <span class="hljs-comment"># å…³é—­æµè§ˆå™¨å¯¹è±¡</span><br></code></pre></td></tr></table></figure>



<h3 id="2-readonly"><a href="#2-readonly" class="headerlink" title="(2) readonly"></a>(2) readonly</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> playwright.sync_api <span class="hljs-keyword">import</span> sync_playwright<br><br><span class="hljs-keyword">with</span> sync_playwright() <span class="hljs-keyword">as</span> p:<br>    browser = p.chromium.launch(headless=<span class="hljs-literal">False</span>)<br>    context = browser.new_context()<br>    page = context.new_page()<br>    page.goto(<span class="hljs-string">r&quot;http://www.jemui.com/jedate/#5&quot;</span>)<br>    page.locator(<span class="hljs-string">&quot;//*[@id=&#x27;ymd01&#x27;]&quot;</span>).hover()                    <span class="hljs-comment"># å®šä½æ‚¬åœåˆ°å…·ä½“ä½ç½®</span><br>    page.wait_for_timeout(<span class="hljs-number">1000</span>)<br>    js1 = <span class="hljs-string">&quot;document.getElementById(&#x27;ymd01&#x27;).removeAttribute(&#x27;readonly&#x27;);&quot;</span><br>    page.evaluate(js1)                                          <span class="hljs-comment"># å»æ‰readonlyå±æ€§</span><br>    js2 = <span class="hljs-string">&quot;document.getElementById(&#x27;ymd01&#x27;).value=&#x27;2023-09-01 15:15:15&#x27;;&quot;</span><br>    page.evaluate(js2)<br>    page.pause()<br><br>    browser.close()                                             <span class="hljs-comment"># å…³é—­æµè§ˆå™¨å¯¹è±¡</span><br></code></pre></td></tr></table></figure>



<h2 id="1-5-Trace-Viewer"><a href="#1-5-Trace-Viewer" class="headerlink" title="1-5 Trace Viewer"></a>1-5 Trace Viewer</h2><ul>
<li>Trace Viewer<ul>
<li>æ‰§è¡Œè‡ªåŠ¨åŒ–ç”¨ä¾‹çš„è¿‡ç¨‹ä¸­ï¼Œå‡ºç°ä¸€äº›ä¸ç¨³å®šå¶ç„¶æ€§çš„Bugï¼Œéœ€å¤ç°è¿˜åŸBugå‡ºç°çš„è¿‡ç¨‹ã€‚</li>
<li>Playwright Trace Viewerå¯æ¢ç´¢è®°å½•Playwrightçš„æµ‹è¯•è·Ÿè¸ªï¼Œç›´è§‚æŸ¥çœ‹æ“ä½œæœŸé—´çš„æƒ…å†µã€‚</li>
<li>æŸ¥çœ‹<ul>
<li>ä½¿ç”¨Playwright CLIåœ¨terminalä¸­è¾“å…¥<code>playwright show-trace trace.zip</code>ï¼Œæ‰“å¼€è·Ÿè¸ªã€‚</li>
<li>é€šè¿‡å•å‡»æ¯ä¸ªæ“ä½œï¼Œæˆ–ä½¿ç”¨æ—¶é—´è½´æ‚¬åœæ¥æŸ¥çœ‹æµ‹è¯•çš„ç—•è¿¹ï¼Œå¹¶æŸ¥çœ‹æ“ä½œå‰åé¡µé¢çš„çŠ¶æ€ã€‚</li>
<li>åœ¨æ¯ä¸ªæ­¥éª¤ä¸­æ£€æŸ¥æ—¥å¿—ã€æºå’Œç½‘ç»œï¼Œè·Ÿè¸ªæŸ¥çœ‹å™¨åˆ›å»ºä¸€ä¸ªDOMå¿«ç…§ï¼Œå¯ä¸å…¶å®Œå…¨äº¤äº’ï¼Œæ‰“å¼€devtoolsç­‰ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> playwright.sync_api <span class="hljs-keyword">import</span> sync_playwright<br><br><span class="hljs-keyword">with</span> sync_playwright() <span class="hljs-keyword">as</span> p:<br>    browser = p.chromium.launch(headless=<span class="hljs-literal">False</span>)<br>    context = browser.new_context()<br><br>    context.tracing.start(                                      <span class="hljs-comment"># è®°å½•è·Ÿè¸ª</span><br>        screenshots=<span class="hljs-literal">True</span>, snapshots=<span class="hljs-literal">True</span>, sources=<span class="hljs-literal">True</span><br>    )<br>    page = context.new_page()<br>    page.goto(<span class="hljs-string">&quot;https://www.baidu.com/&quot;</span>)<br>    page.locator(<span class="hljs-string">&quot;//*[@id=&#x27;s-hotsearch-wrapper&#x27;]/div/a[1]/div&quot;</span>).click()<br>    context.tracing.stop(path=<span class="hljs-string">&quot;./file/trace.zip&quot;</span>)               <span class="hljs-comment"># ä¿å­˜ä¸º.zipæ–‡ä»¶</span><br><br>    browser.close()                                             <span class="hljs-comment"># å…³é—­æµè§ˆå™¨å¯¹è±¡</span><br></code></pre></td></tr></table></figure>



<h2 id="1-6-tableè¡¨æ ¼æ ‡ç­¾"><a href="#1-6-tableè¡¨æ ¼æ ‡ç­¾" class="headerlink" title="1-6 tableè¡¨æ ¼æ ‡ç­¾"></a>1-6 tableè¡¨æ ¼æ ‡ç­¾</h2><ul>
<li>tableè¡¨æ ¼æ ‡ç­¾<ul>
<li>tableè¡¨æ ¼çš„å¸¸ç”¨æ ‡ç­¾ï¼štable(ä¸€ä¸ªè¡¨æ ¼)ã€tr(ä¸€è¡Œ)ã€th(è¡¨å¤´å•å…ƒæ ¼)ã€td(å†…å®¹å•å…ƒæ ¼)ã€‚</li>
<li>ä½¿ç”¨xpathå®šä½tableè¡¨æ ¼æ•°æ®ï¼Œä¾‹å¦‚<code>/html/body/div[1]/table[1]/tbody/tr[1]/td[2]</code>ã€‚</li>
</ul>
</li>
</ul>
<h3 id="1-è¡¨æ ¼å®šä½"><a href="#1-è¡¨æ ¼å®šä½" class="headerlink" title="(1) è¡¨æ ¼å®šä½"></a>(1) è¡¨æ ¼å®šä½</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> playwright.sync_api <span class="hljs-keyword">import</span> sync_playwright<br><br><span class="hljs-keyword">with</span> sync_playwright() <span class="hljs-keyword">as</span> p:<br>    browser = p.chromium.launch(headless=<span class="hljs-literal">False</span>)<br>    context = browser.new_context()<br>    page = context.new_page()<br>    page.goto(<span class="hljs-string">&quot;http://www.bootstrapmb.com/item/10229&quot;</span>)<br>    <span class="hljs-keyword">with</span> context.expect_page() <span class="hljs-keyword">as</span> new_page_info:<br>        page.get_by_text(<span class="hljs-string">&quot;é¢„ è§ˆ&quot;</span>).click()<br>        page.wait_for_timeout(<span class="hljs-number">1000</span>)<br>    new_page = new_page_info.value                              <span class="hljs-comment"># åˆ‡æ¢åˆ°é¢„è§ˆtableé¡µ</span><br>    <span class="hljs-built_in">print</span>(new_page.title())<br><br>    new_page.wait_for_load_state(<span class="hljs-string">&quot;networkidle&quot;</span>)                 <span class="hljs-comment"># ç­‰å¾…é¡µé¢åŠ è½½å®Œæ¯•</span><br>    iframe = new_page.frame_locator(<span class="hljs-string">&quot;//*[@id=&#x27;iframe&#x27;]&quot;</span>)<br>    n1 = iframe.locator(<span class="hljs-string">&quot;//table[2]/tbody/tr&quot;</span>)<br>    <span class="hljs-comment"># n1 = iframe.locator(&quot;/html/body/div[1]/table[2]/tbody/tr&quot;)</span><br>    <span class="hljs-comment"># æŠ¥é”™ï¼šplaywright._impl._api_types.Error: Unexpected token &quot;/&quot; while parsing selector</span><br>    <span class="hljs-built_in">print</span>(n1.count())                                           <span class="hljs-comment"># è·å–å†…å®¹å•å…ƒæ ¼æ€»è¡Œæ•°</span><br>    n2 = iframe.locator(<span class="hljs-string">&quot;//*[@id=&#x27;one-part-th&#x27;]&quot;</span>)<br>    <span class="hljs-built_in">print</span>(n2.inner_text())                                      <span class="hljs-comment"># è·å–è¡¨å¤´å•å…ƒæ ¼çš„ç¬¬äºŒè¡Œæ•°æ®</span><br>    n3 = iframe.locator(<span class="hljs-string">&quot;//table[2]/tbody/tr/td[4]&quot;</span>)            <span class="hljs-comment"># ä¸åŒtræå–åŒä¸€td[4]</span><br>    <span class="hljs-keyword">for</span> td <span class="hljs-keyword">in</span> n3.<span class="hljs-built_in">all</span>():<br>        <span class="hljs-built_in">print</span>(td.inner_text())                                  <span class="hljs-comment"># è·å–å†…å®¹å•å…ƒæ ¼ç¬¬4åˆ—çš„æ•°æ®</span><br><br>    browser.close()                                             <span class="hljs-comment"># å…³é—­æµè§ˆå™¨å¯¹è±¡</span><br></code></pre></td></tr></table></figure>



<h3 id="2-æ•°æ®è·å–"><a href="#2-æ•°æ®è·å–" class="headerlink" title="(2) æ•°æ®è·å–"></a>(2) æ•°æ®è·å–</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> playwright.sync_api <span class="hljs-keyword">import</span> sync_playwright<br><br><span class="hljs-keyword">with</span> sync_playwright() <span class="hljs-keyword">as</span> p:<br>    browser = p.chromium.launch(headless=<span class="hljs-literal">False</span>)<br>    context = browser.new_context()<br>    page = context.new_page()<br>    page.goto(<span class="hljs-string">&quot;http://www.bootstrapmb.com/item/14227&quot;</span>)<br>    <span class="hljs-keyword">with</span> context.expect_page() <span class="hljs-keyword">as</span> new_page_info:<br>        page.get_by_text(<span class="hljs-string">&quot;é¢„ è§ˆ&quot;</span>).click()<br>        page.wait_for_timeout(<span class="hljs-number">1000</span>)<br>    new_page = new_page_info.value                              <span class="hljs-comment"># åˆ‡æ¢åˆ°é¢„è§ˆtableé¡µ</span><br>    <span class="hljs-built_in">print</span>(new_page.title())<br><br>    new_page.wait_for_load_state(<span class="hljs-string">&quot;networkidle&quot;</span>)                 <span class="hljs-comment"># ç­‰å¾…é¡µé¢åŠ è½½å®Œæ¯•</span><br>    iframe = new_page.frame_locator(<span class="hljs-string">&quot;//*[@id=&#x27;iframe&#x27;]&quot;</span>)<br><br>    col_name = iframe.locator(<span class="hljs-string">&quot;//*[@id=&#x27;table-0&#x27;]/div/div[1]&quot;</span>)<br>    col_text = [item.inner_text() <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> col_name.<span class="hljs-built_in">all</span>()]<br>    <span class="hljs-built_in">print</span>(col_text)                                             <span class="hljs-comment"># åˆ—è¡¨å½¢å¼å•åˆ—è¾“å‡º</span><br><br>    tit_name = iframe.locator(<span class="hljs-string">&quot;//*[@id=&#x27;table-0&#x27;]/div[1]&quot;</span>)<br>    tit_list = [item.inner_text() <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> tit_name.<span class="hljs-built_in">all</span>()]<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æ ‡é¢˜ï¼š&quot;</span>, [item.strip() <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> tit_list[<span class="hljs-number">0</span>].split(<span class="hljs-string">&quot;\n&quot;</span>)])<br><br>    num = iframe.locator(<span class="hljs-string">&quot;//*[@id=&#x27;table-0&#x27;]/div&quot;</span>).count()      <span class="hljs-comment"># è·å–æ€»è¡Œæ•°</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;è¡Œæ•°ï¼š&quot;</span>, num)<br><br>    <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, num+<span class="hljs-number">1</span>):<br>        element = <span class="hljs-string">r&quot;//*[@id=&#x27;table-0&#x27;]/&quot;</span> + <span class="hljs-string">&quot;div[&quot;</span> + <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;n&#125;</span>&quot;</span> + <span class="hljs-string">&quot;]&quot;</span><br>        row_name = iframe.locator(element)<br>        row_text = [item.inner_text() <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> row_name.<span class="hljs-built_in">all</span>()]<br>        row_list = [item.strip() <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> row_text[<span class="hljs-number">0</span>].split(<span class="hljs-string">&quot;\n&quot;</span>)]<br>        <span class="hljs-keyword">if</span> <span class="hljs-string">&quot;&quot;</span> <span class="hljs-keyword">in</span> row_list:                                      <span class="hljs-comment"># å¤„ç†ç¬¬11è¡Œä¹‹åçš„æ•°æ®</span><br>            row_list = [item.strip() <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> row_list <span class="hljs-keyword">if</span> item.strip()]<br>        <span class="hljs-built_in">print</span>(row_list)                                         <span class="hljs-comment"># æ‰“å°æ‰€æœ‰çš„æ•°æ®è¡Œ</span><br><br>    browser.close()                                             <span class="hljs-comment"># å…³é—­æµè§ˆå™¨å¯¹è±¡</span><br></code></pre></td></tr></table></figure>



<h2 id="1-7-å›¾ç‰‡ç›¸ä¼¼åº¦å¯¹æ¯”"><a href="#1-7-å›¾ç‰‡ç›¸ä¼¼åº¦å¯¹æ¯”" class="headerlink" title="1-7 å›¾ç‰‡ç›¸ä¼¼åº¦å¯¹æ¯”"></a>1-7 å›¾ç‰‡ç›¸ä¼¼åº¦å¯¹æ¯”</h2><ul>
<li>å›¾ç‰‡ç›¸ä¼¼åº¦å¯¹æ¯”<ul>
<li>pipå‘½ä»¤å®‰è£…airtestå’Œaircvï¼š<code>pip install airtest</code>ã€<code>pip install aircv</code>ã€‚</li>
<li>Pythonå®‰è£…ç›®å½•ä¸­ï¼Œæ‰¾åˆ°Lib\site-packages\airtest\aircv\cal_confidence.pyã€‚</li>
<li>ç›¸ä¼¼åº¦å¯¹æ¯”æ—¶éœ€ç”¨åˆ°cal_confidence.pyä¸­çš„å‡½æ•°<code>cal_ccoeff_confidence()</code>ã€‚</li>
<li>å¯¹æ¯”å›¾æ—¶éœ€è¦å°†å›¾ç‰‡çš„å¤§å°è®¾ä¸ºä¸€è‡´ï¼Œå¯ä»¥ä½¿ç”¨<code>cv2.resize()</code>æ–¹æ³•è¿›è¡Œå¤„ç†ã€‚</li>
<li><code>cv2.resize(src, dsize, dst=None, fx=None, fy=None, interpolation=None)</code><ul>
<li><code>src</code>æºå›¾åƒã€<code>dsize</code>å›¾åƒçš„å¤§å°ã€<code>fx</code>widthæ–¹å‘çš„ç¼©æ”¾æ¯”ä¾‹ã€‚</li>
<li><code>fy</code>heightæ–¹å‘çš„ç¼©æ”¾æ¯”ä¾‹ã€<code>interpolation</code>æŒ‡å®šæ’å€¼çš„æ–¹å¼ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> cv2<br><span class="hljs-keyword">from</span> PIL <span class="hljs-keyword">import</span> Image<br><span class="hljs-keyword">from</span> playwright.sync_api <span class="hljs-keyword">import</span> sync_playwright<br><span class="hljs-keyword">import</span> airtest.aircv.cal_confidence <span class="hljs-keyword">as</span> cal_confidence           <span class="hljs-comment"># å¼•ç”¨å‡½æ•°</span><br><br><br><span class="hljs-keyword">with</span> sync_playwright() <span class="hljs-keyword">as</span> playwright:<br>    browser = playwright.chromium.launch(headless=<span class="hljs-literal">False</span>)<br>    page = browser.new_page()<br>    page.goto(<br>        <span class="hljs-string">&quot;https://img.zcool.cn/community/012e9a5ecfd&quot;</span><br>        <span class="hljs-string">&quot;26aa80120662183278c.jpg@1280w_1l_2o_100sh.jpg&quot;</span><br>    )<br>    screenshot_path = <span class="hljs-string">&quot;pictures/image1.png&quot;</span><br>    page.screenshot(path=screenshot_path)                       <span class="hljs-comment"># æˆªå›¾ä¿å­˜åˆ°æœ¬åœ°</span><br>    browser.close()                                             <span class="hljs-comment"># å…³é—­æµè§ˆå™¨å¯¹è±¡</span><br><br>image = Image.<span class="hljs-built_in">open</span>(screenshot_path)                             <span class="hljs-comment"># å°†ä¿å­˜ä¸‹æ¥çš„å›¾ç‰‡è£å‰ªæˆä¸¤åŠ</span><br>half1 = image.crop((<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, image.width // <span class="hljs-number">2</span>, image.height))<br>half2 = image.crop((image.width // <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, image.width, image.height))<br>half1.save(<span class="hljs-string">&quot;pictures/image2.png&quot;</span>)                               <span class="hljs-comment"># å·¦å›¾</span><br>half2.save(<span class="hljs-string">&quot;pictures/image3.png&quot;</span>)                               <span class="hljs-comment"># å³å›¾</span><br><br>im1 = cv2.resize(cv2.imread(<span class="hljs-string">&quot;pictures/image2.png&quot;</span>), (<span class="hljs-number">100</span>, <span class="hljs-number">100</span>))<br>im2 = cv2.resize(cv2.imread(<span class="hljs-string">&quot;pictures/image3.png&quot;</span>), (<span class="hljs-number">100</span>, <span class="hljs-number">100</span>))<br>res = cal_confidence.cal_ccoeff_confidence(im1, im2)            <span class="hljs-comment"># ç›¸ä¼¼åº¦å¯¹æ¯”</span><br><span class="hljs-built_in">print</span>(res)<br></code></pre></td></tr></table></figure>



<h1 id="2-æ’ä»¶ç¼–å†™ç”¨ä¾‹"><a href="#2-æ’ä»¶ç¼–å†™ç”¨ä¾‹" class="headerlink" title="2 æ’ä»¶ç¼–å†™ç”¨ä¾‹"></a>2 æ’ä»¶ç¼–å†™ç”¨ä¾‹</h1><ul>
<li>æ’ä»¶ç¼–å†™ç”¨ä¾‹<ul>
<li>pytest-playwrightæ’ä»¶å®Œç¾åœ°ç»§æ‰¿äº†pytestæ¡†æ¶å’ŒplaywrightåŸºç¡€ä½¿ç”¨çš„å°è£…ï¼Œæ»¡è¶³åŸºæœ¬å·¥ä½œéœ€æ±‚ã€‚</li>
<li>pip install pytest-playwright -i <a target="_blank" rel="noopener" href="http://pypi.douban.com/simple/">http://pypi.douban.com/simple/</a> â€“trusted-host pypi.douban.com</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> re                                                       <span class="hljs-comment"># test_plugin.py</span><br><span class="hljs-keyword">from</span> playwright.sync_api <span class="hljs-keyword">import</span> Page, expect<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_homepage</span>(<span class="hljs-params">page: Page</span>):                                  <span class="hljs-comment"># ç½‘é¡µæµ‹è¯•</span><br>    page.goto(<span class="hljs-string">&quot;https://playwright.dev/&quot;</span>)                        <span class="hljs-comment"># è®¿é—®æŒ‡å®šçš„URL</span><br>    expect(page).to_have_title(re.<span class="hljs-built_in">compile</span>(<span class="hljs-string">&quot;Playwright&quot;</span>))        <span class="hljs-comment"># åˆ¤æ–­é¡µé¢æ ‡é¢˜æ˜¯å¦åŒ…å«&quot;Playwright&quot;</span><br>    get_started = page.get_by_role(<span class="hljs-string">&quot;link&quot;</span>, name=<span class="hljs-string">&quot;Get started&quot;</span>)  <span class="hljs-comment"># è·å–å…ƒç´ roleä¸ºlinkï¼Œnameä¸ºGet started</span><br>    expect(get_started).to_have_attribute(<span class="hljs-string">&quot;href&quot;</span>, <span class="hljs-string">&quot;/docs/intro&quot;</span>)<br>    get_started.click()                                         <span class="hljs-comment"># ç‚¹å‡»è·å–åˆ°çš„å…ƒç´ </span><br>    expect(page).to_have_url(re.<span class="hljs-built_in">compile</span>(<span class="hljs-string">&quot;.*intro&quot;</span>))             <span class="hljs-comment"># æ­£åˆ™åˆ¤æ–­é¡µé¢çš„URLæ˜¯å¦åŒ…å«&quot;intro&quot;</span><br><br><span class="hljs-comment"># pytest test_plugin.py                                         # æ— å¤´æ¨¡å¼è¿è¡Œï¼Œæµ‹è¯•ç»“æœå’Œæ—¥å¿—åœ¨ç»ˆç«¯æ˜¾ç¤º</span><br><span class="hljs-comment"># pytest test_plugin.py --headed                                # æµè§ˆå™¨UIè¿è¡Œ</span><br></code></pre></td></tr></table></figure>



<h2 id="2-1-CLIå‚æ•°"><a href="#2-1-CLIå‚æ•°" class="headerlink" title="2-1 CLIå‚æ•°"></a>2-1 CLIå‚æ•°</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs Powershell">pytest                                                          <span class="hljs-comment"># é»˜è®¤åœ¨chromiumä¸Šè¿è¡Œæµ‹è¯•</span><br>pytest ./test_*/                                                <span class="hljs-comment"># è¿è¡Œä¸€ç»„æµ‹è¯•æ–‡ä»¶</span><br>pytest test_plugin.py                                           <span class="hljs-comment"># è¿è¡Œå•ä¸ªæµ‹è¯•æ–‡ä»¶</span><br>pytest test_plugin.py <span class="hljs-literal">-k</span> <span class="hljs-string">&quot;test_homepage&quot;</span>                        <span class="hljs-comment"># ä½¿ç”¨å‡½æ•°åè¿è¡Œæµ‹è¯•</span><br>pytest test_plugin.py <span class="hljs-literal">--headed</span>                                  <span class="hljs-comment"># æœ‰å¤´æ¨¡å¼è¿è¡Œæµ‹è¯•(é»˜è®¤æ— å¤´)</span><br>pytest test_plugin.py <span class="hljs-literal">--browser</span> webkit                          <span class="hljs-comment"># ç‰¹å®šæµè§ˆå™¨è¿è¡Œæµ‹è¯•</span><br>pytest test_plugin.py <span class="hljs-literal">--browser</span> webkit <span class="hljs-literal">--browser</span> firefox        <span class="hljs-comment"># å¤šä¸ªæµè§ˆå™¨è¿è¡Œæµ‹è¯•</span><br>pytest test_plugin.py <span class="hljs-literal">--browser-channel</span> chrome                  <span class="hljs-comment"># æŒ‡å®šæµè§ˆå™¨é€šé“è¿è¡Œæµ‹è¯•</span><br>pytest test_plugin.py <span class="hljs-literal">--slowmo</span> <span class="hljs-number">100</span>                              <span class="hljs-comment"># æŒ‡å®šå»¶è¿Ÿä¸è¶…è¿‡100msæ¥å‡ç¼“æµ‹è¯•æ‰§è¡Œé€Ÿåº¦</span><br>pytest test_plugin.py <span class="hljs-literal">--device</span>=<span class="hljs-string">&quot;iPhone 12&quot;</span>                      <span class="hljs-comment"># æ¨¡æ‹ŸiPhone 12è®¾å¤‡è¿è¡Œæµ‹è¯•</span><br>pytest test_plugin.py <span class="hljs-literal">--output</span>=<span class="hljs-string">&quot;my_results&quot;</span> <span class="hljs-literal">--video</span>=on          <span class="hljs-comment"># æµ‹è¯•ç”Ÿæˆçš„å·¥ä½œç›®å½•(é»˜è®¤test-results)</span><br>pytest test_plugin.py <span class="hljs-literal">--tracing</span>=on                              <span class="hljs-comment"># ä¸ºæ¯ä¸ªæµ‹è¯•è®°å½•è½¨è¿¹</span><br>pytest test_plugin.py <span class="hljs-literal">--video</span>=on                                <span class="hljs-comment"># ä¸ºæ¯æ¬¡æµ‹è¯•å½•åˆ¶è§†é¢‘</span><br>pytest test_plugin.py <span class="hljs-literal">--screenshot</span>=on                           <span class="hljs-comment"># æˆªå›¾(onã€é»˜è®¤offã€retain-on-failure)</span><br><br>pip install py<span class="hljs-built_in">test-xdist</span><br>pytest <span class="hljs-literal">--numprocesses</span> auto                                      <span class="hljs-comment"># å¤šè¿›ç¨‹è¿è¡Œæµ‹è¯•</span><br></code></pre></td></tr></table></figure>



<h2 id="2-2-ç”¨ä¾‹ç¼–å†™"><a href="#2-2-ç”¨ä¾‹ç¼–å†™" class="headerlink" title="2-2 ç”¨ä¾‹ç¼–å†™"></a>2-2 ç”¨ä¾‹ç¼–å†™</h2><ul>
<li>ç”¨ä¾‹ç¼–å†™<ul>
<li>æµè§ˆå™¨ä¸Šä¸‹æ–‡ä½¿å¾—é¡µé¢åœ¨æµ‹è¯•ä¹‹é—´è¢«éš”ç¦»ï¼Œç›¸å½“äºä¸€ä¸ªå…¨æ–°çš„æµè§ˆå™¨é…ç½®æ–‡ä»¶ï¼Œæ¯ä¸ªæµ‹è¯•éƒ½ä¼šè·å¾—ä¸€ä¸ªæ–°ç¯å¢ƒã€‚</li>
<li>å¯ä»¥ä½¿ç”¨å„ç§fixtureåœ¨æµ‹è¯•ä¹‹å‰æˆ–è€…ä¹‹åæ‰§è¡Œä»£ç ï¼Œå¹¶åœ¨å®ƒä»¬ä¹‹é—´å…±äº«å¯¹è±¡ï¼Œä¾‹å¦‚ï¼šbeforeEachã€afterEachç­‰ã€‚</li>
<li><a href="https://stitch-top.github.io/2023/03/03/ce-shi-kuang-jia/tf02-pytest-ce-shi-kuang-jia/#5-fixture%E9%A2%84%E7%BD%AE%E6%9D%A1%E4%BB%B6">å†…ç½®fixture</a><ul>
<li>Function scopeï¼šè¿™äº›å›ºå®šè£…ç½®åœ¨æµ‹è¯•åŠŸèƒ½ä¸­è¯·æ±‚æ—¶åˆ›å»ºï¼Œå¹¶åœ¨æµ‹è¯•ç»“æŸæ—¶é”€æ¯ã€‚<ul>
<li>pageï¼šç”¨äºæµ‹è¯•çš„æ–°æµè§ˆå™¨é¡µé¢ã€‚</li>
<li>contextï¼šç”¨äºæµ‹è¯•çš„æ–°æµè§ˆå™¨ä¸Šä¸‹æ–‡ã€‚</li>
</ul>
</li>
<li>Session scopeï¼šè¿™äº›å›ºå®šè£…ç½®åœ¨æµ‹è¯•å‡½æ•°ä¸­è¯·æ±‚æ—¶åˆ›å»ºï¼Œå¹¶åœ¨æ‰€æœ‰æµ‹è¯•ç»“æŸæ—¶é”€æ¯ã€‚<ul>
<li>browser_nameï¼šæµè§ˆå™¨åç§°ä½œä¸ºå­—ç¬¦ä¸²ã€‚</li>
<li>browserï¼šç”±Playwrightå¯åŠ¨çš„æµè§ˆå™¨å®ä¾‹ã€‚</li>
<li>browser_channelï¼šæµè§ˆå™¨é€šé“ä½œä¸ºå­—ç¬¦ä¸²ã€‚</li>
<li>browser_typeï¼šå½“å‰æµè§ˆå™¨çš„BrowserTypeå®ä¾‹ã€‚</li>
<li>is_chromiumï¼Œis_webkitï¼Œis_firefoxï¼šç›¸åº”æµè§ˆå™¨ç±»å‹çš„å¸ƒå°”å€¼ã€‚</li>
</ul>
</li>
<li>è‡ªå®šä¹‰fixtureé€‰é¡¹ï¼šå¯¹äºbrowserå’Œcontext ï¼Œä½¿ç”¨ä»¥ä¸‹fixtureæ¥è‡ªå®šä¹‰å¯åŠ¨é€‰é¡¹ã€‚<ul>
<li>browser_context_argsï¼šè¦†ç›–browser.new_context()çš„é€‰é¡¹ï¼Œè¿”å›ä¸€ä¸ªå­—å…¸ã€‚</li>
<li>browser_type_launch_argsï¼šè¦†ç›–browser_type.launch()çš„å¯åŠ¨å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªå­—å…¸ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> playwright.sync_api <span class="hljs-keyword">import</span> Page                             <span class="hljs-comment"># test_example.py</span><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_baidu</span>(<span class="hljs-params">page: Page</span>):                                      <span class="hljs-comment"># å……å½“æµ‹è¯•ç”¨ä¾‹</span><br>    page.goto(<span class="hljs-string">&quot;https://www.baidu.com/&quot;</span>)                          <span class="hljs-comment"># ç»“åˆconftest.pyä½¿ç”¨</span><br>    page.wait_for_timeout(<span class="hljs-number">3000</span>)<br><br>    page.close()<br></code></pre></td></tr></table></figure>



<h3 id="1-è·³è¿‡æµè§ˆå™¨"><a href="#1-è·³è¿‡æµè§ˆå™¨" class="headerlink" title="(1) è·³è¿‡æµè§ˆå™¨"></a>(1) è·³è¿‡æµè§ˆå™¨</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> pytest                                                    <span class="hljs-comment"># test_skip.py</span><br><br><br><span class="hljs-meta">@pytest.mark.skip_browser(<span class="hljs-params"><span class="hljs-string">&quot;firefox&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_example</span>(<span class="hljs-params">page</span>):<br>    page.goto(<span class="hljs-string">&quot;https://playwright.dev/&quot;</span>)<br><br><span class="hljs-comment"># pytest test_skip.py --browser firefox                          # æ‰§è¡Œç”¨ä¾‹æŸ¥çœ‹æ•ˆæœ</span><br></code></pre></td></tr></table></figure>



<h3 id="2-æŒ‡å®šæµè§ˆå™¨"><a href="#2-æŒ‡å®šæµè§ˆå™¨" class="headerlink" title="(2) æŒ‡å®šæµè§ˆå™¨"></a>(2) æŒ‡å®šæµè§ˆå™¨</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> pytest                                                   <span class="hljs-comment"># test_browser.py</span><br><br><br><span class="hljs-meta">@pytest.mark.only_browser(<span class="hljs-params"><span class="hljs-string">&quot;firefox&quot;</span></span>)                            </span><span class="hljs-comment"># ã€æ–¹æ³•ä¸€ã€‘æŒ‡å®šæµè§ˆå™¨</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_example</span>(<span class="hljs-params">page</span>):<br>    page.goto(<span class="hljs-string">&quot;https://playwright.dev/&quot;</span>)<br><br><span class="hljs-comment"># pytest test_browser.py --headed                               # é»˜è®¤chromiumæ‰§è¡Œ</span><br><span class="hljs-comment"># pytest test_browser.py --browser firefox                      # ã€æ–¹æ³•äºŒã€‘</span><br><span class="hljs-comment"># pytest test_browser.py --browser-channel chromium             # å‘½ä»¤è¡Œå‚æ•°æŒ‡å®šæµè§ˆå™¨</span><br></code></pre></td></tr></table></figure>



<h3 id="3-é…ç½®base-url"><a href="#3-é…ç½®base-url" class="headerlink" title="(3) é…ç½®base-url"></a>(3) é…ç½®base-url</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_example</span>(<span class="hljs-params">page</span>):                                         <span class="hljs-comment"># test_base_url.py</span><br>    page.goto(<span class="hljs-string">&quot;/Login.aspx&quot;</span>)                                    <span class="hljs-comment"># ç”¨åˆ°äº†pytest-base-urlæ’ä»¶</span><br><br><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string"># pytest test_base_url.py --base-url https://mall.cnki.net      # ã€æ–¹æ³•ä¸€ã€‘å‘½ä»¤è¡Œå‚æ•°è®¿é—®</span><br><span class="hljs-string"></span><br><span class="hljs-string"># å¦å¤–ï¼šPlayWrightæ¡†æ¶(ä¸€)çš„ä¸Šä¸‹æ–‡ä»£ç ä¸­ï¼Œbase_urlå‚æ•°æ˜¯åœ¨new_context()æ–°å»ºä¸Šä¸‹æ–‡æ—¶ä½¿ç”¨çš„</span><br><span class="hljs-string">    # å³browser.new_context(base_url=&quot;https://www.baidu.com&quot;)   # ã€æ–¹æ³•äºŒã€‘æ–°å»ºä¸Šä¸‹æ–‡ä½¿ç”¨</span><br><span class="hljs-string">    # åç»­page.goto(&quot;/&quot;)ä½¿ç”¨æ—¶ï¼Œåªéœ€è¦å¡«å…¥ç›¸å¯¹åœ°å€&quot;/&quot;å°±å¯ä»¥è®¿é—®äº†</span><br><span class="hljs-string"></span><br><span class="hljs-string">[pytest]                                                        # ã€æ–¹æ³•ä¸‰ã€‘pytest.iniä¸­é…ç½®</span><br><span class="hljs-string">base_url=https://mall.cnki.net</span><br><span class="hljs-string"># pytest test_base_url.py --headed</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br></code></pre></td></tr></table></figure>



<h3 id="4-è®¾ç½®æ‰‹æœºè®¾å¤‡"><a href="#4-è®¾ç½®æ‰‹æœºè®¾å¤‡" class="headerlink" title="(4) è®¾ç½®æ‰‹æœºè®¾å¤‡"></a>(4) è®¾ç½®æ‰‹æœºè®¾å¤‡</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> pytest                                                   <span class="hljs-comment"># conftest.py</span><br><br><br><span class="hljs-meta">@pytest.fixture(<span class="hljs-params">scope=<span class="hljs-string">&quot;session&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">browser_context_args</span>(<span class="hljs-params">browser_context_args, playwright</span>):<br>    iphone_11 = playwright.devices[<span class="hljs-string">&quot;iPhone 11 Pro&quot;</span>]             <span class="hljs-comment"># æŒ‡å®šæ‰‹æœºå‹å·è¿è¡Œç”¨ä¾‹</span><br>    <span class="hljs-keyword">return</span> &#123;<br>        **browser_context_args,<br>        **iphone_11,<br>    &#125;<br><br><span class="hljs-comment"># pytest test_example.py --headed                               # æ‰§è¡Œç”¨ä¾‹æŸ¥çœ‹æ•ˆæœ</span><br></code></pre></td></tr></table></figure>



<h3 id="5-å¿½ç•¥httpsé”™è¯¯"><a href="#5-å¿½ç•¥httpsé”™è¯¯" class="headerlink" title="(5) å¿½ç•¥httpsé”™è¯¯"></a>(5) å¿½ç•¥httpsé”™è¯¯</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> pytest                                                   <span class="hljs-comment"># conftest.py</span><br><br><br><span class="hljs-meta">@pytest.fixture(<span class="hljs-params">scope=<span class="hljs-string">&quot;session&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">browser_context_args</span>(<span class="hljs-params">browser_context_args</span>):<br>    <span class="hljs-keyword">return</span> &#123;<br>        **browser_context_args,<br>        <span class="hljs-string">&quot;ignore_https_errors&quot;</span>: <span class="hljs-literal">True</span><br>    &#125;<br><br><span class="hljs-comment"># pytest test_example.py --headed                               # æ‰§è¡Œç”¨ä¾‹æŸ¥çœ‹æ•ˆæœ</span><br></code></pre></td></tr></table></figure>



<h3 id="6-æŒä¹…çš„context"><a href="#6-æŒä¹…çš„context" class="headerlink" title="(6) æŒä¹…çš„context"></a>(6) æŒä¹…çš„context</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> pytest                                                   <span class="hljs-comment"># conftest.py</span><br><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Dict</span><br><span class="hljs-keyword">from</span> playwright.sync_api <span class="hljs-keyword">import</span> BrowserType<br><br><br><span class="hljs-meta">@pytest.fixture(<span class="hljs-params">scope=<span class="hljs-string">&quot;session&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">context</span>(<span class="hljs-params">                                                    <span class="hljs-comment"># æµ‹è¯•ä¸­çš„æ‰€æœ‰é¡µé¢</span></span><br><span class="hljs-params">        browser_type: BrowserType,                              <span class="hljs-comment"># éƒ½æ˜¯ä»æŒä¹…ä¸Šä¸‹æ–‡åˆ›å»ºçš„</span></span><br><span class="hljs-params">        browser_type_launch_args: <span class="hljs-type">Dict</span>,</span><br><span class="hljs-params">        browser_context_args: <span class="hljs-type">Dict</span></span>):<br>    context = browser_type.launch_persistent_context(<span class="hljs-string">&quot;./foobar&quot;</span>, **&#123;<br>        **browser_type_launch_args,<br>        **browser_context_args,<br>        <span class="hljs-string">&quot;locale&quot;</span>: <span class="hljs-string">&quot;de-DE&quot;</span>,<br>    &#125;)<br>    <span class="hljs-keyword">yield</span> context<br>    context.close()<br><br><span class="hljs-comment"># pytest test_example.py --headed                               # æ‰§è¡Œç”¨ä¾‹æŸ¥çœ‹æ•ˆæœ</span><br></code></pre></td></tr></table></figure>



<h3 id="7-æµè§ˆå™¨çª—å£å¤§å°"><a href="#7-æµè§ˆå™¨çª—å£å¤§å°" class="headerlink" title="(7) æµè§ˆå™¨çª—å£å¤§å°"></a>(7) æµè§ˆå™¨çª—å£å¤§å°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> pytest                                                   <span class="hljs-comment"># conftest.py</span><br><br><br><span class="hljs-meta">@pytest.fixture(<span class="hljs-params">scope=<span class="hljs-string">&quot;session&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">browser_context_args</span>(<span class="hljs-params">browser_context_args</span>):<br>    <span class="hljs-keyword">return</span> &#123;<br>        **browser_context_args,<br>        <span class="hljs-string">&quot;viewport&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;width&quot;</span>: <span class="hljs-number">1920</span>,<br>            <span class="hljs-string">&quot;height&quot;</span>: <span class="hljs-number">1080</span>,<br>        &#125;<br>    &#125;<br><br><span class="hljs-comment"># pytest test_example.py --headed                               # æ‰§è¡Œç”¨ä¾‹æŸ¥çœ‹æ•ˆæœ</span><br></code></pre></td></tr></table></figure>



<h2 id="2-3-å¤šè¿›ç¨‹æ‰§è¡Œ"><a href="#2-3-å¤šè¿›ç¨‹æ‰§è¡Œ" class="headerlink" title="2-3 å¤šè¿›ç¨‹æ‰§è¡Œ"></a>2-3 å¤šè¿›ç¨‹æ‰§è¡Œ</h2><ul>
<li>å¤šè¿›ç¨‹æ‰§è¡Œ<ul>
<li>åŸåˆ™<ul>
<li>ç”¨ä¾‹ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œæ²¡æœ‰ä¾èµ–ï¼Œæ¯ä¸ªç”¨ä¾‹éƒ½å¯ç‹¬ç«‹è¿è¡Œã€‚</li>
<li>ç”¨ä¾‹æ‰§è¡Œä¹‹é—´æ²¡æœ‰é¡ºåºè¦æ±‚ï¼Œéšæœºé¡ºåºéƒ½å¯ä»¥æ­£å¸¸æ‰§è¡Œã€‚</li>
<li>æ¯ä¸ªç”¨ä¾‹éƒ½èƒ½é‡å¤æ‰§è¡Œï¼Œè¿è¡Œç»“æœä¸ä¼šå½±å“åˆ°å…¶ä»–ç”¨ä¾‹ã€‚</li>
</ul>
</li>
<li>ä½¿ç”¨PIPåŒ…ç®¡ç†å·¥å…·å®‰è£…pytest-xdistæ’ä»¶ï¼š<code>pip install pytest-xdist</code>ã€‚</li>
<li>çº¿ç¨‹(Thread)æ˜¯è¿›ç¨‹(Process)å†…çš„å®é™…æ‰§è¡Œå•ä½ï¼Œä¸€è¿›ç¨‹å¯åŒ…å«å¤šä¸ªçº¿ç¨‹ã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs Python">url = <span class="hljs-string">&quot;https://www.baidu.com/&quot;</span>                                  <span class="hljs-comment"># test_process.py</span><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_case1</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;case1------&quot;</span>)<br>    <span class="hljs-keyword">assert</span> url == <span class="hljs-string">&quot;https://www.baidu.com/&quot;</span><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_case2</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;case2------&quot;</span>)<br>    <span class="hljs-keyword">assert</span> url == <span class="hljs-string">&quot;https://www.baidu.com/&quot;</span><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_case3</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;case3------&quot;</span>)<br>    <span class="hljs-keyword">assert</span> url == <span class="hljs-string">&quot;https://www.baidu.com/&quot;</span><br><br><span class="hljs-comment"># pytest test_process.py -n 2                                   # å¹¶è¡Œæ‰§è¡Œç”¨ä¾‹</span><br><span class="hljs-comment"># pytest test_process.py -n auto                                # è‡ªåŠ¨è·å–CPUæ ¸æ•°ï¼Œæ‰§è¡Œé€Ÿåº¦æ…¢</span><br></code></pre></td></tr></table></figure>



<h2 id="2-4-å‘½ä»¤è¡Œé€‰é¡¹"><a href="#2-4-å‘½ä»¤è¡Œé€‰é¡¹" class="headerlink" title="2-4 å‘½ä»¤è¡Œé€‰é¡¹"></a>2-4 å‘½ä»¤è¡Œé€‰é¡¹</h2><ul>
<li>å‘½ä»¤è¡Œé€‰é¡¹<ul>
<li>æµ‹è¯•åˆ†å¸ƒç®—æ³•é…ç½®ï¼šæŒ‡åœ¨åˆ†å¸ƒå¼æµ‹è¯•æ‰§è¡ŒæœŸé—´ä½¿ç”¨çš„ç®—æ³•å’Œç›¸å…³è®¾ç½®ã€‚<ul>
<li>é€šè¿‡æµ‹è¯•åˆ†å¸ƒï¼Œå¯ä»¥å°†æµ‹è¯•ç”¨ä¾‹å¹¶è¡Œåœ¨å¤šä¸ªæµè§ˆå™¨ã€è®¾å¤‡æˆ–ç¯å¢ƒä¸­æ‰§è¡Œï¼Œä»¥åŠ å¿«æµ‹è¯•æ‰§è¡Œé€Ÿåº¦ã€‚</li>
<li>å¸¸è§çš„æµ‹è¯•åˆ†å¸ƒç®—æ³•é…ç½®é€‰é¡¹<ul>
<li>è½®è¯¢ï¼šå°†å¾…æ‰§è¡Œçš„æµ‹è¯•ç”¨ä¾‹ä¾æ¬¡è½®æµåˆ†å‘ç»™å¯ç”¨çš„æ‰§è¡Œå™¨ï¼Œä»¥å‡åŒ€åœ°åˆ†é…æµ‹è¯•è´Ÿè½½ã€‚</li>
<li>éšæœºï¼šéšæœºé€‰æ‹©å¯ç”¨çš„æ‰§è¡Œå™¨æ¥è¿è¡Œæµ‹è¯•ç”¨ä¾‹ï¼Œä»è€Œå¯èƒ½åœ¨æŸäº›æƒ…å†µä¸‹æé«˜æµ‹è¯•æ•ˆç‡ã€‚</li>
<li>åŸºäºè´Ÿè½½ï¼šæ ¹æ®æ‰§è¡Œå™¨çš„è´Ÿè½½æƒ…å†µåŠ¨æ€åˆ†å‘æµ‹è¯•ç”¨ä¾‹ï¼Œä»¥ç¡®ä¿æ‰§è¡Œå™¨çš„è´Ÿè½½å¤§è‡´ç›¸ç­‰ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>åœ¨Playwrightä¸­ï¼Œdistå‘½ä»¤è¡Œé€‰é¡¹ç”¨äºé…ç½®æµ‹è¯•åˆ†å¸ƒç®—æ³•ã€‚<ul>
<li><code>--repeat-each 3</code>ï¼šæ¯ä¸ªæµ‹è¯•ç”¨ä¾‹å°†è¢«æ‰§è¡Œ3æ¬¡ã€‚</li>
<li><code>--workers 3</code>ï¼šä½¿ç”¨3ä¸ªå·¥ä½œè¿›ç¨‹æ¥æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹ã€‚</li>
<li><code>--shard 1/3</code>ï¼šä½¿ç”¨3ä¸ªåˆ†ç‰‡ä¸­çš„ç¬¬1ä¸ªåˆ†ç‰‡æ¥æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹ã€‚</li>
<li><code>--max-failures 3</code>ï¼šå¦‚æœæµ‹è¯•ç”¨ä¾‹å¤±è´¥çš„æ¬¡æ•°è¾¾åˆ°3æ¬¡ï¼Œåˆ™æµ‹è¯•æ‰§è¡Œå°†åœæ­¢ã€‚</li>
<li><code>--dist loadfile</code>ï¼šä½¿ç”¨åŸºäºè´Ÿè½½çš„åˆ†å¸ƒç®—æ³•ï¼Œå¹¶æ ¹æ®æµ‹è¯•æ–‡ä»¶æ¥åˆ†å‘æµ‹è¯•ç”¨ä¾‹ã€‚</li>
<li><code>--dist loadgroup</code>ï¼šä½¿ç”¨åŸºäºè´Ÿè½½çš„åˆ†å¸ƒç®—æ³•ï¼Œå¹¶æ ¹æ®æµ‹è¯•åˆ†ç»„æ¥åˆ†å‘æµ‹è¯•ç”¨ä¾‹ã€‚<ul>
<li>ä½¿ç”¨<code>@pytest.mark.xdist_group(name=&quot; &quot;)</code>è£…é¥°å™¨ä¸ºæµ‹è¯•ç”¨ä¾‹æŒ‡å®šä¸åŒçš„åˆ†ç»„åç§°ã€‚</li>
<li>å½“æ‰§è¡Œæµ‹è¯•æ—¶ï¼Œpytest-xdistæ’ä»¶å¯ä»¥å¹¶è¡Œåœ°æ‰§è¡ŒåŒä¸€åˆ†ç»„çš„æµ‹è¯•ç”¨ä¾‹ï¼Œæé«˜æ‰§è¡Œæ•ˆç‡ã€‚</li>
</ul>
</li>
<li><code>--dist loadscope</code>ï¼šä½¿ç”¨åŸºäºè´Ÿè½½çš„åˆ†å¸ƒç®—æ³•ï¼Œå¹¶æŒ‰ä½œç”¨åŸŸæ¥åŠ¨æ€åˆ†é…æµ‹è¯•ç”¨ä¾‹ã€‚</li>
<li><code>--dist load</code>(é»˜è®¤æ–¹å¼)ï¼šä½¿ç”¨åŸºäºè´Ÿè½½çš„åˆ†å¸ƒç®—æ³•ï¼Œæ ¹æ®æ‰§è¡Œå™¨çš„è´Ÿè½½æƒ…å†µæ¥åŠ¨æ€åœ°åˆ†é…æµ‹è¯•ç”¨ä¾‹ã€‚</li>
<li><code>--dist no</code>ï¼šç¦ç”¨æµ‹è¯•åˆ†å¸ƒï¼Œå³ä¸è¿›è¡Œåˆ†å¸ƒå¼æµ‹è¯•æ‰§è¡Œï¼Œè€Œæ˜¯åœ¨å•ä¸ªæ‰§è¡Œå™¨ä¸Šä¾æ¬¡æ‰§è¡Œæ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ã€‚</li>
<li><code>--dist worksteal</code>ï¼šä½¿ç”¨workstealç®—æ³•åˆ†å‘ç”¨ä¾‹ï¼Œç®—æ³•å…è®¸ç©ºé—²çš„æ‰§è¡Œå™¨ä»ç¹å¿™çš„æ‰§è¡Œå™¨é‚£é‡Œçªƒå–ç”¨ä¾‹ä»¥å¹³è¡¡è´Ÿè½½ã€‚</li>
<li><code>--max-sched-chunk=3</code>ï¼šé™åˆ¶å¹¶å‘æ‰§è¡Œçš„æœ€å¤§æ•°é‡ä¸º3ï¼Œä»è€Œåœ¨å¤šçº¿ç¨‹è¿›è¡Œæµ‹è¯•æ—¶å¯ä»¥é™åˆ¶åŒæ—¶æ‰§è¡Œçš„æµ‹è¯•ç”¨ä¾‹æ•°é‡ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> pytest                                                   <span class="hljs-comment"># test_xdist_group.py</span><br><br>url = <span class="hljs-string">&quot;https://www.baidu.com/&quot;</span><br><br><br><span class="hljs-meta">@pytest.mark.xdist_group(<span class="hljs-params">name=<span class="hljs-string">&quot;group1&quot;</span></span>)                         </span><span class="hljs-comment"># è£…é¥°å™¨æŒ‡å®šåˆ†ç»„åç§°group1</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_case1</span>():                                               <span class="hljs-comment"># å¹¶è¡Œæ‰§è¡Œgroup1åˆ†ç»„çš„ç”¨ä¾‹</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;case1------&quot;</span>)<br>    <span class="hljs-keyword">assert</span> url == <span class="hljs-string">&quot;https://www.baidu.com/&quot;</span><br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestA</span>:<br><span class="hljs-meta">    @pytest.mark.xdist_group(<span class="hljs-params"><span class="hljs-string">&quot;group1&quot;</span></span>)</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_case2</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;case2------&quot;</span>)<br>        <span class="hljs-keyword">assert</span> url == <span class="hljs-string">&quot;https://www.baidu.com/&quot;</span><br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestB</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_case3</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;case3------&quot;</span>)<br>        <span class="hljs-keyword">assert</span> url == <span class="hljs-string">&quot;https://www.baidu.com/&quot;</span><br><br><span class="hljs-comment"># pytest -n auto test_xdist_group.py</span><br></code></pre></td></tr></table></figure>



<h2 id="2-5-æ’ä»¶ç»“åˆä½¿ç”¨"><a href="#2-5-æ’ä»¶ç»“åˆä½¿ç”¨" class="headerlink" title="2-5 æ’ä»¶ç»“åˆä½¿ç”¨"></a>2-5 æ’ä»¶ç»“åˆä½¿ç”¨</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_case1</span>(<span class="hljs-params">base_url</span>):                                       <span class="hljs-comment"># test_xdist_url.py</span><br>    <span class="hljs-built_in">print</span>(base_url)                                             <span class="hljs-comment"># pytest-xdistä¸pytest-base-urlç»“åˆä½¿ç”¨</span><br>    <span class="hljs-keyword">assert</span> base_url == <span class="hljs-string">&quot;https://www.baidu.com/&quot;</span>                 <span class="hljs-comment"># ä¼šé‡åˆ°xdistä¸é€‚é…çš„æƒ…å†µï¼Œå¯ä»¥å‚çœ‹è§£å†³æ–¹æ¡ˆ</span><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_case2</span>(<span class="hljs-params">base_url</span>):<br>    <span class="hljs-built_in">print</span>(base_url)<br>    <span class="hljs-keyword">assert</span> base_url == <span class="hljs-string">&quot;https://www.baidu.com/&quot;</span><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_case3</span>(<span class="hljs-params">base_url</span>):<br>    <span class="hljs-built_in">print</span>(base_url)<br>    <span class="hljs-keyword">assert</span> base_url == <span class="hljs-string">&quot;https://www.baidu.com/&quot;</span><br></code></pre></td></tr></table></figure>



<h3 id="1-pytest-ini"><a href="#1-pytest-ini" class="headerlink" title="(1) pytest.ini"></a>(1) pytest.ini</h3><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs Ini"><span class="hljs-section">[pytest]</span>                                                         <span class="hljs-comment"># pytest.ini</span><br><br><span class="hljs-attr">base_url</span>=https://www.baidu.com/<br><br><span class="hljs-comment"># pytest test_xdist_url.py                                       # æ‰§è¡Œæ­£å¸¸</span><br><span class="hljs-comment"># pytest test_xdist_url.py -n 2                                  # æ‰§è¡ŒæŠ¥é”™ï¼Œä¼šè·å–ä¸åˆ°base_url</span><br><span class="hljs-comment"># don&#x27;t run configure on xdist worker nodes                      # æºç æ–‡ä»¶æ³¨é‡Šï¼Œè¯´æ˜ä¸é€‚é…xdist</span><br></code></pre></td></tr></table></figure>



<h3 id="2-è§£å†³æ–¹æ¡ˆä¸€"><a href="#2-è§£å†³æ–¹æ¡ˆä¸€" class="headerlink" title="(2) è§£å†³æ–¹æ¡ˆä¸€"></a>(2) è§£å†³æ–¹æ¡ˆä¸€</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-meta">@pytest.fixture(<span class="hljs-params">scope=<span class="hljs-string">&quot;session&quot;</span></span>)                                </span><span class="hljs-comment"># PyCharmä¸­ï¼ŒCtrl+å³é”®ç‚¹å‡»base_url</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">base_url</span>(<span class="hljs-params">request</span>):                                          <span class="hljs-comment"># åŠ è½½plugin.pyæ–‡ä»¶ï¼Œæ‰¾åˆ°å·¦ä¾§ä»£ç æ®µ</span><br>    <span class="hljs-string">&quot;&quot;&quot;Return a base URL&quot;&quot;&quot;</span><br>    config = request.config<br>    <span class="hljs-comment"># base_url = config.getoption(&quot;base_url&quot;)                   # ä¿®æ”¹è¯¥è¡Œä»£ç ä¸ºä¸‹ä¸€è¡Œä»£ç å†…å®¹ï¼Œä¿å­˜</span><br>    base_url = config.getoption(<span class="hljs-string">&quot;base_url&quot;</span>) <span class="hljs-keyword">or</span> config.getini(<span class="hljs-string">&quot;base_url&quot;</span>)<br>    <span class="hljs-keyword">if</span> base_url <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:<br>        <span class="hljs-keyword">return</span> base_url<br><br><span class="hljs-comment"># å†æ¬¡æ‰§è¡Œå‘½ä»¤pytest test_xdist_url.py -n 2ï¼Œå°±ä¸ä¼šå†æŠ¥é”™äº†ï¼Œéšåæ‰§è¡Œpytestå‘½ä»¤æ—¶éƒ½å‡ºç°ä»¥ä¸‹é—®é¢˜</span><br><span class="hljs-comment"># UnicodeDecodeError: &#x27;gbk&#x27; codec can&#x27;t decode byte 0xa1 in position 185: illegal multibyte sequence</span><br><span class="hljs-comment"># å°†pytest.iniæ–‡ä»¶çš„ç¼–ç æ ¼å¼ç”±UTF-8æ”¹ä¸ºGBKå³å¯è§£å†³(ä¸æ¸…æ¥šæ˜¯ä¸æ˜¯ç”±äºä¿®æ”¹æºæ–‡ä»¶å†…å®¹å¼•èµ·çš„ï¼Œä¸æ¨èä½¿ç”¨è¯¥è§£å†³æ–¹æ¡ˆ)</span><br></code></pre></td></tr></table></figure>



<h3 id="3-è§£å†³æ–¹æ¡ˆäºŒ"><a href="#3-è§£å†³æ–¹æ¡ˆäºŒ" class="headerlink" title="(3) è§£å†³æ–¹æ¡ˆäºŒ"></a>(3) è§£å†³æ–¹æ¡ˆäºŒ</h3><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs Ini"><span class="hljs-section">[pytest]</span>                                                         <span class="hljs-comment"># pytest.ini</span><br><br><span class="hljs-attr">addopts</span> = --base-url=https://www.baidu.com/                      <span class="hljs-comment"># ä¸é…ç½®iniå‚æ•°ï¼Œé…ç½®å‘½ä»¤è¡Œå‚æ•°</span><br></code></pre></td></tr></table></figure>



<h1 id="3-é¡µé¢å¯¹è±¡æ¨¡å‹"><a href="#3-é¡µé¢å¯¹è±¡æ¨¡å‹" class="headerlink" title="3 é¡µé¢å¯¹è±¡æ¨¡å‹"></a>3 é¡µé¢å¯¹è±¡æ¨¡å‹</h1><ul>
<li>é¡µé¢å¯¹è±¡æ¨¡å‹<ul>
<li>POMæ˜¯ä¸€ç§è½¯ä»¶æµ‹è¯•è®¾è®¡æ¨¡å¼ï¼Œç”¨äºåœ¨è‡ªåŠ¨åŒ–æµ‹è¯•ä¸­ç»„ç»‡å’Œç®¡ç†ç½‘é¡µçš„å…ƒç´ å’Œæ“ä½œã€‚</li>
<li>è¯¥æ¨¡å¼å°†æ¯ä¸ªç½‘é¡µè§†ä¸ºä¸€ä¸ªç‹¬ç«‹çš„å¯¹è±¡ï¼Œå¹¶ä¸”ä½¿ç”¨å¯¹è±¡æ¥è¡¨ç¤ºè¯¥é¡µé¢çš„å…ƒç´ å’Œè¡Œä¸ºã€‚</li>
<li>åŸºæœ¬åŸåˆ™æ˜¯å°†é¡µé¢ç»“æ„å’Œè¡Œä¸ºä¸æµ‹è¯•ä»£ç åˆ†ç¦»å¼€æ¥ï¼Œè‹¥ç»“æ„å‘ç”Ÿå˜åŒ–ï¼Œåªéœ€æ›´æ–°é¡µé¢å¯¹è±¡çš„ä»£ç ã€‚</li>
<li>ä»¥æµ‹è¯•æ³¨å†Œé¡µé¢ä¸ºä¾‹<ul>
<li>æ ¹æ®è¾“å…¥æ¡†çš„å†…å®¹ï¼Œå¯ä»¥ç¼–å†™å¤šä¸ªæœ‰æ•ˆç­‰ä»·å’Œæ— æ•ˆç­‰ä»·çš„æµ‹è¯•ç”¨ä¾‹ã€‚</li>
<li>ç”¨ä¾‹æ“ä½œæ˜¯åœ¨é¡µé¢å…ƒç´ ä¸Šç‚¹ç‚¹ç‚¹ï¼Œå°†å…ƒç´ å®šä½å’Œæ“ä½œå°è£…æˆä¸€ä¸ªç±»ã€‚</li>
</ul>
</li>
<li>æ­å»ºJForumè®ºå›<ul>
<li><a target="_blank" rel="noopener" href="https://nchc.dl.sourceforge.net/project/xampp/XAMPP%20Windows/5.6.40/xampp-windows-x64-5.6.40-1-VC11-installer.exe">xampp-windows-x64-5.6.40-1-VC11-installer.exe</a>ï¼šä¸‹è½½ï¼Œå‚»ç“œå¼å®‰è£…ã€‚<ul>
<li>MySQLå°†my.iniæ–‡ä»¶ä¸­çš„ç«¯å£3306ä¿®æ”¹ä¸º3311ï¼ŒApacheå°†httpd.confæ–‡ä»¶ä¸­çš„ç«¯å£80ä¿®æ”¹ä¸º81ã€‚</li>
<li>&#x2F;Xampp&#x2F;phpMyAdmin&#x2F;config.inc.phpæ–‡ä»¶æ·»åŠ å†…å®¹<code>$cfg[&#39;Servers&#39;][$i][&#39;port&#39;] = &#39;3311&#39;;</code>ã€‚</li>
<li>å¯åŠ¨Apacheã€Tomcatã€MySQLï¼Œä¸‹è½½â€œ<a target="_blank" rel="noopener" href="https://master.dl.sourceforge.net/project/jforum2/jforum-2.7.0.war?viasf=1">jforum-2.7.0.war</a>â€å‰ªè´´åˆ°Xampp&#x2F;tomcat&#x2F;webappsç›®å½•ã€‚</li>
</ul>
</li>
<li>è‹¥æµè§ˆå™¨æ­£å¸¸è®¿é—®â€œ<a target="_blank" rel="noopener" href="http://localhost:81/phpmyadmin/">http://localhost:81/phpmyadmin/</a>â€ï¼Œè¯´æ˜æ–‡ä»¶é…ç½®æ­£ç¡®ã€‚<ul>
<li>phpMyAdminä¸­æ–°å»ºä¸€ä¸ªåä¸º<code>jforum</code>ï¼Œç¼–ç ä¸º<code>utf8_general_ci</code>çš„æ•°æ®åº“ã€‚</li>
<li>phpMyAdminç•Œé¢ï¼Œç‚¹å‡»è´¦æˆ·ï¼Œå°†ç”¨æˆ·åä¸ºrootçš„æƒé™å¯†ç å…¨éƒ¨æ”¹ä¸º123456ã€‚</li>
<li>&#x2F;Xampp&#x2F;phpMyAdmin&#x2F;config.inc.phpæ–‡ä»¶ï¼Œæ”¹<code>[&#39;password&#39;] = &#39;123456&#39;;</code>ã€‚</li>
</ul>
</li>
<li>æµè§ˆå™¨è®¿é—®â€œ<a target="_blank" rel="noopener" href="http://127.0.0.1:8080/jforum-2.7.0/install.jsp">http://127.0.0.1:8080/jforum-2.7.0/install.jsp</a>â€ï¼Œéƒ¨ç½²æœ¬åœ°è®ºå›ã€‚</li>
<li>æ•°æ®åº“ç«¯å£3311ï¼Œæ•°æ®åº“ç”¨æˆ·è´¦å·ä¸ºrootï¼Œå¯†ç 123456ï¼Œç³»ç»Ÿç®¡ç†å‘˜å¯†ç 123456ã€‚</li>
<li>éƒ¨ç½²å®Œæˆåè®¿é—®è®ºå›é¦–é¡µï¼š<a target="_blank" rel="noopener" href="http://127.0.0.1:8080/jforum-2.7.0/forums/list.page">http://127.0.0.1:8080/jforum-2.7.0/forums/list.page</a>ã€‚</li>
<li>æ³¨æ„ï¼šè®¿é—®è®ºå›æ—¶åªéœ€å¯åŠ¨Tomcatå’ŒMySQLï¼Œè®¿é—®æ•°æ®åº“åˆ™è¦å¼€å¯Apacheå’ŒMySQLã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs Yaml"><span class="hljs-attr">cases:</span>                                                           <span class="hljs-comment"># ç”¨äºæ”¾ç½®æµ‹è¯•ç”¨ä¾‹</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">test_register.py</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">__init__.py</span><br><span class="hljs-attr">models:</span>                                                          <span class="hljs-comment"># ç”¨äºæ”¾ç½®å°è£…å¥½çš„ç±»æ–‡ä»¶</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">register_page.py</span>                                           <span class="hljs-comment"># conftest.pyçš„é…ç½®ä¼˜å…ˆäºpytest.ini</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">__init.py</span>                                                  <span class="hljs-comment"># ä½†ä»ç„¶å—åˆ°pytest.iniå‘½ä»¤è¡Œé€‰é¡¹çš„å½±å“</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">conftest.py</span>                                                    <span class="hljs-comment"># ç”¨äºå®šä¹‰å…±äº«çš„fixtureså’Œé’©å­å‡½æ•°hooks</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">pytest.ini</span>                                                     <span class="hljs-comment"># é…ç½®æ–‡ä»¶ï¼Œç”¨äºè®¾ç½®å…¨å±€çš„æµ‹è¯•é€‰é¡¹å’Œæ’ä»¶</span><br></code></pre></td></tr></table></figure>



<h2 id="3-1-å°è£…æˆç±»"><a href="#3-1-å°è£…æˆç±»" class="headerlink" title="3-1 å°è£…æˆç±»"></a>3-1 å°è£…æˆç±»</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> playwright.sync_api <span class="hljs-keyword">import</span> Page                            <span class="hljs-comment"># register_page.py</span><br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">RegisterPage</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, page: Page</span>):<br>        self.page = page<br>        self.pop_message = <span class="hljs-literal">None</span><br>        self.locator_username = page.locator(<br>            <span class="hljs-string">&quot;//*[@id=&#x27;formregister&#x27;]/table[2]/tbody/tr[3]/td[2]/input&quot;</span><br>        )                                                       <span class="hljs-comment"># å®šä½ä¼šå‘˜åç§°</span><br>        self.locator_email = page.locator(<br>            <span class="hljs-string">&quot;//*[@id=&#x27;formregister&#x27;]/table[2]/tbody/tr[4]/td[2]/input&quot;</span><br>        )                                                       <span class="hljs-comment"># å®šä½ç”µå­é‚®ç®±</span><br>        self.locator_password = page.locator(<br>            <span class="hljs-string">&quot;//*[@id=&#x27;password&#x27;]&quot;</span><br>        )                                                       <span class="hljs-comment"># å®šä½å¯†ç </span><br>        self.locator_password_confirm = page.locator(<br>            <span class="hljs-string">&quot;//*[@id=&#x27;formregister&#x27;]/table[2]/tbody/tr[6]/td[2]/input&quot;</span><br>        )                                                       <span class="hljs-comment"># å®šä½ç¡®è®¤å¯†ç </span><br>        <span class="hljs-comment"># self.locator_register_btn = page.locator(</span><br>        <span class="hljs-comment">#     &quot;//*[@id=&quot;formregister&quot;]/table[2]/tbody/tr[7]/td/input[1]&quot;</span><br>        <span class="hljs-comment"># )                                                     # å®šä½ç¡®å®šæŒ‰é’®</span><br>        self.locator_register_btn = page.get_by_role(<span class="hljs-string">&quot;button&quot;</span>, name=<span class="hljs-string">&quot;ç¡®å®š&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">navigate</span>(<span class="hljs-params">self</span>):                                         <span class="hljs-comment"># å¯¼èˆªåˆ°ä¼šå‘˜æ³¨å†Œé¡µé¢</span><br>        self.page.goto(<span class="hljs-string">&quot;http://127.0.0.1:8080/jforum-2.7.0/user/insert.page&quot;</span>)<br>        <span class="hljs-comment"># self.page.click(</span><br>        <span class="hljs-comment">#     &quot;/html/body/table/tbody/tr[2]/td/table/tbody/tr[3]/td/input[1]&quot;</span><br>        <span class="hljs-comment"># )                                                     # åŒæ„åè®®ï¼Œæ²¡å®šä½åˆ°</span><br>        self.page.get_by_role(<span class="hljs-string">&quot;button&quot;</span>, name=<span class="hljs-string">&quot;æˆ‘åŒæ„ä»¥ä¸Šæ¡æ¬¾&quot;</span>).click()<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">handle_dialog</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">on_dialog</span>(<span class="hljs-params">dialog</span>):<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å¼¹çª—æç¤ºå†…å®¹ï¼š&quot;</span>, dialog.message)<br>            self.pop_message = dialog.message<br>            dialog.dismiss()<br>        self.page.on(<span class="hljs-string">&quot;dialog&quot;</span>, on_dialog)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">fill_username</span>(<span class="hljs-params">self, username</span>):                          <span class="hljs-comment"># è¾“å…¥ä¼šå‘˜åç§°</span><br>        self.locator_username.fill(username)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">fill_email</span>(<span class="hljs-params">self, email</span>):                                <span class="hljs-comment"># è¾“å…¥ç”µå­é‚®ç®±</span><br>        self.locator_email.fill(email)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">fill_password</span>(<span class="hljs-params">self, password</span>):                          <span class="hljs-comment"># è¾“å…¥å¯†ç </span><br>        self.locator_password.fill(password)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">fill_password_confirm</span>(<span class="hljs-params">self, password_confirm</span>):          <span class="hljs-comment"># è¾“å…¥ç¡®è®¤å¯†ç </span><br>        self.locator_password_confirm.fill(password_confirm)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">click_register_button</span>(<span class="hljs-params">self</span>):                            <span class="hljs-comment"># ç‚¹å‡»ç¡®å®šæŒ‰é’®</span><br>        self.locator_register_btn.wait_for(state=<span class="hljs-string">&quot;visible&quot;</span>)<br>        self.locator_register_btn.click()<br></code></pre></td></tr></table></figure>



<h2 id="3-2-conftest-py"><a href="#3-2-conftest-py" class="headerlink" title="3-2 conftest.py"></a>3-2 conftest.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> pytest                                                   <span class="hljs-comment"># conftest.py</span><br><span class="hljs-keyword">from</span> playwright.sync_api <span class="hljs-keyword">import</span> sync_playwright<br><br><br><span class="hljs-meta">@pytest.fixture(<span class="hljs-params">scope=<span class="hljs-string">&quot;session&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">context_chrome</span>():<br>    p = sync_playwright().start()                               <span class="hljs-comment"># å‰ç½®æ“ä½œä»£ç </span><br>    browser = p.chromium.launch(headless=<span class="hljs-literal">False</span>, slow_mo=<span class="hljs-number">1000</span>)<br>    context = browser.new_context()<br>    <span class="hljs-keyword">yield</span> context<br><br>    context.close()                                             <span class="hljs-comment"># å®ç°ç”¨ä¾‹åç½®</span><br>    browser.close()                                             <span class="hljs-comment"># åç½®æ“ä½œä»£ç </span><br>    p.stop()<br></code></pre></td></tr></table></figure>



<h2 id="3-3-æµ‹è¯•ç”¨ä¾‹éƒ¨åˆ†"><a href="#3-3-æµ‹è¯•ç”¨ä¾‹éƒ¨åˆ†" class="headerlink" title="3-3 æµ‹è¯•ç”¨ä¾‹éƒ¨åˆ†"></a>3-3 æµ‹è¯•ç”¨ä¾‹éƒ¨åˆ†</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> pytest                                                   <span class="hljs-comment"># test_register.py</span><br><span class="hljs-keyword">from</span> playwright.sync_api <span class="hljs-keyword">import</span> expect<br><span class="hljs-keyword">from</span> models.register_page <span class="hljs-keyword">import</span> RegisterPage<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestRegister</span>:<br><span class="hljs-meta">    @pytest.fixture(<span class="hljs-params">autouse=<span class="hljs-literal">True</span></span>)                               </span><span class="hljs-comment"># Trueä¸ºä½œç”¨åŸŸå†…çš„ç”¨ä¾‹è‡ªåŠ¨è°ƒç”¨</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">start_for_each</span>(<span class="hljs-params">self, context_chrome</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;è®¿é—®æ³¨å†Œé¡µ&quot;</span>)<br>        self.page = context_chrome.new_page()<br>        self.register = RegisterPage(self.page)<br>        self.register.navigate()<br>        <span class="hljs-keyword">yield</span>                                                   <span class="hljs-comment"># å°†ä¸€ä¸ªå‡½æ•°å˜æˆä¸€ä¸ªç”Ÿæˆå™¨</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å…³é—­æ³¨å†Œé¡µ&quot;</span>)<br>        self.page.close()                                       <span class="hljs-comment"># è¿™ä¸ªç”Ÿæˆå™¨ç”¨äºæµ‹è¯•æ³¨å†Œé¡µé¢</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_register_a</span>(<span class="hljs-params">self</span>):                                  <span class="hljs-comment"># ä¼šå‘˜åç§°ä¸ºç©º</span><br>        self.register.fill_username(<span class="hljs-string">&quot;&quot;</span>)                         <span class="hljs-comment"># å­—æ®µé•¿åº¦è¶…è¿‡ç›´æ¥æˆªæ–­</span><br>        self.register.fill_email(<span class="hljs-string">&quot;Amelia@gmail.com&quot;</span>)            <span class="hljs-comment"># è¿™é‡Œä¸åšéªŒè¯</span><br>        self.register.fill_password(<span class="hljs-string">&quot;Aa.123456&quot;</span>)<br>        self.register.fill_password_confirm(<span class="hljs-string">&quot;Aa.123456&quot;</span>)<br>        self.register.handle_dialog()<br>        self.register.click_register_button()<br>        <span class="hljs-keyword">assert</span> self.register.pop_message == <span class="hljs-string">&quot;è¯·å¡«å†™ä¼šå‘˜åç§°è¾“å…¥æ¡†&quot;</span><br>        <span class="hljs-comment"># expect(                                               # expectæ–­è¨€è·å–ä¸åˆ°å†…å®¹</span><br>        <span class="hljs-comment">#     self.register.pop_message</span><br>        <span class="hljs-comment"># ).to_contain_text(&quot;è¯·å¡«å†™ä¼šå‘˜åç§°è¾“å…¥æ¡†&quot;)</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_register_b</span>(<span class="hljs-params">self</span>):                                  <span class="hljs-comment"># ç”µå­é‚®ç®±ä¸ºç©º</span><br>        self.register.fill_username(<span class="hljs-string">&quot;Blima&quot;</span>)<br>        self.register.fill_email(<span class="hljs-string">&quot;&quot;</span>)<br>        self.register.fill_password(<span class="hljs-string">&quot;Aa.123456&quot;</span>)<br>        self.register.fill_password_confirm(<span class="hljs-string">&quot;Aa.123456&quot;</span>)<br>        self.register.handle_dialog()<br>        self.register.click_register_button()<br>        <span class="hljs-keyword">assert</span> self.register.pop_message == <span class="hljs-string">&quot;è¯·æ­£ç¡®çš„å¡«å†™ç”µå­é‚®ä»¶è¾“å…¥æ¡†&quot;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_register_c</span>(<span class="hljs-params">self</span>):                                  <span class="hljs-comment"># å¯†ç ä¸ºç©º</span><br>        self.register.fill_username(<span class="hljs-string">&quot;Cing&quot;</span>)<br>        self.register.fill_email(<span class="hljs-string">&quot;Cing@gmail.com&quot;</span>)<br>        self.register.fill_password(<span class="hljs-string">&quot;&quot;</span>)<br>        self.register.fill_password_confirm(<span class="hljs-string">&quot;Aa.123456&quot;</span>)<br>        self.register.handle_dialog()<br>        self.register.click_register_button()<br>        <span class="hljs-keyword">assert</span> self.register.pop_message == <span class="hljs-string">&quot;è¯·å¡«å†™å¯†ç è¾“å…¥æ¡†&quot;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_register_d</span>(<span class="hljs-params">self</span>):                                  <span class="hljs-comment"># å¯†ç ä¸ç¡®è®¤å¯†ç ä¸ä¸€è‡´</span><br>        self.register.fill_username(<span class="hljs-string">&quot;Daijon&quot;</span>)<br>        self.register.fill_email(<span class="hljs-string">&quot;Daijon@gmail.com&quot;</span>)<br>        self.register.fill_password(<span class="hljs-string">&quot;Aa.123456&quot;</span>)<br>        self.register.fill_password_confirm(<span class="hljs-string">&quot;123456&quot;</span>)<br>        self.register.handle_dialog()<br>        self.register.click_register_button()<br>        <span class="hljs-keyword">assert</span> self.register.pop_message == <span class="hljs-string">&quot;ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸åˆ&quot;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_register_e</span>(<span class="hljs-params">self</span>):                                  <span class="hljs-comment"># æˆåŠŸæ³¨å†Œ</span><br>        self.register.fill_username(<span class="hljs-string">&quot;Elianis&quot;</span>)<br>        self.register.fill_email(<span class="hljs-string">&quot;Elianis@gmail.com&quot;</span>)<br>        self.register.fill_password(<span class="hljs-string">&quot;Aa.123456&quot;</span>)<br>        self.register.fill_password_confirm(<span class="hljs-string">&quot;Aa.123456&quot;</span>)<br>        self.register.handle_dialog()<br>        self.register.click_register_button()<br>        expect(self.register.page).to_have_title(<span class="hljs-string">&quot;My Forum - your board description&quot;</span>)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    pytest.main()<br></code></pre></td></tr></table></figure>



<h1 id="4-ç™»å½•ç›¸å…³æ“ä½œ"><a href="#4-ç™»å½•ç›¸å…³æ“ä½œ" class="headerlink" title="4 ç™»å½•ç›¸å…³æ“ä½œ"></a>4 ç™»å½•ç›¸å…³æ“ä½œ</h1><ul>
<li>ç™»å½•ç›¸å…³æ“ä½œ<ul>
<li>èº«ä»½éªŒè¯æ–¹å¼ã€ç»•è¿‡ç™»å½•éªŒè¯ç ï¼šä»¥â€œé¡µé¢å¯¹è±¡æ¨¡å‹â€ä¸­æ­å»ºçš„â€œJForumè®ºå›â€ä¸ºä¾‹è¿›è¡Œè¯´æ˜ã€‚</li>
<li>ç™»å½•é¡µæ»‘åŠ¨è§£é”ï¼š<a target="_blank" rel="noopener" href="https://www.bootstrapmb.com/item/10579">https://www.bootstrapmb.com/item/10579</a>ã€‚</li>
<li>æ»‘å—æ‹¼å›¾éªŒè¯ç ï¼š<a target="_blank" rel="noopener" href="https://www.bootstrapmb.com/item/2880">https://www.bootstrapmb.com/item/2880</a>ã€‚</li>
<li>ç™»å½•éªŒè¯ç è¯†åˆ«ï¼š<a target="_blank" rel="noopener" href="https://www.bootstrapmb.com/item/8462">https://www.bootstrapmb.com/item/8462</a>ã€‚</li>
<li>å¤šçº¿ç¨‹ç™»å½•è´¦å·ã€å¤šè´¦å·ç™»å½•é—®é¢˜ï¼šä»¥â€œé¡µé¢å¯¹è±¡æ¨¡å‹â€ä¸­æ­å»ºçš„â€œJForumè®ºå›â€ä¸ºä¾‹è¿›è¡Œè¯´æ˜ã€‚</li>
</ul>
</li>
</ul>
<h2 id="4-1-èº«ä»½éªŒè¯æ–¹å¼"><a href="#4-1-èº«ä»½éªŒè¯æ–¹å¼" class="headerlink" title="4-1 èº«ä»½éªŒè¯æ–¹å¼"></a>4-1 èº«ä»½éªŒè¯æ–¹å¼</h2><ul>
<li>èº«ä»½éªŒè¯æ–¹å¼ï¼šä»¥â€œé¡µé¢å¯¹è±¡æ¨¡å‹â€ä¸­æ­å»ºçš„â€œJForumè®ºå›â€ä¸ºä¾‹è¿›è¡Œè¯´æ˜ã€‚<ul>
<li>ä¿å­˜ç™»å½•cookieï¼šå…ˆç™»å½•ï¼Œå°†cookieä¿å­˜åˆ°æœ¬åœ°ï¼Œé€šè¿‡åŠ è½½cookieçš„æ–¹å¼è§£å†³é‡å¤ç™»å½•çš„é—®é¢˜ã€‚</li>
<li>Webåº”ç”¨ç¨‹åºä½¿ç”¨åŸºäºcookieæˆ–åŸºäºä»¤ç‰Œçš„èº«ä»½éªŒè¯ï¼Œå…¶ä¸­ç»è¿‡èº«ä»½éªŒè¯çš„çŠ¶æ€å­˜å‚¨ä¸ºcookieæˆ–æœ¬åœ°å­˜å‚¨ã€‚</li>
<li>Playwrightæä¾›æ–¹æ³•ç”¨äºä»ç»è¿‡èº«ä»½éªŒè¯çš„ä¸Šä¸‹æ–‡ä¸­æ£€ç´¢å­˜å‚¨çŠ¶æ€ï¼Œç„¶ååˆ›å»ºå…·æœ‰é¢„å¡«å……çŠ¶æ€çš„æ–°ä¸Šä¸‹æ–‡ã€‚</li>
<li>ä¼šè¯å­˜å‚¨ï¼šä¼šè¯å­˜å‚¨å¾ˆå°‘ç”¨äºå­˜å‚¨ä¸ç™»å½•çŠ¶æ€ç›¸å…³çš„ä¿¡æ¯ï¼Œå¸¸ç”¨äºç‰¹å®šåŸŸï¼Œå¹¶ä¸”ä¸ä¼šè·¨é¡µé¢åŠ è½½æŒç»­å­˜åœ¨ã€‚</li>
<li>ä¿å­˜ç™»å½•çš„cookieæˆ–åŸºäºæœ¬åœ°å­˜å‚¨çŠ¶æ€çš„èº«ä»½éªŒè¯ï¼Œå¯ä»¥è·¨ä¸åŒçš„æµè§ˆå™¨ä½¿ç”¨ï¼Œå–å†³äºåº”ç”¨ç¨‹åºçš„èº«ä»½éªŒè¯æ¨¡å‹ã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> playwright.sync_api <span class="hljs-keyword">import</span> sync_playwright<br><br><br><span class="hljs-keyword">with</span> sync_playwright() <span class="hljs-keyword">as</span> p:<br>    browser = p.chromium.launch(headless=<span class="hljs-literal">False</span>)<br>    context = browser.new_context()<br>    page = context.new_page()<br>    page.goto(<span class="hljs-string">&quot;http://127.0.0.1:8080/jforum-2.7.0/user/login.page&quot;</span>)<br><br>    page.locator(<br>        <span class="hljs-string">&quot;//*[@id=&#x27;loginform&#x27;]/table[2]/tbody/tr[2]/td/table/tbody/tr[2]/td[2]/input&quot;</span><br>    ).fill(<span class="hljs-string">&quot;admin&quot;</span>)<br>    page.locator(<br>        <span class="hljs-string">&quot;//*[@id=&#x27;loginform&#x27;]/table[2]/tbody/tr[2]/td/table/tbody/tr[3]/td[2]/input&quot;</span><br>    ).fill(<span class="hljs-string">&quot;123456&quot;</span>)<br>    page.locator(<br>        <span class="hljs-string">&quot;//*[@id=&#x27;loginform&#x27;]/table[2]/tbody/tr[2]/td/table/tbody/tr[5]/td/input[2]&quot;</span><br>    ).click()                                                   <span class="hljs-comment"># éœ€è¦äº‹å…ˆåˆ›å»ºauthç›®å½•ï¼Œå¦åˆ™æŠ¥é”™</span><br><br>    storage = context.storage_state(path=<span class="hljs-string">&quot;auth/state.json&quot;</span>)     <span class="hljs-comment"># ä¿å­˜storageStateåˆ°æŒ‡å®šçš„æ–‡ä»¶</span><br><br>    context.close()                                             <span class="hljs-comment"># å…³é—­ä¸Šä¸‹æ–‡</span><br>    browser.close()                                             <span class="hljs-comment"># å…³é—­æµè§ˆå™¨å¯¹è±¡</span><br></code></pre></td></tr></table></figure>



<h3 id="1-ç”Ÿæˆstate-json"><a href="#1-ç”Ÿæˆstate-json" class="headerlink" title="(1) ç”Ÿæˆstate.json"></a>(1) ç”Ÿæˆstate.json</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs Json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;cookies&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>        <span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;JSESSIONID&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;value&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;B2BAB0E2E765073EA45904A266F0F1C0&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;domain&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;127.0.0.1&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;path&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/jforum-2.7.0&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;expires&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">-1</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;httpOnly&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">true</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;secure&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">false</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;sameSite&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Lax&quot;</span><br>        <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;jforumUserId&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;value&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;domain&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;127.0.0.1&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;path&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/jforum-2.7.0&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;expires&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1732842342.156105</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;httpOnly&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">true</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;secure&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">false</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;sameSite&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Lax&quot;</span><br>        <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;origins&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>



<h3 id="2-éªŒè¯æ˜¯å¦å…ç™»"><a href="#2-éªŒè¯æ˜¯å¦å…ç™»" class="headerlink" title="(2) éªŒè¯æ˜¯å¦å…ç™»"></a>(2) éªŒè¯æ˜¯å¦å…ç™»</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> playwright.sync_api <span class="hljs-keyword">import</span> sync_playwright<br><br><span class="hljs-keyword">with</span> sync_playwright() <span class="hljs-keyword">as</span> p:<br>    browser = p.chromium.launch(headless=<span class="hljs-literal">False</span>)<br>    context = browser.new_context(<br>        storage_state=<span class="hljs-string">&quot;auth/state.json&quot;</span><br>    )                                                           <span class="hljs-comment"># åŠ è½½æœ¬åœ°cookiesï¼Œå®ç°å…ç™»</span><br>    page = context.new_page()<br>    page.wait_for_timeout(<span class="hljs-number">1000</span>)<br>    page.goto(<span class="hljs-string">&quot;http://127.0.0.1:8080/jforum-2.7.0/forums/list.page&quot;</span>)<br>    page.pause()                                                <span class="hljs-comment"># æ‰“æ–­ç‚¹æŸ¥çœ‹æ˜¯å¦å…ç™»</span><br><br>    context.close()                                             <span class="hljs-comment"># å…³é—­ä¸Šä¸‹æ–‡</span><br>    browser.close()                                             <span class="hljs-comment"># å…³é—­æµè§ˆå™¨å¯¹è±¡</span><br></code></pre></td></tr></table></figure>



<h3 id="3-æœ¬åœ°ä¼šè¯å­˜å‚¨"><a href="#3-æœ¬åœ°ä¼šè¯å­˜å‚¨" class="headerlink" title="(3) æœ¬åœ°ä¼šè¯å­˜å‚¨"></a>(3) æœ¬åœ°ä¼šè¯å­˜å‚¨</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">from</span> playwright.sync_api <span class="hljs-keyword">import</span> sync_playwright<br><br><span class="hljs-keyword">with</span> sync_playwright() <span class="hljs-keyword">as</span> p:<br>    browser = p.chromium.launch(headless=<span class="hljs-literal">False</span>)<br>    context = browser.new_context()<br>    page = context.new_page()                                   <span class="hljs-comment"># å¯¼èˆªåˆ°ç‰¹å®šé¡µé¢</span><br>    page.goto(<span class="hljs-string">&quot;http://127.0.0.1:8080/jforum-2.7.0/user/login.page&quot;</span>)<br>    session_storage = page.evaluate(                            <span class="hljs-comment"># è·å–sessionStorage</span><br>        <span class="hljs-string">&quot;() =&gt; JSON.stringify(sessionStorage)&quot;</span><br>    )<br>    os.environ[<span class="hljs-string">&quot;SESSION_STORAGE&quot;</span>] = session_storage             <span class="hljs-comment"># å°†å…¶å­˜å‚¨ä¸ºç¯å¢ƒå˜é‡</span><br>    session_storage = os.environ[<span class="hljs-string">&quot;SESSION_STORAGE&quot;</span>]             <span class="hljs-comment"># åœ¨æ–°çš„ä¸Šä¸‹æ–‡ä¸­è®¾ç½®sessionStorage</span><br>    context.add_init_script(<span class="hljs-string">&quot;&quot;&quot;(storage =&gt; &#123;</span><br><span class="hljs-string">            if (window.location.hostname === &quot;example.com&quot;) &#123;</span><br><span class="hljs-string">                const entries = JSON.parse(storage)</span><br><span class="hljs-string">                for (const [key, value] of Object.entries(entries)) &#123;</span><br><span class="hljs-string">                    window.sessionStorage.setItem(key, value)</span><br><span class="hljs-string">                &#125;</span><br><span class="hljs-string">            &#125;</span><br><span class="hljs-string">        &#125;)(&#x27;&quot;&quot;&quot;</span> + session_storage + <span class="hljs-string">&quot;&#x27;)&quot;</span>)<br><br>    session_storage = os.getenv(<span class="hljs-string">&quot;SESSION_STORAGE&quot;</span>)              <span class="hljs-comment"># æ£€æŸ¥ç¯å¢ƒå˜é‡æ˜¯å¦è®¾ç½®äº†SESSION_STORAGE</span><br>    <span class="hljs-keyword">if</span> session_storage:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ç¯å¢ƒå˜é‡SESSION_STORAGEå·²ç»è®¾ç½®&quot;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ç¯å¢ƒå˜é‡SESSION_STORAGEå°šæœªè®¾ç½®&quot;</span>)<br><br>    context.close()                                             <span class="hljs-comment"># å…³é—­ä¸Šä¸‹æ–‡</span><br>    browser.close()                                             <span class="hljs-comment"># å…³é—­æµè§ˆå™¨å¯¹è±¡</span><br></code></pre></td></tr></table></figure>



<h2 id="4-2-ç»•è¿‡ç™»å½•éªŒè¯ç "><a href="#4-2-ç»•è¿‡ç™»å½•éªŒè¯ç " class="headerlink" title="4-2 ç»•è¿‡ç™»å½•éªŒè¯ç "></a>4-2 ç»•è¿‡ç™»å½•éªŒè¯ç </h2><ul>
<li>ç»•è¿‡ç™»å½•éªŒè¯ç ï¼šä»¥â€œé¡µé¢å¯¹è±¡æ¨¡å‹â€ä¸­æ­å»ºçš„â€œJForumè®ºå›â€ä¸ºä¾‹è¿›è¡Œè¯´æ˜ã€‚<ul>
<li>æµè§ˆå™¨æ‰‹å·¥ç™»å½•ï¼Œå†ä½¿ç”¨Playwrightæ¥ç®¡é¡µé¢ï¼Œç»•è¿‡ç™»å½•éªŒè¯ç æ“ä½œã€‚</li>
<li>æ‰¾åˆ°Chromeå±æ€§ï¼Œå¤åˆ¶Chromeçš„èµ·å§‹ä½ç½®ï¼Œæ·»åŠ åˆ°Pathç¯å¢ƒå˜é‡ä¸‹ã€‚</li>
<li>å‚æ•°è¯´æ˜<ul>
<li><code>--start-maximized</code>çª—å£æœ€å¤§åŒ–ã€‚</li>
<li><code>--incognito</code>éšç§æ¨¡å¼æ‰“å¼€ã€<code>--new-window</code>ç›´æ¥æ‰“å¼€ç½‘å€ã€‚</li>
<li><code>--remote-debugging-port</code>æŒ‡å®šè¿è¡Œç«¯å£ï¼Œéœ€ç¡®ä¿æ²¡è¢«å ç”¨ã€‚</li>
<li><code>--user-data-dir</code>æŒ‡å®šè¿è¡Œæµè§ˆå™¨çš„è¿è¡Œæ•°æ®ï¼Œæ–°å»ºç›®å½•ï¼Œä¸å½±å“ç³»ç»ŸåŸæ•°æ®ã€‚</li>
</ul>
</li>
<li><code>chrome.exe --remote-debugging-port=12345 --incognito --start-maximized --user-data-dir=</code></li>
<li><code>&#39;D:\Project\Python\demo&#39; --new-window http://127.0.0.1:8080/jforum-2.7.0/user/login.page</code></li>
<li>CMDçª—å£è¾“å…¥å‘½ä»¤å¯åŠ¨æµè§ˆå™¨ï¼Œå¹¶æ‰“å¼€JForumè®ºå›ï¼Œæ‰‹åŠ¨è¾“å…¥è´¦å·å¯†ç ç™»å½•åï¼Œæ‰§è¡Œä»¥ä¸‹Playwrightä»£ç ã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> playwright.sync_api <span class="hljs-keyword">import</span> sync_playwright<br><br><span class="hljs-keyword">with</span> sync_playwright() <span class="hljs-keyword">as</span> p:<br>    browser = p.chromium.connect_over_cdp(<br>        <span class="hljs-string">&quot;http://localhost:12345/&quot;</span>                               <span class="hljs-comment"># ç¡®ä¿chromeæ²¡æœ‰æ‰§è¡Œå…¶ä»–ä»»åŠ¡</span><br>    )                                                           <span class="hljs-comment"># è¿æ¥ç°æœ‰çš„Chromiumå®ä¾‹</span><br>    page = browser.contexts[<span class="hljs-number">0</span>].pages[<span class="hljs-number">0</span>]                         <span class="hljs-comment"># è·å–pageå¯¹è±¡</span><br>    <span class="hljs-built_in">print</span>(page.title())<br>    <span class="hljs-built_in">print</span>(page.url)<br>    page.get_by_role(<span class="hljs-string">&quot;link&quot;</span>, name=<span class="hljs-string">&quot;è¿›å…¥åå°ç®¡ç†&quot;</span>).click()<br><br>    <span class="hljs-comment"># connect_over_cdp()æ–¹æ³•å°†ç°æœ‰çš„Chromiumæµè§ˆå™¨å®ä¾‹ä¸Playwrightä»£ç è¿›è¡Œç»‘å®š</span><br>    <span class="hljs-comment"># è€Œéåœ¨Playwrightä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„æµè§ˆå™¨å®ä¾‹ï¼Œä¸éœ€è¦å†æ˜¾ç¤ºåœ°å…³é—­å·²è¿æ¥çš„æµè§ˆå™¨å®ä¾‹</span><br>    <span class="hljs-comment"># browser.close()</span><br></code></pre></td></tr></table></figure>



<h2 id="4-3-ç™»å½•é¡µæ»‘åŠ¨è§£é”"><a href="#4-3-ç™»å½•é¡µæ»‘åŠ¨è§£é”" class="headerlink" title="4-3 ç™»å½•é¡µæ»‘åŠ¨è§£é”"></a>4-3 ç™»å½•é¡µæ»‘åŠ¨è§£é”</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> playwright.sync_api <span class="hljs-keyword">import</span> sync_playwright<br><br><span class="hljs-keyword">with</span> sync_playwright() <span class="hljs-keyword">as</span> p:<br>    browser = p.chromium.launch(headless=<span class="hljs-literal">False</span>, slow_mo=<span class="hljs-number">1000</span>)<br>    context = browser.new_context()                             <span class="hljs-comment"># åˆ›å»ºä¸Šä¸‹æ–‡</span><br>    page = context.new_page()                                   <span class="hljs-comment"># åˆ›å»ºæ–°é¡µé¢</span><br>    page.goto(<span class="hljs-string">&quot;https://www.bootstrapmb.com/item/10579&quot;</span>)         <span class="hljs-comment"># è®¿é—®æ»‘å—æ•ˆæœé¡µ</span><br><br>    <span class="hljs-keyword">with</span> context.expect_page() <span class="hljs-keyword">as</span> new_page_info:                <span class="hljs-comment"># åˆ‡æ¢åˆ°æ»‘å—é¡µé¢</span><br>        page.get_by_role(<span class="hljs-string">&quot;link&quot;</span>, name=<span class="hljs-string">&quot;é¢„ è§ˆ&quot;</span>).click()<br>    new_page = new_page_info.value<br>    new_page.wait_for_load_state()                              <span class="hljs-comment"># ç­‰å¾…é¡µé¢åŠ è½½åˆ°æŒ‡å®šçŠ¶æ€</span><br><br>    iframe = new_page.frame_locator(<span class="hljs-string">&quot;//*[@id=&#x27;iframe&#x27;]&quot;</span>)        <span class="hljs-comment"># æ»‘åŠ¨æ¨¡å—åœ¨iframeé‡Œé¢</span><br>    slider = iframe.get_by_text(<span class="hljs-string">&quot;â†’&quot;</span>).bounding_box()<br>    slider_x = slider[<span class="hljs-string">&quot;x&quot;</span>] + slider[<span class="hljs-string">&quot;width&quot;</span>] // <span class="hljs-number">2</span>               <span class="hljs-comment"># æ»‘å—ä¸­å¿ƒç‚¹çš„xåæ ‡</span><br>    slider_y = slider[<span class="hljs-string">&quot;y&quot;</span>] + slider[<span class="hljs-string">&quot;height&quot;</span>] // <span class="hljs-number">2</span>              <span class="hljs-comment"># æ»‘å—ä¸­å¿ƒç‚¹çš„yåæ ‡</span><br>    target = iframe.get_by_text(<span class="hljs-string">&quot;â†’ å‘å³æ»‘åŠ¨&quot;</span>).bounding_box()<br>    target_x = target[<span class="hljs-string">&quot;width&quot;</span>]                                  <span class="hljs-comment"># æ»‘å—é€šé“æ€»é•¿</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;xåæ ‡ï¼š&quot;</span>, slider_x, <span class="hljs-string">&quot;\nyåæ ‡ï¼š&quot;</span>, slider_y, <span class="hljs-string">&quot;\næœ€å³ä¾§xåæ ‡ï¼š&quot;</span>, slider_x + target_x)<br><br>    new_page.mouse.move(slider_x, slider_y)<br>    new_page.mouse.down()                                       <span class="hljs-comment"># æŒ‰ä½é¼ æ ‡å·¦é”®</span><br>    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):                                         <span class="hljs-comment"># å¾ªç¯æ‰§è¡Œä»£ç 10æ¬¡</span><br>        slider_x += <span class="hljs-number">50</span>                                          <span class="hljs-comment"># é€æ­¥ç§»åŠ¨é¼ æ ‡è‡³æ»‘å—å³ä¾§</span><br>        new_page.mouse.move(slider_x, slider_y)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;xåæ ‡+50ï¼š&quot;</span>, slider_x)<br>    new_page.mouse.up()                                         <span class="hljs-comment"># é‡Šæ”¾é¼ æ ‡å·¦é”®</span><br><br>    browser.close()                                             <span class="hljs-comment"># å…³é—­æµè§ˆå™¨å¯¹è±¡</span><br></code></pre></td></tr></table></figure>



<h2 id="4-4-æ»‘å—æ‹¼å›¾éªŒè¯ç "><a href="#4-4-æ»‘å—æ‹¼å›¾éªŒè¯ç " class="headerlink" title="4-4 æ»‘å—æ‹¼å›¾éªŒè¯ç "></a>4-4 æ»‘å—æ‹¼å›¾éªŒè¯ç </h2><ul>
<li>æ»‘å—æ‹¼å›¾éªŒè¯ç <ul>
<li>é¦–å…ˆéœ€è¦å¾—åˆ°æ»‘å—èƒŒæ™¯å›¾ï¼Œç„¶åè®¡ç®—ç¼ºå£ä½ç½®ï¼Œæœ€åå¯èƒ½è¿˜è¦ç»•è¿‡é˜²çˆ¬è™«æœºåˆ¶ï¼Œè®¡ç®—æ»‘åŠ¨è½¨è¿¹ã€‚</li>
<li>æ»‘å—èƒŒæ™¯å›¾å¯ä»¥è·å–åˆ°ä¸€ä¸ªå›¾ç‰‡åœ°å€ï¼Œç¼ºå£å¯èƒ½è·å–åˆ°å›¾ç‰‡åœ°å€ï¼Œå¯èƒ½ç”±Canvasæ ‡ç­¾ç»˜åˆ¶è€Œæˆã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> re<br><span class="hljs-keyword">from</span> playwright.sync_api <span class="hljs-keyword">import</span> sync_playwright<br><br><span class="hljs-keyword">with</span> sync_playwright() <span class="hljs-keyword">as</span> p:<br>    browser = p.chromium.launch(headless=<span class="hljs-literal">False</span>, slow_mo=<span class="hljs-number">1000</span>)<br>    context = browser.new_context()                             <span class="hljs-comment"># åˆ›å»ºä¸Šä¸‹æ–‡</span><br>    page = context.new_page()                                   <span class="hljs-comment"># åˆ›å»ºæ–°é¡µé¢</span><br>    page.goto(<span class="hljs-string">&quot;https://www.bootstrapmb.com/item/2880&quot;</span>)          <span class="hljs-comment"># è®¿é—®æ»‘å—æ‹¼å›¾é¡µ</span><br><br>    <span class="hljs-keyword">with</span> context.expect_page() <span class="hljs-keyword">as</span> new_page_info:                <span class="hljs-comment"># åˆ‡æ¢åˆ°æ»‘å—æ‹¼å›¾é¡µ</span><br>        page.get_by_role(<span class="hljs-string">&quot;link&quot;</span>, name=<span class="hljs-string">&quot;é¢„ è§ˆ&quot;</span>).click()<br>    new_page = new_page_info.value<br>    new_page.wait_for_load_state()                              <span class="hljs-comment"># ç­‰å¾…é¡µé¢åŠ è½½åˆ°æŒ‡å®šçŠ¶æ€</span><br><br>    iframe = new_page.frame_locator(<span class="hljs-string">&quot;//*[@id=&#x27;iframe&#x27;]&quot;</span>)        <span class="hljs-comment"># æ»‘åŠ¨æ¨¡å—åœ¨iframeé‡Œé¢</span><br>    iframe.get_by_placeholder(<span class="hljs-string">&quot;ç”¨æˆ·å&quot;</span>).fill(<span class="hljs-string">&quot;admin&quot;</span>)<br>    iframe.get_by_placeholder(<span class="hljs-string">&quot;å¯†ç &quot;</span>).fill(<span class="hljs-string">&quot;123456&quot;</span>)<br>    iframe.get_by_role(<span class="hljs-string">&quot;button&quot;</span>, name=<span class="hljs-string">&quot;ç™»å½•&quot;</span>).click()<br>    src = iframe.locator(<span class="hljs-string">&quot;//*[@id=&#x27;scream&#x27;]&quot;</span>).get_attribute(<span class="hljs-string">&quot;src&quot;</span>)<br>    pic = <span class="hljs-string">&quot;https://v.bootstrapmb.com/2018/11/hxge32880/&quot;</span> + src<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;èƒŒæ™¯å›¾åœ°å€ï¼š<span class="hljs-subst">&#123;pic&#125;</span>&quot;</span>)<br><br>    canvas_style = iframe.locator(<br>        <span class="hljs-string">&quot;//*[@id=&#x27;imgVer&#x27;]/div[1]/div[1]/div[2]&quot;</span><br>    ).get_attribute(<span class="hljs-string">&quot;style&quot;</span>)<br>    left_value = re.search(<span class="hljs-string">r&quot;left:\s*(-?\d+)px&quot;</span>, canvas_style).group(<span class="hljs-number">1</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ç¼ºå£éœ€ç§»åŠ¨çš„è·ç¦»ï¼š<span class="hljs-subst">&#123;left_value&#125;</span>&quot;</span>)<br><br>    canvas = iframe.locator(<span class="hljs-string">&quot;#puzzleBox&quot;</span>).bounding_box()<br>    canvas_x = canvas[<span class="hljs-string">&quot;x&quot;</span>]                                      <span class="hljs-comment"># å·¦è¾¹è·</span><br>    canvas_y = canvas[<span class="hljs-string">&quot;y&quot;</span>]                                      <span class="hljs-comment"># ä¸Šè¾¹è·</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;canvasä½ç½®ï¼šå·¦è¾¹è·=<span class="hljs-subst">&#123;canvas_x&#125;</span>, ä¸Šè¾¹è·=<span class="hljs-subst">&#123;canvas_y&#125;</span>&quot;</span>)<br><br>    slider = iframe.locator(<span class="hljs-string">&quot;.slider-btn&quot;</span>).bounding_box()<br>    <span class="hljs-built_in">print</span>(slider)                                               <span class="hljs-comment"># è¿”å›æ»‘å—çš„xï¼Œyï¼Œæ»‘å—å¤§å°</span><br><br>    new_page.mouse.move(x=<span class="hljs-built_in">int</span>(slider[<span class="hljs-string">&quot;x&quot;</span>]), y=slider[<span class="hljs-string">&quot;y&quot;</span>] + slider[<span class="hljs-string">&quot;height&quot;</span>]/<span class="hljs-number">2</span>)<br>    new_page.mouse.down(button=<span class="hljs-string">&quot;middle&quot;</span>)<br>    new_page.wait_for_timeout(<span class="hljs-number">1000</span>)<br>    new_page.mouse.move(<br>        x=<span class="hljs-built_in">int</span>(slider[<span class="hljs-string">&quot;x&quot;</span>])-<span class="hljs-built_in">int</span>(left_value), y=slider[<span class="hljs-string">&quot;y&quot;</span>] + slider[<span class="hljs-string">&quot;height&quot;</span>]/<span class="hljs-number">2</span><br>    )<br>    new_page.mouse.up()<br><br>    browser.close()                                             <span class="hljs-comment"># å…³é—­æµè§ˆå™¨å¯¹è±¡</span><br></code></pre></td></tr></table></figure>



<h2 id="4-5-ç™»å½•éªŒè¯ç è¯†åˆ«"><a href="#4-5-ç™»å½•éªŒè¯ç è¯†åˆ«" class="headerlink" title="4-5 ç™»å½•éªŒè¯ç è¯†åˆ«"></a>4-5 ç™»å½•éªŒè¯ç è¯†åˆ«</h2><ul>
<li>ç™»å½•éªŒè¯ç è¯†åˆ«<ul>
<li>æ€è·¯ï¼šå…ˆè·å–åˆ°éªŒè¯ç å›¾ç‰‡ï¼Œå®šä½å…ƒç´ ï¼Œå¯¹å…ƒç´ æˆªå›¾å³å¯ï¼Œå†ä½¿ç”¨ddddocråº“å¿«é€Ÿè¯†åˆ«ã€‚</li>
<li>å‘½ä»¤å®‰è£…ddddocråº“ï¼š<code>pip install ddddocr -i https://pypi.douban.com/simple</code>ã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> ddddocr<br><span class="hljs-keyword">from</span> playwright.sync_api <span class="hljs-keyword">import</span> sync_playwright<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">handle_dialog</span>(<span class="hljs-params">dialog</span>):                                      <span class="hljs-comment"># è§¦å‘å¼¹å‡ºçª—å£çš„æ“ä½œæœªçŸ¥æ—¶ä½¿ç”¨</span><br>    <span class="hljs-built_in">print</span>(dialog.message)                                       <span class="hljs-comment"># è·å–å¯¹è¯æ¡†ä¸­æ˜¾ç¤ºçš„æ¶ˆæ¯</span><br>    <span class="hljs-keyword">assert</span> dialog.message == <span class="hljs-string">&quot;æäº¤æˆåŠŸï¼&quot;</span><br>    dialog.dismiss()                                            <span class="hljs-comment"># å…³é—­å¯¹è¯æ¡†</span><br><br><br><span class="hljs-keyword">with</span> sync_playwright() <span class="hljs-keyword">as</span> p:<br>    browser = p.chromium.launch(headless=<span class="hljs-literal">False</span>, slow_mo=<span class="hljs-number">1000</span>)<br>    context = browser.new_context()                             <span class="hljs-comment"># åˆ›å»ºä¸Šä¸‹æ–‡</span><br>    page = context.new_page()                                   <span class="hljs-comment"># åˆ›å»ºæ–°é¡µé¢</span><br>    page.goto(<span class="hljs-string">&quot;https://www.bootstrapmb.com/item/8462&quot;</span>)          <span class="hljs-comment"># è®¿é—®éªŒè¯ç é¡µ</span><br><br>    <span class="hljs-keyword">with</span> context.expect_page() <span class="hljs-keyword">as</span> new_page_info:                <span class="hljs-comment"># åˆ‡æ¢åˆ°éªŒè¯ç é¡µ</span><br>        page.get_by_role(<span class="hljs-string">&quot;link&quot;</span>, name=<span class="hljs-string">&quot;é¢„ è§ˆ&quot;</span>).click()<br>    new_page = new_page_info.value<br>    new_page.wait_for_load_state()                              <span class="hljs-comment"># ç­‰å¾…é¡µé¢åŠ è½½åˆ°æŒ‡å®šçŠ¶æ€</span><br><br>    iframe = new_page.frame_locator(<span class="hljs-string">&quot;//*[@id=&#x27;iframe&#x27;]&quot;</span>)        <span class="hljs-comment"># æ»‘åŠ¨æ¨¡å—åœ¨iframeé‡Œé¢</span><br>    iframe.locator(<br>        <span class="hljs-string">&quot;#canvas&quot;</span><br>    ).screenshot(path=<span class="hljs-string">&quot;pictures/code.png&quot;</span>)                      <span class="hljs-comment"># ä¿å­˜éªŒè¯ç </span><br><br>    ocr = ddddocr.DdddOcr(show_ad=<span class="hljs-literal">False</span>)                        <span class="hljs-comment"># è¯†åˆ«éªŒè¯ç ï¼Œå®ä¾‹åŒ–</span><br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;pictures/code.png&quot;</span>, <span class="hljs-string">&quot;rb&quot;</span>) <span class="hljs-keyword">as</span> f:                  <span class="hljs-comment"># æ‰“å¼€å›¾ç‰‡</span><br>        img_bytes = f.read()                                    <span class="hljs-comment"># è¯»å–å›¾ç‰‡</span><br>    code = ocr.classification(img_bytes)                        <span class="hljs-comment"># è¯†åˆ«éªŒè¯ç </span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;éªŒè¯ç ï¼š<span class="hljs-subst">&#123;code&#125;</span>&quot;</span>)<br><br>    iframe.get_by_placeholder(<span class="hljs-string">&quot;è¯·è¾“å…¥éªŒè¯ç ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰&quot;</span>).fill(code)<br>    iframe.get_by_role(<span class="hljs-string">&quot;button&quot;</span>, name=<span class="hljs-string">&quot;æäº¤&quot;</span>).click()<br>    new_page.on(<span class="hljs-string">&quot;dialog&quot;</span>, handle_dialog)<br><br>    browser.close()                                             <span class="hljs-comment"># å…³é—­æµè§ˆå™¨å¯¹è±¡</span><br></code></pre></td></tr></table></figure>



<h2 id="4-6-å¤šçº¿ç¨‹ç™»å½•è´¦å·"><a href="#4-6-å¤šçº¿ç¨‹ç™»å½•è´¦å·" class="headerlink" title="4-6 å¤šçº¿ç¨‹ç™»å½•è´¦å·"></a>4-6 å¤šçº¿ç¨‹ç™»å½•è´¦å·</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> threading <span class="hljs-keyword">import</span> Thread<br><span class="hljs-keyword">from</span> playwright.sync_api <span class="hljs-keyword">import</span> sync_playwright<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">do_some_thing</span>(<span class="hljs-params">username, password</span>):<br>    p = sync_playwright().start()<br>    browser = p.chromium.launch(headless=<span class="hljs-literal">False</span>, slow_mo=<span class="hljs-number">1000</span>)<br>    context = browser.new_context()<br>    page = context.new_page()<br>    page.goto(<span class="hljs-string">&quot;http://127.0.0.1:8080/jforum-2.7.0/user/login.page&quot;</span>)<br><br>    page.locator(<span class="hljs-string">&quot;input[name=\&quot;username\&quot;]&quot;</span>).fill(username)<br>    page.locator(<span class="hljs-string">&quot;input[name=\&quot;password\&quot;]&quot;</span>).fill(password)<br>    page.get_by_role(<span class="hljs-string">&quot;button&quot;</span>, name=<span class="hljs-string">&quot;ç™»å…¥&quot;</span>).click()<br><br>    page.pause()                                                <span class="hljs-comment"># æš‚åœæŸ¥çœ‹æ•ˆæœ</span><br>    context.close()<br>    browser.close()                                             <span class="hljs-comment"># å…³é—­æµè§ˆå™¨å¯¹è±¡</span><br><br><br>users = [[<span class="hljs-string">&quot;Admin&quot;</span>, <span class="hljs-string">&quot;123456&quot;</span>], [<span class="hljs-string">&quot;Elara&quot;</span>, <span class="hljs-string">&quot;Aa.123456&quot;</span>], [<span class="hljs-string">&quot;Celeste&quot;</span>, <span class="hljs-string">&quot;Aa.123456&quot;</span>]]<br><span class="hljs-keyword">for</span> user <span class="hljs-keyword">in</span> users:                                              <span class="hljs-comment"># å¤šçº¿ç¨‹ï¼Œ3ä¸ªè´¦å·åŒæ—¶æ“ä½œ</span><br>    thread = Thread(target=do_some_thing, args=user)<br>    thread.start()<br></code></pre></td></tr></table></figure>



<h1 id="5-è´¦å·åˆ‡æ¢æ“ä½œ"><a href="#5-è´¦å·åˆ‡æ¢æ“ä½œ" class="headerlink" title="5 è´¦å·åˆ‡æ¢æ“ä½œ"></a>5 è´¦å·åˆ‡æ¢æ“ä½œ</h1><ul>
<li>è´¦å·åˆ‡æ¢æ“ä½œ<ul>
<li>ä»¥â€œé¡µé¢å¯¹è±¡æ¨¡å‹â€ä¸­æ­å»ºçš„â€œJForumè®ºå›â€ä¸ºä¾‹è¿›è¡Œè¯´æ˜ã€‚<ul>
<li>ç”¨æˆ·çš„å‘å¸–ä¸å›å¸–åŠŸèƒ½ï¼Œéœ€ä½¿ç”¨Adminç®¡ç†å‘˜è´¦å·ï¼Œåœ¨åå°ç®¡ç†ä¸­å°†éªŒè¯ç å…³é—­ã€‚</li>
<li>åŒè´¦å·åˆ‡æ¢æ“ä½œï¼šä»£ç å®ç°Adminè´¦å·ç™»å½•è¿›è¡Œå‘å¸–ï¼ŒElianisè´¦å·ç™»å½•è¿›è¡Œå›å¸–ã€‚</li>
<li>è¿™é‡Œçš„conftest.pyæ–‡ä»¶åœ¨æ ¹ç›®å½•ï¼Œä¼šè¢«â€œé¡µé¢å¯¹è±¡æ¨¡å‹â€çš„conftest.pyæ–‡ä»¶å–ä»£ã€‚</li>
</ul>
</li>
<li>conftest.pyæ–‡ä»¶çš„ä¼˜å…ˆçº§é—®é¢˜<ul>
<li>æµ‹è¯•æ–‡ä»¶æ‰€åœ¨ç›®å½•ä¸­çš„conftest.pyæ–‡ä»¶ï¼Œå…·æœ‰æœ€é«˜çš„ä¼˜å…ˆçº§ã€‚</li>
<li>æµ‹è¯•æ–‡ä»¶æ‰€åœ¨çˆ¶ç›®å½•çš„conftest.pyæ–‡ä»¶å…¶æ¬¡ï¼Œä¾æ¬¡å‘ä¸ŠæŸ¥æ‰¾ã€‚</li>
<li>é¡¹ç›®æ ¹ç›®å½•ä¸­çš„conftest.pyæ–‡ä»¶ä¼˜å…ˆçº§æœ€ä½ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs Yaml"><span class="hljs-attr">cases:</span>                                                           <span class="hljs-comment"># ç”¨äºæ”¾ç½®æµ‹è¯•ç”¨ä¾‹</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">test_login.py</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">__init__.py</span>                                                <span class="hljs-comment"># ç©º</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">conftest.py</span>                                                <span class="hljs-comment"># ç”¨äºå®šä¹‰å…±äº«çš„fixtureså’Œé’©å­å‡½æ•°hooks</span><br><span class="hljs-attr">models:</span>                                                          <span class="hljs-comment"># ç”¨äºæ”¾ç½®å°è£…å¥½çš„ç±»æ–‡ä»¶</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">post_page.py</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">login_page.py</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">__init__.py</span>                                                <span class="hljs-comment"># ç©º</span><br></code></pre></td></tr></table></figure>



<h2 id="5-1-conftest-py"><a href="#5-1-conftest-py" class="headerlink" title="5-1 conftest.py"></a>5-1 conftest.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> pytest                                                   <span class="hljs-comment"># conftest.py</span><br><span class="hljs-keyword">from</span> playwright.sync_api <span class="hljs-keyword">import</span> sync_playwright<br><br><br><span class="hljs-meta">@pytest.fixture(<span class="hljs-params">scope=<span class="hljs-string">&quot;session&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">context_chrome</span>():<br>    p = sync_playwright().start()                               <span class="hljs-comment"># å‰ç½®æ“ä½œä»£ç </span><br>    browser = p.chromium.launch(headless=<span class="hljs-literal">False</span>, slow_mo=<span class="hljs-number">1000</span>)<br>    <span class="hljs-keyword">yield</span> browser<br><br>    browser.close()                                             <span class="hljs-comment"># åç½®æ“ä½œä»£ç </span><br>    p.stop()<br></code></pre></td></tr></table></figure>



<h2 id="5-2-post-page-py"><a href="#5-2-post-page-py" class="headerlink" title="5-2 post_page.py"></a>5-2 post_page.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> playwright.sync_api <span class="hljs-keyword">import</span> Page                            <span class="hljs-comment"># post_page.py</span><br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">PostPage</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, page: Page</span>):<br>        self.page = page<br><br>        self.locator_section = page.locator(<br>            <span class="hljs-string">&quot;body &gt; table &gt; tbody &gt; tr:nth-child(2) &gt; td &gt; table:nth-child(5) &gt; tbody &gt; tr &gt; td &quot;</span><br>            <span class="hljs-string">&quot;&gt; table.forumline.forumlist &gt; tbody &gt; tr:nth-child(3) &gt; td:nth-child(2) &gt; span.forumlink &gt; a&quot;</span><br>        )                                                       <span class="hljs-comment"># å®šä½æ¯æ—¥ä¸€è¨€ç‰ˆå—</span><br>        self.locator_topic = page.locator(<br>            <span class="hljs-string">&quot;body &gt; table &gt; tbody &gt; tr:nth-child(2) &gt; td &gt; table:nth-child(6) &quot;</span><br>            <span class="hljs-string">&quot;&gt; tbody &gt; tr &gt; td &gt; table:nth-child(2) &gt; tbody &gt; tr &gt; td:nth-child(1)&quot;</span><br>        )                                                       <span class="hljs-comment"># å®šä½å‘è¡¨ä¸»é¢˜æŒ‰é’®</span><br><br>        self.locator_post = page.get_by_role(<span class="hljs-string">&quot;link&quot;</span>, name=<span class="hljs-string">&quot;æ¯æ—¥è‹±è¯­&quot;</span>)<br>        self.locator_english = page.locator(<br>            <span class="hljs-string">&quot;.bodyline &gt; table:nth-child(2) &gt; tbody &gt; tr &gt; td&quot;</span><br>        ).first<br><br>        self.locator_subject = page.locator(<span class="hljs-string">&quot;input[name=\&quot;subject\&quot;]&quot;</span>)<br>        self.locator_message = page.locator(<span class="hljs-string">&quot;textarea[name=\&quot;message\&quot;]&quot;</span>)<br>        self.locator_sending = page.get_by_role(<span class="hljs-string">&quot;button&quot;</span>, name=<span class="hljs-string">&quot;å‘é€&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">navigate_daily_word</span>(<span class="hljs-params">self</span>):<br>        self.locator_section.click()<br>        self.locator_topic.click()<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">posted</span>(<span class="hljs-params">self, subject, message</span>):                         <span class="hljs-comment"># å‘å¸–</span><br>        self.locator_subject.fill(subject)<br>        self.locator_message.fill(message)<br>        self.locator_sending.click()<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">navigate_daily_english</span>(<span class="hljs-params">self</span>):<br>        self.locator_section.click()<br>        self.locator_post.click()<br>        self.locator_english.click()<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">reply</span>(<span class="hljs-params">self, message</span>):                                   <span class="hljs-comment"># å›å¸–</span><br>        self.locator_message.fill(message)<br>        self.locator_sending.click()<br></code></pre></td></tr></table></figure>



<h2 id="5-3-login-page-py"><a href="#5-3-login-page-py" class="headerlink" title="5-3 login_page.py"></a>5-3 login_page.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> playwright.sync_api <span class="hljs-keyword">import</span> Page                            <span class="hljs-comment"># login_page.py</span><br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">LoginPage</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, page: Page</span>):<br>        self.page = page<br>        self.locator_username = page.locator(<span class="hljs-string">&quot;input[name=\&quot;username\&quot;]&quot;</span>)<br>        self.locator_password = page.locator(<span class="hljs-string">&quot;input[name=\&quot;password\&quot;]&quot;</span>)<br>        self.locator_login_btn = page.get_by_role(<span class="hljs-string">&quot;button&quot;</span>, name=<span class="hljs-string">&quot;ç™»å…¥&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">navigate</span>(<span class="hljs-params">self</span>):                                         <span class="hljs-comment"># å¯¼èˆªåˆ°ç™»å½•é¡µé¢</span><br>        self.page.goto(<span class="hljs-string">&quot;http://127.0.0.1:8080/jforum-2.7.0/user/login.page&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">login</span>(<span class="hljs-params">self, username, password</span>):                        <span class="hljs-comment"># ç™»å½•</span><br>        self.locator_username.fill(username)<br>        self.locator_password.fill(password)<br>        self.locator_login_btn.click()<br></code></pre></td></tr></table></figure>



<h2 id="5-4-test-login-py"><a href="#5-4-test-login-py" class="headerlink" title="5-4 test_login.py"></a>5-4 test_login.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> pytest                                                   <span class="hljs-comment"># test_login.py</span><br><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">from</span> models.post_page <span class="hljs-keyword">import</span> PostPage<br><span class="hljs-keyword">from</span> models.login_page <span class="hljs-keyword">import</span> LoginPage<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">message_content</span>():<br>    response = requests.get(<span class="hljs-string">&quot;https://api.vvhan.com/api/dailyEnglish?type=sj&quot;</span>)<br>    <span class="hljs-keyword">if</span> response.status_code == <span class="hljs-number">200</span>:<br>        data = response.json()                                  <span class="hljs-comment"># è§£æJSONå“åº”</span><br>        zh_content = data[<span class="hljs-string">&quot;data&quot;</span>][<span class="hljs-string">&quot;zh&quot;</span>]                         <span class="hljs-comment"># è·å–zhå’Œenå†…å®¹</span><br>        en_content = data[<span class="hljs-string">&quot;data&quot;</span>][<span class="hljs-string">&quot;en&quot;</span>]<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;en_content&#125;</span>&quot;</span>)                                  <span class="hljs-comment"># æ‰“å°å†…å®¹</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;zh_content&#125;</span>&quot;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;en_content&#125;</span>&quot;</span> + <span class="hljs-string">&quot;/n&quot;</span> + <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;zh_content&#125;</span>&quot;</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;APIè·å–æ¯æ—¥è‹±è¯­å¤±è´¥ã€‚&quot;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;APIè·å–æ¯æ—¥è‹±è¯­å¤±è´¥ã€‚&quot;</span><br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestMoreAccounts</span>:                                         <span class="hljs-comment"># å¤šè´¦å·åˆ‡æ¢æ“ä½œ</span><br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        æµ‹è¯•æµç¨‹ï¼š</span><br><span class="hljs-string">            step--Adminç™»å½•ï¼Œå‘å¸–</span><br><span class="hljs-string">            step--Elianisç™»å½•ï¼Œå›å¸–</span><br><span class="hljs-string">        :return:</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br><span class="hljs-meta">    @pytest.fixture(<span class="hljs-params">autouse=<span class="hljs-literal">True</span></span>)                               </span><span class="hljs-comment"># Trueä¸ºä½œç”¨åŸŸå†…çš„ç”¨ä¾‹è‡ªåŠ¨è°ƒç”¨</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">start_for_each</span>(<span class="hljs-params">self, context_chrome</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;è®¿é—®ç™»å½•é¡µ&quot;</span>)<br><br>        admin_context = context_chrome.new_context()            <span class="hljs-comment"># ç®¡ç†å‘˜ç™»å½•</span><br>        admin_page = admin_context.new_page()<br>        self.user_admin_login = LoginPage(admin_page)<br>        self.user_admin_login.navigate()                        <span class="hljs-comment"># æ¯ä¸ªè´¦æˆ·æ“ä½œ</span><br>        self.user_admin_post = PostPage(admin_page)             <span class="hljs-comment"># éƒ½å°†äº§ç”Ÿä¸¤ä¸ªæµè§ˆå™¨ï¼Ÿï¼Ÿï¼Ÿ</span><br><br>        general_context = context_chrome.new_context()          <span class="hljs-comment"># æ™®é€šç”¨æˆ·ç™»å½•</span><br>        general_page = general_context.new_page()<br>        self.uesr_general_login = LoginPage(general_page)<br>        self.uesr_general_login.navigate()<br>        self.user_general_reply = PostPage(general_page)<br><br>        <span class="hljs-keyword">yield</span>                                                   <span class="hljs-comment"># å°†ä¸€ä¸ªå‡½æ•°å˜æˆä¸€ä¸ªç”Ÿæˆå™¨</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å…³é—­ç™»å½•é¡µ&quot;</span>)<br>        admin_context.close()<br>        general_context.close()                                 <span class="hljs-comment"># å…³é—­ä¸Šä¸‹æ–‡</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_admin</span>(<span class="hljs-params">self</span>):<br>        self.user_admin_login.login(<span class="hljs-string">&quot;Admin&quot;</span>, <span class="hljs-string">&quot;123456&quot;</span>)<br>        self.user_admin_post.navigate_daily_word()<br>        self.user_admin_post.posted(<span class="hljs-string">&quot;æ¯æ—¥è‹±è¯­&quot;</span>, message_content())<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_general</span>(<span class="hljs-params">self</span>):<br>        self.uesr_general_login.login(<span class="hljs-string">&quot;Elianis&quot;</span>, <span class="hljs-string">&quot;Aa.123456&quot;</span>)<br>        self.user_general_reply.navigate_daily_english()<br>        self.user_general_reply.reply(message_content())<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    pytest.main()<br></code></pre></td></tr></table></figure>



<h1 id="6-Mockæ¥å£è¿”å›"><a href="#6-Mockæ¥å£è¿”å›" class="headerlink" title="6 Mockæ¥å£è¿”å›"></a>6 Mockæ¥å£è¿”å›</h1><ul>
<li>Mockæ¥å£è¿”å›<ul>
<li>Playwrightæä¾›APIï¼Œç”¨æ¥æ¨¡æ‹Ÿå’Œä¿®æ”¹ç½‘ç»œè¯·æ±‚ï¼ŒåŒ…æ‹¬HTTPå’ŒHTTPSã€‚</li>
<li>é¡µé¢æ‰§è¡Œçš„ä»»ä½•è¯·æ±‚åŒ…æ‹¬XHRå’Œè·å–è¯·æ±‚ï¼Œéƒ½å¯ä»¥è¢«è·Ÿè¸ªã€ä¿®æ”¹å’Œæ¨¡æ‹Ÿã€‚</li>
<li>ä½¿ç”¨<code>page.route()</code>æ–¹æ³•åˆ›å»ºRouteå¯¹è±¡ï¼ŒæŒ‡å®šè¦æ‹¦æˆªçš„è¯·æ±‚URLï¼Œæˆ–ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡ŒåŒ¹é…ã€‚</li>
<li>åˆ›å»ºRouteå¯¹è±¡åï¼Œé€šè¿‡è°ƒç”¨<code>route.abort()</code>ã€<code>route.fulfill()</code>ç­‰æ¥æ§åˆ¶è¯·æ±‚çš„è¿›ä¸€æ­¥å¤„ç†ã€‚</li>
</ul>
</li>
</ul>
<h2 id="6-1-æ–¹æ³•"><a href="#6-1-æ–¹æ³•" class="headerlink" title="6-1 æ–¹æ³•"></a>6-1 æ–¹æ³•</h2><ul>
<li>æ–¹æ³•<ul>
<li><code>route.abort()</code>ï¼Œä¸­æ­¢è¯·æ±‚ï¼Œå¯ä»¥é€‰æ‹©æŒ‡å®šçš„é”™è¯¯ä»£ç ã€‚</li>
<li><code>route.fetch()</code>ï¼Œæ‰§è¡Œè¯·æ±‚å¹¶åœ¨ä¸æ»¡è¶³çš„æƒ…å†µä¸‹è·å–ç»“æœï¼Œä»¥ä¿®æ”¹å®Œæˆå“åº”ã€‚</li>
<li><code>route.fulfill()</code>ï¼Œç”¨äºæ¨¡æ‹Ÿå®Œæˆè¯·æ±‚ï¼Œå³æ‰‹åŠ¨æä¾›å“åº”æ•°æ®ï¼Œå¹¶ç»“æŸè¯·æ±‚ã€‚</li>
<li><code>route.fallback()</code>ï¼Œç”¨äºæŒ‡å®šå½“è¯·æ±‚æœªåŒ¹é…åˆ°ä»»ä½•æ‹¦æˆªè§„åˆ™æ—¶å€™çš„å›é€€è¡Œä¸ºã€‚</li>
<li><code>route.continue_()</code>ï¼Œç»§ç»­è¯·æ±‚ï¼Œä½¿å…¶æŒ‰ç…§æ­£å¸¸çš„æµç¨‹ç»§ç»­å‘é€ï¼Œå¹¶æ¥æ”¶å“åº”ã€‚</li>
</ul>
</li>
</ul>
<h3 id="1-abort"><a href="#1-abort" class="headerlink" title="(1) abort()*"></a>(1) abort()*</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> playwright.sync_api <span class="hljs-keyword">import</span> sync_playwright<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">intercept_request</span>(<span class="hljs-params">route, request</span>):<br>    <span class="hljs-keyword">if</span> request.url.startswith(<span class="hljs-string">&quot;https://www.amap.com&quot;</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Intercepted request to: <span class="hljs-subst">&#123;request.url&#125;</span>&quot;</span>)<br>        route.abort()                                           <span class="hljs-comment"># ä¸­æ­¢è¯·æ±‚</span><br><br><br><span class="hljs-keyword">with</span> sync_playwright() <span class="hljs-keyword">as</span> p:<br>    browser = p.chromium.launch(headless=<span class="hljs-literal">False</span>, slow_mo=<span class="hljs-number">1000</span>)<br>    page = browser.new_page()<br>    page.route(                                                 <span class="hljs-comment"># ç›‘å¬è¯·æ±‚å¹¶æ‹¦æˆª</span><br>        <span class="hljs-string">&quot;**/*&quot;</span>, <span class="hljs-keyword">lambda</span> route, request: intercept_request(route, request)<br>    )<br>    page.goto(<span class="hljs-string">&quot;https://www.amap.com/smog&quot;</span>)                      <span class="hljs-comment"># æŠ¥é”™ï¼Œæ— æ³•è®¿é—®ç½‘ç«™ï¼Ÿï¼Ÿï¼Ÿ</span><br>    browser.close()                                             <span class="hljs-comment"># å…³é—­æµè§ˆå™¨å¯¹è±¡</span><br></code></pre></td></tr></table></figure>



<h3 id="2-fetch"><a href="#2-fetch" class="headerlink" title="(2) fetch()"></a>(2) fetch()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> playwright.sync_api <span class="hljs-keyword">import</span> sync_playwright<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">handle</span>(<span class="hljs-params">route</span>):<br>    response = route.fetch()                                    <span class="hljs-comment"># è·å–ç½‘ç»œè¯·æ±‚çš„å“åº”</span><br>    json = response.json()                                      <span class="hljs-comment"># å°†å“åº”è½¬æ¢æˆJsonæ ¼å¼</span><br>    json[<span class="hljs-string">&quot;result&quot;</span>][<span class="hljs-string">&quot;big_red_dog&quot;</span>] = []                          <span class="hljs-comment"># æ·»åŠ å“åº”æ•°æ®big_red_dogï¼Œå±æ€§å€¼è®¾ä¸ºç©º</span><br>    route.fulfill(response=response, json=json)<br><br><br><span class="hljs-keyword">with</span> sync_playwright() <span class="hljs-keyword">as</span> p:<br>    browser = p.chromium.launch(headless=<span class="hljs-literal">False</span>, slow_mo=<span class="hljs-number">1000</span>)<br>    page = browser.new_page()<br>    page.route(<span class="hljs-string">&quot;https://api.oioweb.cn/api/SoulWords&quot;</span>, handle)   <span class="hljs-comment"># æš‚åœåï¼Œåœ¨å½“å‰é¡µé¢è®¿é—®æ¥å£åœ°å€</span><br>    page.pause()                                                <span class="hljs-comment"># F12æŸ¥çœ‹å“åº”æ•°æ®çš„æ·»åŠ æƒ…å†µ</span><br>    browser.close()                                             <span class="hljs-comment"># å…³é—­æµè§ˆå™¨å¯¹è±¡</span><br></code></pre></td></tr></table></figure>



<h3 id="3-fulfill"><a href="#3-fulfill" class="headerlink" title="(3) fulfill()"></a>(3) fulfill()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> playwright.sync_api <span class="hljs-keyword">import</span> sync_playwright<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">intercept_request</span>(<span class="hljs-params">route, request</span>):<br>    <span class="hljs-keyword">if</span> request.url.startswith(<span class="hljs-string">&quot;https://api.oioweb.cn/api/SoulWords&quot;</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Intercepted request to: <span class="hljs-subst">&#123;request.url&#125;</span>&quot;</span>)<br>        route.fulfill(<br>            status=<span class="hljs-number">200</span>,                                         <span class="hljs-comment"># çŠ¶æ€ç </span><br>            body=<span class="hljs-string">&quot;&#123;&#x27;message&#x27;: &#x27;Hello, World!&#x27;&#125;&quot;</span>,                <span class="hljs-comment"># å“åº”ä½“</span><br>            headers=&#123;<span class="hljs-string">&quot;Content-Type&quot;</span>: <span class="hljs-string">&quot;application/json&quot;</span>&#125;        <span class="hljs-comment"># å“åº”å¤´</span><br>        )                                                       <span class="hljs-comment"># æ¨¡æ‹Ÿå®Œæˆè¯·æ±‚</span><br>    <span class="hljs-keyword">else</span>:<br>        route.continue_()                                       <span class="hljs-comment"># æ¡ä»¶ä¸ç¬¦åˆ™å…è®¸è¯·æ±‚æ­£å¸¸è¿›è¡Œ</span><br><br><br><span class="hljs-keyword">with</span> sync_playwright() <span class="hljs-keyword">as</span> p:<br>    browser = p.chromium.launch(headless=<span class="hljs-literal">False</span>, slow_mo=<span class="hljs-number">1000</span>)<br>    page = browser.new_page()<br>    page.route(<br>        <span class="hljs-string">&quot;**/*&quot;</span>, <span class="hljs-keyword">lambda</span> route, request: intercept_request(route, request)<br>    )                                                           <span class="hljs-comment"># ç›‘å¬è¯·æ±‚å¹¶æ‹¦æˆª</span><br>    page.goto(<span class="hljs-string">&quot;https://api.oioweb.cn/api/SoulWords&quot;</span>)<br>    page.pause()<br>    browser.close()                                             <span class="hljs-comment"># å…³é—­æµè§ˆå™¨å¯¹è±¡</span><br></code></pre></td></tr></table></figure>



<h3 id="4-fallback"><a href="#4-fallback" class="headerlink" title="(4) fallback()"></a>(4) fallback()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> playwright.sync_api <span class="hljs-keyword">import</span> sync_playwright<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">intercept_request</span>(<span class="hljs-params">route, request</span>):<br>    <span class="hljs-keyword">if</span> request.url.startswith(<span class="hljs-string">&quot;https://www.amap.com/smog&quot;</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Intercepted request to: <span class="hljs-subst">&#123;request.url&#125;</span>&quot;</span>)<br>        route.abort()                                           <span class="hljs-comment"># ä¸­æ­¢è¯·æ±‚</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Fallback: <span class="hljs-subst">&#123;request.url&#125;</span>&quot;</span>)                       <span class="hljs-comment"># æ‰“å°å›é€€æ¶ˆæ¯</span><br>        route.fallback()                                        <span class="hljs-comment"># è§¦å‘å›é€€è¡Œä¸ºï¼Œå…è®¸è¯·æ±‚æ­£å¸¸ç»§ç»­</span><br><br><br><span class="hljs-keyword">with</span> sync_playwright() <span class="hljs-keyword">as</span> p:<br>    browser = p.chromium.launch(headless=<span class="hljs-literal">False</span>, slow_mo=<span class="hljs-number">1000</span>)<br>    page = browser.new_page()<br>    page.route(                                                 <span class="hljs-comment"># ç›‘å¬è¯·æ±‚å¹¶æ‹¦æˆª</span><br>        <span class="hljs-string">&quot;**/*&quot;</span>, <span class="hljs-keyword">lambda</span> route, request: intercept_request(route, request)<br>    )<br>    page.goto(<span class="hljs-string">&quot;https://www.amap.com&quot;</span>)<br>    browser.close()                                             <span class="hljs-comment"># å…³é—­æµè§ˆå™¨å¯¹è±¡</span><br></code></pre></td></tr></table></figure>



<h3 id="5-continue"><a href="#5-continue" class="headerlink" title="(5) continue_()*"></a>(5) continue_()*</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> playwright.sync_api <span class="hljs-keyword">import</span> sync_playwright<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">intercept_request</span>(<span class="hljs-params">route, request</span>):<br>    <span class="hljs-keyword">if</span> request.url.startswith(<span class="hljs-string">&quot;https://www.amap.com&quot;</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Intercepted request to: <span class="hljs-subst">&#123;request.url&#125;</span>&quot;</span>)<br>        route.continue_()                                       <span class="hljs-comment"># ç»§ç»­è¯·æ±‚ï¼ŒæŠ¥é”™ï¼Ÿï¼Ÿï¼Ÿ</span><br><br><br><span class="hljs-keyword">with</span> sync_playwright() <span class="hljs-keyword">as</span> p:<br>    browser = p.chromium.launch(headless=<span class="hljs-literal">False</span>, slow_mo=<span class="hljs-number">1000</span>)<br>    page = browser.new_page()<br>    page.route(                                                 <span class="hljs-comment"># ç›‘å¬è¯·æ±‚å¹¶æ‹¦æˆª</span><br>        <span class="hljs-string">&quot;**/*&quot;</span>, <span class="hljs-keyword">lambda</span> route, request: intercept_request(route, request)<br>    )<br>    page.goto(<span class="hljs-string">&quot;https://www.amap.com/smog&quot;</span>)<br>    browser.close()                                             <span class="hljs-comment"># å…³é—­æµè§ˆå™¨å¯¹è±¡</span><br></code></pre></td></tr></table></figure>



<h2 id="6-2-å±æ€§"><a href="#6-2-å±æ€§" class="headerlink" title="6-2 å±æ€§"></a>6-2 å±æ€§</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> playwright.sync_api <span class="hljs-keyword">import</span> sync_playwright<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">intercept_request</span>(<span class="hljs-params">route, request</span>):<br>    <span class="hljs-keyword">if</span> request.url.startswith(<span class="hljs-string">&quot;https://api.oioweb.cn/api/SoulWords&quot;</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Intercepted request to: <span class="hljs-subst">&#123;request.url&#125;</span>&quot;</span>)<br>        route.fulfill(<br>            status=<span class="hljs-number">200</span>,                                         <span class="hljs-comment"># çŠ¶æ€ç </span><br>            body=<span class="hljs-string">&quot;&#123;&#x27;message&#x27;: &#x27;Hello, World!&#x27;&#125;&quot;</span>,                <span class="hljs-comment"># å“åº”ä½“</span><br>            headers=&#123;<span class="hljs-string">&quot;Content-Type&quot;</span>: <span class="hljs-string">&quot;application/json&quot;</span>&#125;        <span class="hljs-comment"># å“åº”å¤´</span><br>        )                                                       <span class="hljs-comment"># æ¨¡æ‹Ÿå®Œæˆè¯·æ±‚</span><br>        <span class="hljs-built_in">print</span>(route.request)                                    <span class="hljs-comment"># è·å–å½“å‰è¯·æ±‚çš„ç›¸å…³ä¿¡æ¯æˆ–å±æ€§</span><br>    <span class="hljs-keyword">else</span>:<br>        route.continue_()                                       <span class="hljs-comment"># æ¡ä»¶ä¸ç¬¦åˆ™å…è®¸è¯·æ±‚æ­£å¸¸è¿›è¡Œ</span><br><br><br><span class="hljs-keyword">with</span> sync_playwright() <span class="hljs-keyword">as</span> p:<br>    browser = p.chromium.launch(headless=<span class="hljs-literal">False</span>, slow_mo=<span class="hljs-number">1000</span>)<br>    page = browser.new_page()<br>    page.route(<br>        <span class="hljs-string">&quot;**/*&quot;</span>, <span class="hljs-keyword">lambda</span> route, request: intercept_request(route, request)<br>    )                                                           <span class="hljs-comment"># ç›‘å¬è¯·æ±‚å¹¶æ‹¦æˆª</span><br>    page.goto(<span class="hljs-string">&quot;https://api.oioweb.cn/api/SoulWords&quot;</span>)<br>    browser.close()                                             <span class="hljs-comment"># å…³é—­æµè§ˆå™¨å¯¹è±¡</span><br></code></pre></td></tr></table></figure>



<h1 id="7-JavaScriptè„šæœ¬"><a href="#7-JavaScriptè„šæœ¬" class="headerlink" title="7 JavaScriptè„šæœ¬"></a>7 JavaScriptè„šæœ¬</h1><ul>
<li>JavaScriptè„šæœ¬<ul>
<li>é¡µé¢å¯¹è±¡æ‰§è¡ŒJavaScriptè„šæœ¬<ul>
<li>Playwrightä½¿ç”¨<code>page.evaluate()</code>æ‰§è¡ŒJavaScriptä»£ç å¹¶è¿”å›è°ƒç”¨æ‰§è¡Œçš„ç»“æœã€‚</li>
<li>ä½¿ç”¨<code>page.evaluate_handle()</code>æ‰§è¡ŒJavaScriptä»£ç ï¼Œå¹¶è¿”å›æ‰§è¡Œç»“æœçš„å¥æŸ„ã€‚</li>
</ul>
</li>
<li>å®šä½å…ƒç´ æ‰§è¡ŒJavaScriptè„šæœ¬<ul>
<li>é€šè¿‡<code>locator.evaluate()</code>æ–¹æ³•ï¼Œå¯¹å®šä½åˆ°çš„å…ƒç´ æ‰§è¡ŒJavaScriptä»£ç ã€‚</li>
<li>ä½¿ç”¨<code>locator.evaluate_all()</code>å¯¹å®šä½çš„æ‰€æœ‰å…ƒç´ æ‰§è¡ŒJavaScriptä»£ç ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="7-1-é¡µé¢Js"><a href="#7-1-é¡µé¢Js" class="headerlink" title="7-1 é¡µé¢Js*"></a>7-1 é¡µé¢Js*</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> playwright.sync_api <span class="hljs-keyword">import</span> sync_playwright<br><br><span class="hljs-keyword">with</span> sync_playwright() <span class="hljs-keyword">as</span> p:<br>    browser = p.chromium.launch(headless=<span class="hljs-literal">False</span>, slow_mo=<span class="hljs-number">1000</span>)<br>    page = browser.new_page()<br><br>    <span class="hljs-built_in">print</span>(page.evaluate(<span class="hljs-string">&quot;1 + 2&quot;</span>))                               <span class="hljs-comment"># 3</span><br>    x = <span class="hljs-number">10</span><br>    <span class="hljs-built_in">print</span>(page.evaluate(<span class="hljs-string">f&quot;1 + <span class="hljs-subst">&#123;x&#125;</span>&quot;</span>))                            <span class="hljs-comment"># 11</span><br><br>    res = page.evaluate(<span class="hljs-string">&quot;() =&gt; &#x27;Hello World!&#x27;&quot;</span>, )               <span class="hljs-comment"># æ‰§è¡Œä¸€ä¸ªå‡½æ•°</span><br>    <span class="hljs-built_in">print</span>(res)                                                  <span class="hljs-comment"># Hello World!</span><br>    res = page.evaluate(<br>        <span class="hljs-string">&quot;([a, b]) =&gt; a+b+&#x27;World!&#x27;&quot;</span>, [<span class="hljs-string">&quot;Hello&quot;</span>, <span class="hljs-string">&quot; &quot;</span>]              <span class="hljs-comment"># æ‰§è¡Œçš„å‡½æ•°å¯ä»¥å¸¦å‚æ•°</span><br>    )<br>    <span class="hljs-built_in">print</span>(res)                                                  <span class="hljs-comment"># hello world</span><br><br>    page.goto(<span class="hljs-string">&quot;https://www.baidu.com/&quot;</span>)<br>    title = page.evaluate(<span class="hljs-string">&quot;document.title&quot;</span>)                     <span class="hljs-comment"># è·å–é¡µé¢çš„title</span><br>    <span class="hljs-built_in">print</span>(title)<br><br>    page = browser.new_page()                                   <span class="hljs-comment"># éœ€è¦å¼€å¯JForumè®ºå›æœåŠ¡</span><br>    page.goto(<span class="hljs-string">&quot;http://127.0.0.1:8080/jforum-2.7.0/user/login.page&quot;</span>)<br>    js = <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        document.querySelector(&quot;input[name=&#x27;username&#x27;]&quot;).value=&quot;admin&quot;;</span><br><span class="hljs-string">        document.querySelector(&quot;input[name=&#x27;password&#x27;]&quot;).value=&quot;123456&quot;;</span><br><span class="hljs-string">        document.querySelector(&quot;input[name=&#x27;login&#x27;]&quot;).click();</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>    page.evaluate(js)<br><br>    a_handle = page.evaluate_handle(<span class="hljs-string">&quot;document.body&quot;</span>)            <span class="hljs-comment"># è¿”å›å¥æŸ„JSHandleï¼ŒæŠ¥é”™äº†ï¼Ÿï¼Ÿï¼Ÿ</span><br>    result_handle = page.evaluate_handle(<span class="hljs-string">&quot;body =&gt; body.innerHTML&quot;</span>, a_handle)<br>    <span class="hljs-built_in">print</span>(result_handle.json_value())<br>    result_handle.dispose()                                     <span class="hljs-comment"># é‡Šæ”¾result_handleå¯¹è±¡ï¼Œé¿å…å†…å­˜æ³„æ¼</span><br><br>    browser.close()                                             <span class="hljs-comment"># å…³é—­æµè§ˆå™¨å¯¹è±¡</span><br></code></pre></td></tr></table></figure>



<h2 id="7-2-å…ƒç´ Js"><a href="#7-2-å…ƒç´ Js" class="headerlink" title="7-2 å…ƒç´ Js"></a>7-2 å…ƒç´ Js</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> playwright.sync_api <span class="hljs-keyword">import</span> sync_playwright<br><br><span class="hljs-keyword">with</span> sync_playwright() <span class="hljs-keyword">as</span> p:<br>    browser = p.chromium.launch(headless=<span class="hljs-literal">False</span>, slow_mo=<span class="hljs-number">1000</span>)<br>    page = browser.new_page()<br>    page.goto(<span class="hljs-string">&quot;http://127.0.0.1:8080/jforum-2.7.0/user/login.page&quot;</span>)<br>    username = page.locator(<br>        <span class="hljs-string">&quot;//*[@id=&#x27;loginform&#x27;]/table[2]/tbody/tr[2]/td/table/tbody/tr[2]/td[2]/input&quot;</span><br>    )<br>    username.evaluate(<span class="hljs-string">&quot;node =&gt; node.value=&#x27;admin&#x27;&quot;</span>)             <span class="hljs-comment"># è¾“å…¥æ¡†è¾“å…¥å†…å®¹</span><br>    input_value = username.evaluate(<span class="hljs-string">&quot;node =&gt; node.value&quot;</span>)<br>    <span class="hljs-built_in">print</span>(input_value)                                          <span class="hljs-comment"># è·å–è¾“å…¥æ¡†å†…å®¹</span><br><br>    page.goto(<span class="hljs-string">&quot;https://www.baidu.com/&quot;</span>)<br>    links = page.locator(<span class="hljs-string">&quot;#s-top-left&gt;a&quot;</span>)<br>    res = links.evaluate_all(<span class="hljs-string">&quot;nodes =&gt; nodes.length&quot;</span>)           <span class="hljs-comment"># å®šä½å…¨éƒ¨å…ƒç´ </span><br>    <span class="hljs-built_in">print</span>(res)                                                  <span class="hljs-comment"># nodes.lengthè·å–å…ƒç´ ä¸ªæ•°</span><br><br>    browser.close()                                             <span class="hljs-comment"># å…³é—­æµè§ˆå™¨å¯¹è±¡</span><br></code></pre></td></tr></table></figure>



<h1 id="8-Pyinstalleræ‰“åŒ…"><a href="#8-Pyinstalleræ‰“åŒ…" class="headerlink" title="8 Pyinstalleræ‰“åŒ…"></a>8 Pyinstalleræ‰“åŒ…</h1><ul>
<li>Pyinstalleræ‰“åŒ…<ul>
<li>Playwrightä¸Pyinstallerä¸‰æ–¹æ’ä»¶ç»“åˆä½¿ç”¨ï¼Œå¯ç”¨æ¥åˆ›å»ºç‹¬ç«‹çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚</li>
<li>ä¾‹å¦‚ï¼šè¦æ‰“åŒ…ä¸€ä¸ªfiles_pack.pyæ–‡ä»¶ã€‚<ul>
<li>å…ˆåœ¨å½“å‰æ–‡ä»¶å¤¹ä¸­è®¾ç½®ç¯å¢ƒå˜é‡ï¼š<code>set PLAYWRIGHT_BROWSERS_PATH=0</code>ã€‚</li>
<li>ç„¶åå‘½ä»¤å®‰è£…æ–‡ä»¶ä¸­ä½¿ç”¨åˆ°çš„æµè§ˆå™¨ï¼š<code>playwright install chromium</code>ã€‚</li>
<li>æœ€åä½¿ç”¨å‘½ä»¤æŸ¥çœ‹æµè§ˆå™¨çš„å®‰è£…è·¯å¾„ï¼š<code>playwright install --dry-run</code>ã€‚</li>
<li>å¯ä»¥çœ‹åˆ°chromium-1048å’Œffmpeg-1008è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œåç¼€æ•°å­—æ˜¯ç‰ˆæœ¬å·ã€‚</li>
</ul>
</li>
<li>æ‰“åŒ…files_pack.pyæ–‡ä»¶å‘½ä»¤å¦‚ä¸‹ï¼Œæ‰“åŒ…åçš„å¯æ‰§è¡Œæ–‡ä»¶å¯åœ¨å½“å‰ç›®å½•çš„distæ–‡ä»¶å¤¹ä¸­æ‰¾åˆ°ã€‚<ul>
<li>ä¾èµ–æ–‡ä»¶è¾ƒå¤šï¼Œé¦–æ¬¡æ‰“åŒ…éœ€åŠ è½½å¥½ä¸€ä¼šï¼š<code>pyinstaller -F files_pack.py</code>ã€‚</li>
<li>æ‰“åŒ…æ—¶è‡ªå®šä¹‰icoå›¾æ ‡ï¼š<code>pyinstaller -F files_pack.py -i favicon.ico</code>ã€‚</li>
<li>icoå›¾æ ‡åˆ¶ä½œå¯ä»¥ä½¿ç”¨åœ°å€â€œ<a target="_blank" rel="noopener" href="https://www.bitbug.net/">åœ¨çº¿åˆ¶ä½œicoå›¾æ ‡</a>â€ï¼Œæä¾›å›¾ç‰‡çº¿ä¸Šè½¬æ¢å³å¯ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="8-1-files-pack-py"><a href="#8-1-files-pack-py" class="headerlink" title="8-1 files_pack.py"></a>8-1 files_pack.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> playwright.sync_api <span class="hljs-keyword">import</span> sync_playwright                  <span class="hljs-comment"># files_pack.py</span><br><br><span class="hljs-keyword">with</span> sync_playwright() <span class="hljs-keyword">as</span> p:<br>    browser = p.chromium.launch(headless=<span class="hljs-literal">False</span>, slow_mo=<span class="hljs-number">1000</span>)<br>    page = browser.new_page()<br>    page.goto(<span class="hljs-string">&quot;http://www.baidu.com&quot;</span>)<br>    page.screenshot(path=<span class="hljs-string">&quot;pictures/install.png&quot;</span>)<br>    browser.close()                                              <span class="hljs-comment"># å…³é—­æµè§ˆå™¨å¯¹è±¡</span><br></code></pre></td></tr></table></figure>



<h2 id="8-2-ä¾èµ–ç¯å¢ƒé…ç½®"><a href="#8-2-ä¾èµ–ç¯å¢ƒé…ç½®" class="headerlink" title="8-2 ä¾èµ–ç¯å¢ƒé…ç½®"></a>8-2 ä¾èµ–ç¯å¢ƒé…ç½®</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs Powershell">(base) D:\Program\...&gt; <span class="hljs-built_in">set</span> PLAYWRIGHT_BROWSERS_PATH=<span class="hljs-number">0</span><br>(base) D:\Program\...&gt; playwright install chromium<br>(base) D:\Program\...&gt; playwright install <span class="hljs-literal">--dry-run</span><br>browser: chromium version <span class="hljs-number">111.0</span>.<span class="hljs-number">5563.19</span><br>  Install location:    C:\Users\...\chromium<span class="hljs-literal">-1048</span><br>  Download url:        https://playwright.azureedge.net/builds/chromium/<span class="hljs-number">1048</span>/chromium<span class="hljs-literal">-win64</span>.zip<br>  Download fallback <span class="hljs-number">1</span>: https://playwright<span class="hljs-literal">-akamai</span>.azureedge.net/builds/chromium/<span class="hljs-number">1048</span>/chromium<span class="hljs-literal">-win64</span>.zip<br>  Download fallback <span class="hljs-number">2</span>: https://playwright<span class="hljs-literal">-verizon</span>.azureedge.net/builds/chromium/<span class="hljs-number">1048</span>/chromium<span class="hljs-literal">-win64</span>.zip<br><br>browser: firefox version <span class="hljs-number">109.0</span><br>  Install location:    C:\Users\...\firefox<span class="hljs-literal">-1378</span><br>  Download url:        https://playwright.azureedge.net/builds/firefox/<span class="hljs-number">1378</span>/firefox<span class="hljs-literal">-win64</span>.zip<br>  Download fallback <span class="hljs-number">1</span>: https://playwright<span class="hljs-literal">-akamai</span>.azureedge.net/builds/firefox/<span class="hljs-number">1378</span>/firefox<span class="hljs-literal">-win64</span>.zip<br>  Download fallback <span class="hljs-number">2</span>: https://playwright<span class="hljs-literal">-verizon</span>.azureedge.net/builds/firefox/<span class="hljs-number">1378</span>/firefox<span class="hljs-literal">-win64</span>.zip<br><br>browser: webkit version <span class="hljs-number">16.4</span><br>  Install location:    C:\Users\...\webkit<span class="hljs-literal">-1792</span><br>  Download url:        https://playwright.azureedge.net/builds/webkit/<span class="hljs-number">1792</span>/webkit<span class="hljs-literal">-win64</span>.zip<br>  Download fallback <span class="hljs-number">1</span>: https://playwright<span class="hljs-literal">-akamai</span>.azureedge.net/builds/webkit/<span class="hljs-number">1792</span>/webkit<span class="hljs-literal">-win64</span>.zip<br>  Download fallback <span class="hljs-number">2</span>: https://playwright<span class="hljs-literal">-verizon</span>.azureedge.net/builds/webkit/<span class="hljs-number">1792</span>/webkit<span class="hljs-literal">-win64</span>.zip<br><br>browser: ffmpeg<br>  Install location:    C:\Users\...\ffmpeg<span class="hljs-literal">-1008</span><br>  Download url:        https://playwright.azureedge.net/builds/ffmpeg/<span class="hljs-number">1008</span>/ffmpeg<span class="hljs-literal">-win64</span>.zip<br>  Download fallback <span class="hljs-number">1</span>: https://playwright<span class="hljs-literal">-akamai</span>.azureedge.net/builds/ffmpeg/<span class="hljs-number">1008</span>/ffmpeg<span class="hljs-literal">-win64</span>.zip<br>  Download fallback <span class="hljs-number">2</span>: https://playwright<span class="hljs-literal">-verizon</span>.azureedge.net/builds/ffmpeg/<span class="hljs-number">1008</span>/ffmpeg<span class="hljs-literal">-win64</span>.zip<br><br>(base) D:\Program\...&gt; pyinstaller <span class="hljs-operator">-F</span> files_pack.py<br>(base) D:\Program\...&gt; pyinstaller <span class="hljs-operator">-F</span> files_pack.py <span class="hljs-literal">-i</span> pictures/favicon.ico<br></code></pre></td></tr></table></figure>



<h2 id="8-3-æ‰“åŒ…è·¯å¾„é—®é¢˜"><a href="#8-3-æ‰“åŒ…è·¯å¾„é—®é¢˜" class="headerlink" title="8-3 æ‰“åŒ…è·¯å¾„é—®é¢˜*"></a>8-3 æ‰“åŒ…è·¯å¾„é—®é¢˜*</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs Powershell">Traceback (most recent call last):<br>  File <span class="hljs-string">&quot;files_pack.py&quot;</span>, line <span class="hljs-number">4</span>, <span class="hljs-keyword">in</span> &lt;module&gt;<br>  File <span class="hljs-string">&quot;playwright\sync_api\_generated.py&quot;</span>, line <span class="hljs-number">14155</span>, <span class="hljs-keyword">in</span> launch<br>  File <span class="hljs-string">&quot;playwright\_impl\_sync_base.py&quot;</span>, line <span class="hljs-number">115</span>, <span class="hljs-keyword">in</span> _sync<br>  File <span class="hljs-string">&quot;playwright\_impl\_browser_type.py&quot;</span>, line <span class="hljs-number">94</span>, <span class="hljs-keyword">in</span> launch<br>  File <span class="hljs-string">&quot;playwright\_impl\_connection.py&quot;</span>, line <span class="hljs-number">59</span>, <span class="hljs-keyword">in</span> send<br>  File <span class="hljs-string">&quot;playwright\_impl\_connection.py&quot;</span>, line <span class="hljs-number">514</span>, <span class="hljs-keyword">in</span> wrap_api_call<br>playwright._impl._errors.Error: BrowserType.launch: Executable doesn<span class="hljs-string">&#x27;t exist at </span><br><span class="hljs-string">C:\Users\...\playwright\driver\package\.local-browsers\chromium-1048\chrome-win\chrome.exe</span><br><span class="hljs-string">â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—</span><br><span class="hljs-string">â•‘ Looks like Playwright was just installed or updated.       â•‘</span><br><span class="hljs-string">â•‘ Please run the following command to download new browsers: â•‘</span><br><span class="hljs-string">â•‘                                                            â•‘</span><br><span class="hljs-string">â•‘     playwright install                                     â•‘</span><br><span class="hljs-string">â•‘                                                            â•‘</span><br><span class="hljs-string">â•‘ &lt;3 Playwright Team                                         â•‘</span><br><span class="hljs-string">â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span><br><span class="hljs-string">[9672] Failed to execute script &#x27;</span>files_pack<span class="hljs-string">&#x27; due to unhandled exception!</span><br></code></pre></td></tr></table></figure>

<ul>
<li>è¯´æ˜Playwrightæµè§ˆå™¨é©±åŠ¨æ²¡æœ‰è¢«æ­£ç¡®æ‰“åŒ…åˆ°exeæ–‡ä»¶ä¸­ã€‚<ul>
<li>ã€æ–¹æ³•ä¸€ã€‘æ‰‹åŠ¨æ·»åŠ æµè§ˆå™¨é©±åŠ¨åˆ°æ‰“åŒ…ç›®å½•ï¼šæ‰§è¡Œä»ç„¶æŠ¥åŒä¸ªé”™è¯¯ï¼Œä¸çŸ¥é“å‚æ•°è®¾ç½®æ˜¯å¦æœ‰é—®é¢˜ï¼Ÿ</li>
<li><code>pyinstaller --add-data=&quot;C:\Users\...\chromium-1048;playwright/driver&quot; files_pack.py</code></li>
<li>ã€æ–¹æ³•äºŒã€‘ä½¿ç”¨<code>--hidden-import</code>å‚æ•°ï¼ŒæŒ‡å®šéœ€è¦æ‰“åŒ…çš„éšè—æ¨¡å—ï¼Œå°†å…¶å¼ºåˆ¶æ‰“åŒ…åˆ°<code>exe</code>æ–‡ä»¶ä¸­ã€‚</li>
<li><code>pyinstaller --hidden-import=playwright._impl._browser_type files_pack.py</code>ï¼šæ‰§è¡Œä¼šé—ªé€€ã€‚</li>
<li>ã€æ–¹æ³•ä¸‰ã€‘ä½¿ç”¨<code>--onefile</code>å‚æ•°ï¼Œå°†æ‰€æœ‰çš„æ–‡ä»¶éƒ½æ‰“åŒ…åˆ°å¯æ‰§è¡Œæ–‡ä»¶<code>exe</code>ä¸­ï¼Œå°±å¯é¿å…è·¯å¾„é—®é¢˜äº†ã€‚</li>
<li><code>pyinstaller --onefile files_pack.py</code>ï¼š<code>exe</code>æ–‡ä»¶æ‰§è¡Œè¿˜æ˜¯ä¼šæŠ¥é”™ã€‚</li>
<li>ã€æ–¹æ³•å››ã€‘ä»£ç ä¸­ä½¿ç”¨Playwrightçš„<code>install()</code>å‡½æ•°æ¥å®‰è£…æµè§ˆå™¨é©±åŠ¨ã€‚</li>
<li>ä¸çŸ¥é“æ˜¯å¦ç¯å¢ƒé—®é¢˜ï¼Œåœ¨å…¶ä»–ç”µè„‘ä¸Šæ‰“åŒ…åï¼Œå¯æ‰§è¡Œæ–‡ä»¶èƒ½æˆåŠŸè¢«æ‰§è¡Œã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> playwright.sync_api <span class="hljs-keyword">import</span> sync_playwright                  <span class="hljs-comment"># files_pack.py</span><br><br><span class="hljs-keyword">with</span> sync_playwright() <span class="hljs-keyword">as</span> p:<br>    p.install()                                                  <span class="hljs-comment"># å®‰è£…æµè§ˆå™¨é©±åŠ¨</span><br>    browser = p.chromium.launch(headless=<span class="hljs-literal">False</span>, slow_mo=<span class="hljs-number">1000</span>)<br>    page = browser.new_page()<br>    page.goto(<span class="hljs-string">&quot;http://www.baidu.com&quot;</span>)<br>    page.screenshot(path=<span class="hljs-string">&quot;pictures/install.png&quot;</span>)<br>    browser.close()                                              <span class="hljs-comment"># å…³é—­æµè§ˆå™¨å¯¹è±¡</span><br></code></pre></td></tr></table></figure>



              
            </div>
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6/" class="category-chain-item">æµ‹è¯•æ¡†æ¶</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Python/">#Python</a>
      
        <a href="/tags/PlayWright/">#PlayWright</a>
      
        <a href="/tags/POM%E6%A8%A1%E5%BC%8F/">#POMæ¨¡å¼</a>
      
        <a href="/tags/Mock%E6%8E%A5%E5%8F%A3/">#Mockæ¥å£</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>PlayWright æ¡†æ¶(äºŒ)</div>
      <div>https://stitch-top.github.io/2023/11/02/ce-shi-kuang-jia/tf05-playwright/tf02-playwright-kuang-jia-er/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>ä½œè€…</div>
          <div>Dr.626</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>å‘å¸ƒäº</div>
          <div>2023å¹´11æœˆ2æ—¥ 21:10:10</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>è®¸å¯åè®®</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - ç½²å">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
              <a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
              <span class="hint--top hint--rounded" aria-label="NC - éå•†ä¸šæ€§ä½¿ç”¨">
                <i class="iconfont icon-nc"></i>
              </span>
              </a>
            
              <a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
              <span class="hint--top hint--rounded" aria-label="SA - ç›¸åŒæ–¹å¼å…±äº«">
                <i class="iconfont icon-sa"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2024/01/11/ce-shi-gong-ju/tt07-ffmpeg-de-ying-yong/tt01-ffmpeg-ming-ling-xiang-jie/" title="FFmpeg å‘½ä»¤è¯¦è§£">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">FFmpeg å‘½ä»¤è¯¦è§£</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2023/09/09/ce-shi-kuang-jia/tf05-playwright/tf01-playwright-kuang-jia-yi/" title="PlayWright æ¡†æ¶(ä¸€)">
                        <span class="hidden-mobile">PlayWright æ¡†æ¶(ä¸€)</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  <article id="comments">
    
  <div id="valine"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#valine', function() {
      Fluid.utils.createScript('https://cdn.staticfile.org/valine/1.5.1/Valine.min.js', function() {
        var options = Object.assign(
          {"appId":"PDfaLoft9OAolB0AmON5AqUb-gzGzoHsz","appKey":"xq13nodBzh8hOliBusHUKDwj","path":"window.location.pathname","placeholder":"èµ äººç«ç‘°ï¼Œæ‰‹ç•™ä½™é¦™(ï½oï¿£3ï¿£)ï½","avatar":"monsterid","meta":["nick","mail","link"],"requiredFields":["nick","mail"],"pageSize":13,"lang":"zh-CN","highlight":"ture","recordIP":"ture","serverURLs":"","emojiCDN":null,"emojiMaps":null,"enableQQ":"ture"},
          {
            el: "#valine",
            path: window.location.pathname
          }
        )
        new Valine(options);
        Fluid.utils.waitElementVisible('#valine .vcontent', () => {
          var imgSelector = '#valine .vcontent img:not(.vemoji)';
          Fluid.plugins.imageCaption(imgSelector);
          Fluid.plugins.fancyBox(imgSelector);
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


  </article>


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar category-bar" style="margin-left: -1rem">
    





<div class="category-list">
  
  
    
    
    
    <div class="category row nomargin-x">
      <a class="category-item 
          list-group-item category-item-action col-10 col-md-11 col-xm-11" title="æµ‹è¯•æ¡†æ¶"
        id="heading-893b664e5ce5fe8882ce6ce630f2f650" role="tab" data-toggle="collapse" href="#collapse-893b664e5ce5fe8882ce6ce630f2f650"
        aria-expanded="true"
      >
        æµ‹è¯•æ¡†æ¶
        <span class="list-group-count">(8)</span>
        <i class="iconfont icon-arrowright"></i>
      </a>
      
      <div class="category-collapse collapse show" id="collapse-893b664e5ce5fe8882ce6ce630f2f650"
           role="tabpanel" aria-labelledby="heading-893b664e5ce5fe8882ce6ce630f2f650">
        
        
          
  <div class="category-post-list">
    
    
      
      
        <a href="/2023/01/08/ce-shi-kuang-jia/tf01-selenium/tf01-selenium/" title="Selenium"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Selenium</span>
        </a>
      
    
      
      
        <a href="/2023/03/03/ce-shi-kuang-jia/tf02-pytest/tf01-pytest-ce-shi-kuang-jia/" title="Pytest æµ‹è¯•æ¡†æ¶"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Pytest æµ‹è¯•æ¡†æ¶</span>
        </a>
      
    
      
      
        <a href="/2023/05/01/ce-shi-kuang-jia/tf03-allure/tf01-allure-ce-shi-bao-gao/" title="Allure æµ‹è¯•æŠ¥å‘Š"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Allure æµ‹è¯•æŠ¥å‘Š</span>
        </a>
      
    
      
      
        <a href="/2023/07/23/ce-shi-kuang-jia/tf04-unittest/tf01-unittest-ce-shi-kuang-jia/" title="UnitTest æµ‹è¯•æ¡†æ¶"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">UnitTest æµ‹è¯•æ¡†æ¶</span>
        </a>
      
    
      
      
        <a href="/2024/03/02/ce-shi-kuang-jia/tf04-unittest/tf02-unittest-zi-bao-mock/" title="UnitTest å­åŒ… Mock"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">UnitTest å­åŒ… Mock</span>
        </a>
      
    
      
      
        <a href="/2023/09/09/ce-shi-kuang-jia/tf05-playwright/tf01-playwright-kuang-jia-yi/" title="PlayWright æ¡†æ¶(ä¸€)"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">PlayWright æ¡†æ¶(ä¸€)</span>
        </a>
      
    
      
      
        <a href="/2023/11/02/ce-shi-kuang-jia/tf05-playwright/tf02-playwright-kuang-jia-er/" title="PlayWright æ¡†æ¶(äºŒ)"
           class="list-group-item list-group-item-action
           active">
          <span class="category-post">PlayWright æ¡†æ¶(äºŒ)</span>
        </a>
      
    
      
      
        <a href="/2024/07/16/ce-shi-kuang-jia/tf06-robot-framework/tf01-robot-framework/" title="Robot Framework"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Robot Framework</span>
        </a>
      
    
  </div>

        
      </div>
    </div>
  
</div>


  </aside>


    </div>
  </div>
</div>





  



  



  



  



  






    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a><span>Copyright Â© 2021 - 2025</span></a> <i class="iconfont icon-love"></i> <a href="https://stitch-top.github.io" target="_blank" rel="nofollow noopener"><span>Dr.626</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="leancloud-site-pv-container" style="display: none">
        ğŸ“ˆ æ€»è®¿é—®é‡ 
        <span id="leancloud-site-pv"></span>
         æ¬¡
      </span>
    
    
      <span id="leancloud-site-uv-container" style="display: none">
        ğŸ“Š æ€»è®¿å®¢æ•° 
        <span id="leancloud-site-uv"></span>
         äºº
      </span>
    
    

  
</div>

  
  
  
  
  <!-- æ·»åŠ ç½‘ç«™è¿è¡Œæ—¶é—´ -->
  <div class="footer-content">
    <div>
      <span id="timeDate">è½½å…¥å¤©æ•°...</span>
      <span id="times">è½½å…¥æ—¶åˆ†ç§’...</span>
      <script>
      var now = new Date();
      function createtime(){
          var grt= new Date("01/01/2021 00:00:00");   //æ­¤å¤„ä¿®æ”¹ä½ çš„å»ºç«™æ—¶é—´æˆ–è€…ç½‘ç«™ä¸Šçº¿æ—¶é—´
          now.setTime(now.getTime()+250);
          days = (now - grt ) / 1000 / 60 / 60 / 24;
          dnum = Math.floor(days);
          hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum);
          hnum = Math.floor(hours);
          if(String(hnum).length ==1 ){
              hnum = "0" + hnum;
          }
          minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
          mnum = Math.floor(minutes);
          if(String(mnum).length ==1 ){
                    mnum = "0" + mnum;
          }
          seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
          snum = Math.round(seconds);
          if(String(snum).length ==1 ){
                    snum = "0" + snum;
          }
          document.getElementById("timeDate").innerHTML = "æœ¬ç«™å·²å®‰å…¨è¿è¡Œ&nbsp"+dnum+"&nbspå¤©";
          document.getElementById("times").innerHTML = hnum + "&nbspå°æ—¶&nbsp" + mnum + "&nbspåˆ†&nbsp" + snum + "&nbspç§’";
      }
      setInterval("createtime()", 250);
      </script>
    </div>
  </div>
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.staticfile.org/jquery/3.7.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  

  

  

  

  

  

  
    
  




  
    
      <script  src="/js/img-lazyload.js" ></script>
    
  




  
<script>
  Fluid.utils.createScript('https://cdn.staticfile.org/tocbot/4.21.0/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script>
  (function() {
    var enableLang = CONFIG.code_language.enable && CONFIG.code_language.default;
    var enableCopy = CONFIG.copy_btn;
    if (!enableLang && !enableCopy) {
      return;
    }

    function getBgClass(ele) {
      return Fluid.utils.getBackgroundLightness(ele) >= 0 ? 'code-widget-light' : 'code-widget-dark';
    }

    var copyTmpl = '';
    copyTmpl += '<div class="code-widget">';
    copyTmpl += 'LANG';
    copyTmpl += '</div>';
    jQuery('.markdown-body pre').each(function() {
      var $pre = jQuery(this);
      if ($pre.find('code.mermaid').length > 0) {
        return;
      }
      if ($pre.find('span.line').length > 0) {
        return;
      }

      var lang = '';

      if (enableLang) {
        lang = CONFIG.code_language.default;
        if ($pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2 && $pre.children().hasClass('hljs')) {
          lang = $pre[0].children[0].classList[1];
        } else if ($pre[0].getAttribute('data-language')) {
          lang = $pre[0].getAttribute('data-language');
        } else if ($pre.parent().hasClass('sourceCode') && $pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2) {
          lang = $pre[0].children[0].classList[1];
          $pre.parent().addClass('code-wrapper');
        } else if ($pre.parent().hasClass('markdown-body') && $pre[0].classList.length === 0) {
          $pre.wrap('<div class="code-wrapper"></div>');
        }
        lang = lang.toUpperCase().replace('NONE', CONFIG.code_language.default);
      }
      $pre.append(copyTmpl.replace('LANG', lang).replace('code-widget">',
        getBgClass($pre[0]) + (enableCopy ? ' code-widget copy-btn" data-clipboard-snippet><i class="iconfont icon-copy"></i>' : ' code-widget">')));

      if (enableCopy) {
        Fluid.utils.createScript('https://cdn.staticfile.org/clipboard.js/2.0.11/clipboard.min.js', function() {
          var clipboard = new window.ClipboardJS('.copy-btn', {
            target: function(trigger) {
              var nodes = trigger.parentNode.childNodes;
              for (var i = 0; i < nodes.length; i++) {
                if (nodes[i].tagName === 'CODE') {
                  return nodes[i];
                }
              }
            }
          });
          clipboard.on('success', function(e) {
            e.clearSelection();
            e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-copy', 'icon-success');
            setTimeout(function() {
              e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-success', 'icon-copy');
            }, 2000);
          });
        });
      }
    });
  })();
</script>


  
<script>
  Fluid.utils.createScript('https://cdn.staticfile.org/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="/js/leancloud.js" ></script>





<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ï¼Œå°†å®ƒä¿æŒåœ¨æœ€åº•éƒ¨ -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">åšå®¢åœ¨å…è®¸ JavaScript è¿è¡Œçš„ç¯å¢ƒä¸‹æµè§ˆæ•ˆæœæ›´ä½³</div>
  </noscript>
</body>
</html>
