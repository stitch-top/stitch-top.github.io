

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/logo.png">
  <link rel="icon" href="/img/logo.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Dr.626">
  <meta name="keywords" content="">
  
    <meta name="description" content="ğŸ° ä¸€æ¬¾Pythonè‡ªå¸¦çš„å•å…ƒæµ‹è¯•æ¡†æ¶ï¼Œé€‚ç”¨äºå•å…ƒæµ‹è¯•ï¼Œè¿˜å¯ç”¨äºWebã€Appiumã€æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹çš„å¼€å‘ä¸æ‰§è¡Œç­‰ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="UnitTest æµ‹è¯•æ¡†æ¶">
<meta property="og:url" content="https://stitch-top.github.io/2023/07/23/ce-shi-kuang-jia/tf04-unittest/tf01-unittest-ce-shi-kuang-jia/index.html">
<meta property="og:site_name" content="Dr.626">
<meta property="og:description" content="ğŸ° ä¸€æ¬¾Pythonè‡ªå¸¦çš„å•å…ƒæµ‹è¯•æ¡†æ¶ï¼Œé€‚ç”¨äºå•å…ƒæµ‹è¯•ï¼Œè¿˜å¯ç”¨äºWebã€Appiumã€æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹çš„å¼€å‘ä¸æ‰§è¡Œç­‰ã€‚">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://stitch-top.github.io/img/ThemeMap/9314065418.jpg">
<meta property="article:published_time" content="2023-07-23T13:11:00.000Z">
<meta property="article:modified_time" content="2024-07-19T08:55:19.869Z">
<meta property="article:author" content="Dr.626">
<meta property="article:tag" content="Python">
<meta property="article:tag" content="UnitTest">
<meta property="article:tag" content="å•å…ƒæµ‹è¯•">
<meta property="article:tag" content="æµ‹è¯•å¥—ä»¶">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://stitch-top.github.io/img/ThemeMap/9314065418.jpg">
  
  
  
  <title>UnitTest æµ‹è¯•æ¡†æ¶ - Dr.626</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  



  
<link rel="stylesheet" href="/css/my.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"stitch-top.github.io","root":"/","version":"1.9.0","typing":{"enable":true,"typeSpeed":70,"cursorChar":"|","loop":true,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":"âœ"},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"left","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":1},"lazyload":{"enable":true,"loading_img":"/img/load.gif","onlypost":true,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":"Jg3BjUa3RtnEFSREy3wsmUR5-MdYXbMMI","app_key":"DwsEb5BeMxwdz0CEJ6MUBdu3","server_url":null,"path":"window.location.pathname","ignore_local":true}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>

  
  
<meta name="generator" content="Hexo 6.2.0"></head>


<body>
  
  

  <header>
    

<div class="header-inner" style="height: 100vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Dr.626</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                é¦–é¡µ
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                å½’æ¡£
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                åˆ†ç±»
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                æ ‡ç­¾
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                å…³äº
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                å‹é“¾
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button"
                 data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="iconfont icon-code"></i>
                å®éªŒå®¤
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                  
                  
                  
                  <a class="dropdown-item" href="/tagsnet">
                    <i class="iconfont icon-bookmark"></i>
                    æ–‡ç« å…³ç³»ç½‘
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/laboratory/plugin">
                    <i class="iconfont icon-bug"></i>
                    Hexoå°ç»„ä»¶
                  </a>
                
              </div>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/back-1.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="UnitTest æµ‹è¯•æ¡†æ¶"></span>
          
        </div>

        
          
  <div class="mt-3">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-author" aria-hidden="true"></i>
        Dr.626
      </span>
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-07-23 21:11" pubdate>
          2023å¹´7æœˆ23æ—¥ 21:11:00
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          39k å­—
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          325 åˆ†é’Ÿ
        
      </span>
    

    
    
      
        <span id="leancloud-page-views-container" class="post-meta" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="leancloud-page-views"></span> æ¬¡
        </span>
        
      
    
  </div>


        
      </div>

      
        <div class="scroll-down-bar">
          <i class="iconfont icon-arrowdown"></i>
        </div>
      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
  
  <!-- åŠ¨æ€çº¿æ¡èƒŒæ™¯
  <script type="text/javascript"
  color="0 0 255" opacity='1' zIndex="-2" count="200" src="../js/canvas-nest.js">
  </script> -->
  
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="padding-left: 2rem; margin-right: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;ç›®å½•</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">UnitTest æµ‹è¯•æ¡†æ¶</h1>
            
            <div class="markdown-body">
              
              <p>ğŸ° ä¸€æ¬¾Pythonè‡ªå¸¦çš„å•å…ƒæµ‹è¯•æ¡†æ¶ï¼Œé€‚ç”¨äºå•å…ƒæµ‹è¯•ï¼Œè¿˜å¯ç”¨äºWebã€Appiumã€æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹çš„å¼€å‘ä¸æ‰§è¡Œç­‰ã€‚</p>
<span id="more"></span>



<h1 id="1-æ¡†æ¶æ ¸å¿ƒ"><a href="#1-æ¡†æ¶æ ¸å¿ƒ" class="headerlink" title="1 æ¡†æ¶æ ¸å¿ƒ"></a>1 æ¡†æ¶æ ¸å¿ƒ</h1><ul>
<li>æ¡†æ¶æ ¸å¿ƒ<ul>
<li>TestCaseï¼šæµ‹è¯•ç”¨ä¾‹ã€‚<ul>
<li>ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹å°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„æµ‹è¯•å•å…ƒï¼Œé€šè¿‡è¿è¡Œè¿™ä¸ªæµ‹è¯•å•å…ƒï¼Œå¯ä»¥å¯¹æŸä¸€ä¸ªé—®é¢˜è¿›è¡ŒéªŒè¯ã€‚</li>
<li>åŒ…æ‹¬æµ‹è¯•å‰å‡†å¤‡ç¯å¢ƒçš„æ­å»º(setUp)ï¼Œæ‰§è¡Œæµ‹è¯•ä»£ç (run)ï¼Œä»¥åŠæµ‹è¯•åç¯å¢ƒçš„é”€æ¯(tearDown)ã€‚</li>
</ul>
</li>
<li>TestSuiteï¼šæµ‹è¯•å¥—ä»¶ï¼Œå³å¤šä¸ªæµ‹è¯•ç”¨ä¾‹é›†åˆåœ¨ä¸€èµ·ï¼ŒTestSuiteå¯ä»¥åµŒå¥—TestSuiteã€‚</li>
<li>TextTestRunnerï¼šæ‰§è¡Œæµ‹è¯•ç”¨ä¾‹ï¼ŒåŒ…æ‹¬æ‰§è¡ŒTestSuiteæˆ–TestCaseä¸­çš„æ–¹æ³•ã€‚</li>
<li>TestLoaderï¼šæ‰¹é‡æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹(å¯æœç´¢æŒ‡å®šæ–‡ä»¶å¤¹å†…æŒ‡å®šå­—æ¯å¼€å¤´çš„æ¨¡å—)ã€‚</li>
<li>Fixtureï¼šå›ºå®šè£…ç½®(ä¸¤ä¸ªå›ºå®šå‡½æ•°ï¼Œä¸€ä¸ªåˆå§‹åŒ–æ—¶ä½¿ç”¨ï¼Œä¸€ä¸ªç»“æŸæ—¶ä½¿ç”¨ï¼Œå³æµ‹è¯•ç¯å¢ƒçš„æ­å»ºå’Œé”€æ¯)ã€‚</li>
</ul>
</li>
</ul>
<h2 id="1-1-TestCase"><a href="#1-1-TestCase" class="headerlink" title="1-1 TestCase"></a>1-1 TestCase</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># 1ã€å¯¼åŒ…ï¼Œtest_case_01.py</span><br><span class="hljs-keyword">import</span> unittest<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_method0</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æµ‹è¯•æ–¹æ³•1-0&quot;</span>)<br><br><br><span class="hljs-comment"># 2ã€è‡ªå®šä¹‰æµ‹è¯•ç±»ï¼Œç»§æ‰¿unittest.TestCase</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestCase01</span>(unittest.TestCase):<br>    <span class="hljs-comment"># 3ã€æµ‹è¯•æ–¹æ³•ä»¥test_å¼€å¤´ï¼Œtest_method1å³ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_method1</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æµ‹è¯•æ–¹æ³•1-1&quot;</span>)<br><br>    <span class="hljs-comment"># 4ã€æµ‹è¯•ç”¨ä¾‹çš„æ‰§è¡Œé¡ºåºæ˜¯æŒ‰æ–¹æ³•åçš„ASCIIå€¼è¿›è¡Œæ’åºçš„</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_method2</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æµ‹è¯•æ–¹æ³•1-2&quot;</span>)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    <span class="hljs-comment"># 5ã€æ‰§è¡Œç”¨ä¾‹</span><br>    <span class="hljs-comment"># â‘ è‹¥å…‰æ ‡(é¼ æ ‡)æ”¾åœ¨ç±»åé¢æ‰§è¡Œï¼Œåˆ™æ‰§è¡Œå½“å‰ç±»ä¸‹çš„æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹</span><br>    <span class="hljs-comment"># â‘¡è‹¥å…‰æ ‡(é¼ æ ‡)æ”¾åœ¨æ–¹æ³•åæ‰§è¡Œï¼Œåˆ™æ‰§è¡Œçš„æ˜¯å½“å‰æ–¹æ³•çš„æµ‹è¯•ç”¨ä¾‹</span><br>    <span class="hljs-comment"># â‘¢å‘½ä»¤è¡Œæ¨¡å¼æ‰§è¡Œï¼šverbosityå‚æ•°æ§åˆ¶æµ‹è¯•æ‰§è¡Œçš„è¯¦ç»†ç¨‹åº¦</span><br>    <span class="hljs-comment">#       0(å®‰é™æ¨¡å¼)ï¼šåªæ˜¾ç¤ºæ‰§è¡Œçš„æµ‹è¯•æ€»æ•°å’Œå…¨å±€ç»“æœ</span><br>    <span class="hljs-comment">#       1(é»˜è®¤æ¨¡å¼)ï¼šæ˜¾ç¤ºæ‰§è¡Œçš„æµ‹è¯•æ€»æ•°ï¼ŒæˆåŠŸç‚¹ï¼Œå¤±è´¥Fï¼Œå‡ºé”™Eï¼Œè·³è¿‡S</span><br>    <span class="hljs-comment">#       2(è¯¦ç»†æ¨¡å¼)ï¼šæ˜¾ç¤ºæ¯ä¸ªæµ‹è¯•ç”¨ä¾‹çš„å¸®åŠ©å­—ç¬¦ä¸²å’Œç»“æœ</span><br>    unittest.main(verbosity=<span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure>



<h2 id="1-2-TestSuite"><a href="#1-2-TestSuite" class="headerlink" title="1-2 TestSuite"></a>1-2 TestSuite</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># 1ã€å¯¼åŒ…ï¼Œtest_suite.pyï¼Œtest_case_02.pyã€test_case_03.pyåŒtest_case_01.py</span><br><span class="hljs-keyword">import</span> unittest<br><span class="hljs-keyword">from</span> test_case_01 <span class="hljs-keyword">import</span> TestCase01<br><span class="hljs-keyword">from</span> test_case_02 <span class="hljs-keyword">import</span> TestCase02<br><span class="hljs-keyword">from</span> test_case_03 <span class="hljs-keyword">import</span> TestCase03<br><br><span class="hljs-comment"># 2ã€å®ä¾‹åŒ–å¥—ä»¶å¯¹è±¡</span><br>suite = unittest.TestSuite()<br><br><span class="hljs-comment"># 3ã€ä½¿ç”¨å¥—ä»¶å¯¹è±¡æ·»åŠ æµ‹è¯•ç”¨ä¾‹çš„æ–¹æ³•ï¼šå¥—ä»¶å¯¹è±¡.addTest(unittest.makeSuite(æµ‹è¯•ç±»å))</span><br>suite.addTest(unittest.makeSuite(TestCase01))<br>suite.addTest(unittest.makeSuite(TestCase02))<br>suite.addTest(unittest.makeSuite(TestCase03))<br><br><span class="hljs-comment"># 4ã€å®ä¾‹åŒ–è¿è¡Œå¯¹è±¡</span><br>runner = unittest.TextTestRunner()<br><br><span class="hljs-comment"># 5ã€ä½¿ç”¨è¿è¡Œå¯¹è±¡æ‰§è¡Œå¥—ä»¶å¯¹è±¡ï¼šè¿è¡Œå¯¹è±¡.run(å¥—ä»¶å¯¹è±¡)</span><br>runner.run(suite)<br></code></pre></td></tr></table></figure>



<h2 id="1-3-TestLoader"><a href="#1-3-TestLoader" class="headerlink" title="1-3 TestLoader"></a>1-3 TestLoader</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># 1ã€å¯¼åŒ…ï¼Œtest_loader.py</span><br><span class="hljs-keyword">import</span> unittest<br><br><span class="hljs-comment"># 2ã€å®ä¾‹åŒ–TestLoaderç±»ï¼Œå¹¶ä½¿ç”¨discoveræ–¹æ³•åŠ è½½æµ‹è¯•ç”¨ä¾‹</span><br>suite = unittest.TestLoader().discover(<span class="hljs-string">&quot;./&quot;</span>, <span class="hljs-string">&quot;test_c*.py&quot;</span>)<br><span class="hljs-comment"># ç­‰æ•ˆå†™æ³•ï¼šä½¿ç”¨defaultTestLoaderå±æ€§åŠ è½½æµ‹è¯•ç”¨ä¾‹</span><br><span class="hljs-comment"># suite = unittest.defaultTestLoader.discover(&quot;./&quot;, &quot;test_c*.py&quot;)</span><br><br><span class="hljs-comment"># 3ã€å®ä¾‹åŒ–è¿è¡Œå¯¹è±¡</span><br>runner = unittest.TextTestRunner()<br><br><span class="hljs-comment"># 4ã€ä½¿ç”¨è¿è¡Œå¯¹è±¡æ‰§è¡Œå¥—ä»¶å¯¹è±¡ï¼šè¿è¡Œå¯¹è±¡.run(å¥—ä»¶å¯¹è±¡)</span><br>runner.run(suite)<br></code></pre></td></tr></table></figure>



<h2 id="1-4-åŠ è½½ä¸å¥—ä»¶"><a href="#1-4-åŠ è½½ä¸å¥—ä»¶" class="headerlink" title="1-4 åŠ è½½ä¸å¥—ä»¶"></a>1-4 åŠ è½½ä¸å¥—ä»¶</h2><ul>
<li>åŠ è½½ä¸å¥—ä»¶<ul>
<li>TestLoaderç”¨äºåŠ è½½æµ‹è¯•ç”¨ä¾‹ï¼Œè€ŒTestSuiteç”¨äºç»„ç»‡å’Œç®¡ç†æµ‹è¯•ç”¨ä¾‹ã€‚</li>
<li>åŠ è½½ç”¨ä¾‹æ–¹æ³•<ul>
<li><code>discover(&quot;file_path&quot;, pattern)</code>Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·ä»æŒ‡å®šç›®å½•ä¸­åŠ è½½ç”¨ä¾‹</li>
<li><code>loadTestsFromModule(test_module)</code>Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·æ¨¡å—åŠ è½½å•ä¸ªæµ‹è¯•ç”¨ä¾‹</li>
<li><code>loadTestsFromTestCase(TestCaseClass)</code>Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·TestCaseç±»åŠ è½½å•ä¸ªæµ‹è¯•ç”¨ä¾‹</li>
<li><code>loadTestsFromName(&#39;test_module.TestCaseClass&#39;)</code>Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·ä»å®Œæ•´è·¯å¾„åŠ è½½å•ä¸ªæµ‹è¯•ç”¨ä¾‹</li>
<li><code>loadTestsFromNames([&#39;test_module.TestCaseClass1&#39;, &#39;test_module.TestCaseClass2&#39;])</code>Â·Â·Â·åŠ è½½å¤šä¸ªç”¨ä¾‹</li>
</ul>
</li>
<li>æ·»åŠ ç”¨ä¾‹æ–¹æ³•ï¼šæ·»åŠ å•ä¸ªç”¨ä¾‹å¯ä»¥ä½¿ç”¨<code>suite.addTest()</code>ï¼Œæ·»åŠ å¤šä¸ªç”¨ä¾‹å¯ä»¥ä½¿ç”¨<code>suite.addTests()</code>ã€‚</li>
<li><code>discover()</code>ä¼šè‡ªåŠ¨æ‰«ææŒ‡å®šç›®å½•åŠå…¶å­ç›®å½•ä¸­çš„æµ‹è¯•æ–‡ä»¶ï¼Œé€’å½’åœ°å‘ç°å¹¶åŠ è½½æµ‹è¯•ç”¨ä¾‹ï¼Œæ— éœ€é€ä¸ªæŒ‡å®šã€‚</li>
<li><code>loadTestsFromXXX()</code>éœ€è¦æ˜¾å¼åœ°æŒ‡å®šè¦åŠ è½½çš„æµ‹è¯•ç”¨ä¾‹æˆ–æ¨¡å—ï¼Œé€‚åˆäºæ‰‹åŠ¨æŒ‡å®šåŠ è½½ç‰¹å®šçš„ç”¨ä¾‹æˆ–æ¨¡å—ã€‚</li>
<li><code>makeSuite()</code>é€‚ç”¨äºå·²ç»å®šä¹‰å¥½çš„æµ‹è¯•ç±»ï¼Œè€Œ<code>loadTestsFromXXX()</code>é€‚ç”¨äºéœ€è¦åŠ¨æ€åŠ è½½æµ‹è¯•ç”¨ä¾‹çš„æƒ…å†µã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># 1ã€å¯¼åŒ…ï¼Œtest_difference.py</span><br><span class="hljs-keyword">import</span> unittest<br><br><span class="hljs-comment"># 2ã€åˆ›å»ºä¸€ä¸ªTestSuiteå®ä¾‹</span><br>suite = unittest.TestSuite()<br><br><span class="hljs-comment"># 3ã€åˆ›å»ºä¸€ä¸ªTestLoaderå®ä¾‹</span><br>loader = unittest.TestLoader()<br><br><span class="hljs-comment"># from test_case_01 import TestCase01</span><br><span class="hljs-comment"># from test_case_02 import TestCase02</span><br><span class="hljs-comment"># from test_case_03 import TestCase03</span><br><span class="hljs-comment"># suite.addTest(unittest.makeSuite(TestCase01))</span><br><span class="hljs-comment"># suite.addTest(unittest.makeSuite(TestCase02))</span><br><span class="hljs-comment"># suite.addTest(unittest.makeSuite(TestCase03))</span><br><br><span class="hljs-comment"># 4ã€å°†åŠ è½½çš„æµ‹è¯•ç”¨ä¾‹æ·»åŠ åˆ°TestSuiteä¸­</span><br>suite.addTests(loader.discover(<span class="hljs-string">&quot;./&quot;</span>, pattern=<span class="hljs-string">&quot;test_c*.py&quot;</span>))<br><br><span class="hljs-comment"># import test_case_01</span><br><span class="hljs-comment"># import test_case_02</span><br><span class="hljs-comment"># import test_case_03</span><br><span class="hljs-comment"># suite.addTest(loader.loadTestsFromModule(test_case_01))</span><br><span class="hljs-comment"># suite.addTest(loader.loadTestsFromModule(test_case_02))</span><br><span class="hljs-comment"># suite.addTest(loader.loadTestsFromModule(test_case_03))</span><br><br><span class="hljs-comment"># from test_case_01 import TestCase01</span><br><span class="hljs-comment"># from test_case_02 import TestCase02</span><br><span class="hljs-comment"># from test_case_03 import TestCase03</span><br><span class="hljs-comment"># suite.addTest(loader.loadTestsFromTestCase(TestCase01))</span><br><span class="hljs-comment"># suite.addTest(loader.loadTestsFromTestCase(TestCase02))</span><br><span class="hljs-comment"># suite.addTest(loader.loadTestsFromTestCase(TestCase03))</span><br><br><span class="hljs-comment"># suite.addTest(loader.loadTestsFromName(&quot;test_case_01.TestCase01&quot;))</span><br><span class="hljs-comment"># suite.addTest(loader.loadTestsFromName(&quot;test_case_02.TestCase02&quot;))</span><br><span class="hljs-comment"># suite.addTest(loader.loadTestsFromName(&quot;test_case_03.TestCase03&quot;))</span><br><br><span class="hljs-comment"># suite.addTests(loader.loadTestsFromNames([</span><br><span class="hljs-comment">#     &quot;test_case_01.TestCase01&quot;,</span><br><span class="hljs-comment">#     &quot;test_case_02.TestCase02&quot;,</span><br><span class="hljs-comment">#     &quot;test_case_03.TestCase03&quot;</span><br><span class="hljs-comment"># ]))</span><br><br><span class="hljs-comment"># 5ã€è¿è¡ŒTestSuiteä¸­çš„æµ‹è¯•ç”¨ä¾‹</span><br>unittest.TextTestRunner().run(suite)<br></code></pre></td></tr></table></figure>



<h2 id="1-5-æµ‹è¯•è„šæ‰‹æ¶"><a href="#1-5-æµ‹è¯•è„šæ‰‹æ¶" class="headerlink" title="1-5 æµ‹è¯•è„šæ‰‹æ¶"></a>1-5 æµ‹è¯•è„šæ‰‹æ¶</h2><ul>
<li>æµ‹è¯•è„šæ‰‹æ¶<ul>
<li>æµ‹è¯•è„šæ‰‹æ¶å³Fixtureï¼Œä¸€ç§ä»£ç ç»“æ„ï¼Œå¯ä»¥åœ¨æµ‹è¯•ç”¨ä¾‹æ‰§è¡Œå‰åè‡ªåŠ¨è°ƒç”¨æŒ‡å®šçš„å‡½æ•°ã€‚</li>
<li>æ–¹æ³•çº§åˆ«ï¼šæ¯ä¸ªæµ‹è¯•æ–¹æ³•æ‰§è¡Œå‰éƒ½ä¼šæ‰§è¡Œ<code>setUp()</code>ï¼Œæ‰§è¡Œä¹‹åéƒ½ä¼šæ‰§è¡Œ<code>tearDown()</code>ã€‚</li>
<li>ç±»çº§åˆ«ï¼šæ¯ä¸ªç±»æ‰§è¡Œå‰æ‰§è¡Œä¸€æ¬¡<code>setUpClass()</code>ï¼Œæ‰§è¡Œåæ‰§è¡Œä¸€æ¬¡<code>tearDownClass()</code>ã€‚</li>
<li>æ¨¡å—çº§åˆ«ï¼šæ¨¡å—æ‰§è¡Œå‰æ‰§è¡Œä¸€æ¬¡<code>setUpModule()</code>ï¼Œæ¨¡å—æ‰§è¡Œåæ‰§è¡Œä¸€æ¬¡<code>tearDownModule()</code>ã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># test_fixture.py</span><br><span class="hljs-keyword">import</span> unittest<br><span class="hljs-keyword">import</span> requests<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">setUpModule</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æµ‹è¯•æ¨¡å—å‰ç½®æ‰§è¡Œ-åˆå§‹æ“ä½œ&quot;</span>)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">tearDownModule</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æµ‹è¯•æ¨¡å—åç½®æ‰§è¡Œ-æ¸…ç†ç¯å¢ƒ&quot;</span>)<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestWeatherAPI</span>(unittest.TestCase):<br>    <span class="hljs-comment"># ç±»æ–¹æ³•å¿…é¡»ä½¿ç”¨@classmethodè£…é¥°</span><br><span class="hljs-meta">    @classmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">setUpClass</span>(<span class="hljs-params">cls</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ç±»æ–¹æ³•çš„å‰ç½®æ‰§è¡Œ-åˆå§‹æ“ä½œ&quot;</span>)<br><br><span class="hljs-meta">    @classmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">tearDownClass</span>(<span class="hljs-params">cls</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ç±»æ–¹æ³•çš„åç½®æ‰§è¡Œ-æ¸…ç†ç¯å¢ƒ&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">setUp</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æ¯ä¸ªç”¨ä¾‹å‰ç½®æ‰§è¡Œ-åˆå§‹æ“ä½œ&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">tearDown</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æ¯ä¸ªç”¨ä¾‹åç½®æ‰§è¡Œ-æ¸…ç†ç¯å¢ƒ&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_weather_api</span>(<span class="hljs-params">self</span>):<br>        url = <span class="hljs-string">&quot;http://t.weather.sojson.com/api/weather/city/101230201&quot;</span><br>        response = requests.get(url)<br>        self.assertEqual(response.status_code, <span class="hljs-number">200</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_history_api</span>(<span class="hljs-params">self</span>):<br>        url = <span class="hljs-string">&quot;https://api.oick.cn/lishi/api.php&quot;</span><br>        response = requests.get(url)<br>        self.assertEqual(response.status_code, <span class="hljs-number">200</span>)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    unittest.main()<br></code></pre></td></tr></table></figure>



<h1 id="2-ç»“æœæ–­è¨€"><a href="#2-ç»“æœæ–­è¨€" class="headerlink" title="2 ç»“æœæ–­è¨€"></a>2 ç»“æœæ–­è¨€</h1><ul>
<li>ç»“æœæ–­è¨€<ul>
<li><code>assertIsNone(obj, msg=None)</code>Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·éªŒè¯objæ˜¯Noneï¼Œä¸æ˜¯åˆ™fail</li>
<li><code>assertIsNotNone(obj, msg=None)</code>Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·éªŒè¯objä¸æ˜¯Noneï¼Œæ˜¯åˆ™fail</li>
<li><code>assertIn(member, container, msg=None)</code>Â·Â·Â·Â·Â·Â·éªŒè¯containeræ˜¯å¦åŒ…å«member</li>
<li><code>assertNotIn(member, container, msg=None)</code>Â·Â·Â·éªŒè¯containeræ˜¯å¦ä¸åŒ…å«member</li>
<li><code>assertTrue(expr, msg=None)</code>Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·éªŒè¯expræ˜¯trueï¼Œå¦‚æœä¸ºfalseåˆ™fail</li>
<li><code>assertFalse(expr, msg=None)</code>Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·éªŒè¯expræ˜¯falseï¼Œå¦‚æœä¸ºtrueåˆ™fail</li>
<li><code>assertEqual(expected, actual, msg=None)</code>Â·Â·Â·Â·éªŒè¯<code>expected==actual</code>ï¼Œä¸ç­‰åˆ™fail</li>
<li><code>assertNotEqual(first, second, msg=None)</code>Â·Â·Â·Â·éªŒè¯<code>first!=second</code>ï¼Œå¦‚æœç›¸ç­‰åˆ™fail</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># test_assert.py</span><br><span class="hljs-keyword">import</span> unittest<br><span class="hljs-keyword">import</span> requests<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestAPIResponses</span>(unittest.TestCase):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_weather_api</span>(<span class="hljs-params">self</span>):<br>        url = <span class="hljs-string">&quot;http://t.weather.sojson.com/api/weather/city/101230201&quot;</span><br>        response = requests.get(url)<br>        self.assertIsNotNone(response.json(), <span class="hljs-string">&quot;å“åº”éç©º&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_history_api</span>(<span class="hljs-params">self</span>):<br>        url = <span class="hljs-string">&quot;https://api.oick.cn/lishi/api.php&quot;</span><br>        response = requests.get(url)<br>        self.assertIsNotNone(response.json(), <span class="hljs-string">&quot;å“åº”éç©º&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_assertIn</span>(<span class="hljs-params">self</span>):<br>        container = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]<br>        self.assertIn(<span class="hljs-number">3</span>, container, <span class="hljs-string">&quot;containeråŒ…å«3&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_assertNotIn</span>(<span class="hljs-params">self</span>):<br>        container = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]<br>        self.assertNotIn(<span class="hljs-number">6</span>, container, <span class="hljs-string">&quot;containerä¸åŒ…å«6&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_assertTrue</span>(<span class="hljs-params">self</span>):<br>        self.assertTrue(<span class="hljs-number">5</span> &gt; <span class="hljs-number">3</span>, <span class="hljs-string">&quot;5å¤§äº3&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_assertFalse</span>(<span class="hljs-params">self</span>):<br>        self.assertFalse(<span class="hljs-number">3</span> &gt; <span class="hljs-number">5</span>, <span class="hljs-string">&quot;3ä¸å¤§äº5&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_assertEqual</span>(<span class="hljs-params">self</span>):<br>        self.assertEqual(<span class="hljs-number">5</span>, <span class="hljs-number">5</span>, <span class="hljs-string">&quot;5ç­‰äº5&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_assertNotEqual</span>(<span class="hljs-params">self</span>):<br>        self.assertNotEqual(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-string">&quot;5ä¸ç­‰äº3&quot;</span>)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    <span class="hljs-comment"># æ‰§è¡Œé¡ºåºæŒ‰æ–¹æ³•åçš„ASCIIå€¼æ’åº</span><br>    unittest.main()<br></code></pre></td></tr></table></figure>



<h1 id="3-è·³è¿‡ç”¨ä¾‹"><a href="#3-è·³è¿‡ç”¨ä¾‹" class="headerlink" title="3 è·³è¿‡ç”¨ä¾‹"></a>3 è·³è¿‡ç”¨ä¾‹</h1><ul>
<li>è·³è¿‡ç”¨ä¾‹<ul>
<li><code>@unittest.skip(reason)</code>Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·æ— æ¡ä»¶è·³è¿‡</li>
<li><code>@unittest.skipIf(condition, reason)</code>Â·Â·Â·Â·Â·Â·Â·å½“conditionä¸ºTrueæ—¶è·³è¿‡</li>
<li><code>@unittest.skipUnless(condition, reason)</code>Â·Â·Â·å½“conditionä¸ºFalseæ—¶è·³è¿‡</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># test_skip.py</span><br><span class="hljs-keyword">import</span> unittest<br><span class="hljs-keyword">import</span> requests<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestAPIResponses</span>(unittest.TestCase):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_weather_api</span>(<span class="hljs-params">self</span>):<br>        url = <span class="hljs-string">&quot;http://t.weather.sojson.com/api/weather/city/101230201&quot;</span><br>        response = requests.get(url)<br>        self.assertIsNotNone(response.json(), <span class="hljs-string">&quot;å“åº”éç©º&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_history_api</span>(<span class="hljs-params">self</span>):<br>        url = <span class="hljs-string">&quot;https://api.oick.cn/lishi/api.php&quot;</span><br>        response = requests.get(url)<br>        self.assertIsNotNone(response.json(), <span class="hljs-string">&quot;å“åº”éç©º&quot;</span>)<br><br><span class="hljs-meta">    @unittest.skip(<span class="hljs-params"><span class="hljs-string">&quot;ç›´æ¥è·³è¿‡&quot;</span></span>)</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_assertIn</span>(<span class="hljs-params">self</span>):<br>        container = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]<br>        self.assertIn(<span class="hljs-number">3</span>, container, <span class="hljs-string">&quot;containeråŒ…å«3&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_assertNotIn</span>(<span class="hljs-params">self</span>):<br>        container = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]<br>        self.assertNotIn(<span class="hljs-number">6</span>, container, <span class="hljs-string">&quot;containerä¸åŒ…å«6&quot;</span>)<br><br><span class="hljs-meta">    @unittest.skipIf(<span class="hljs-params"><span class="hljs-number">5</span> &gt; <span class="hljs-number">3</span>, <span class="hljs-string">&quot;è·³è¿‡ç”¨ä¾‹&quot;</span></span>)</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_assertTrue</span>(<span class="hljs-params">self</span>):<br>        self.assertTrue(<span class="hljs-number">5</span> &gt; <span class="hljs-number">3</span>, <span class="hljs-string">&quot;5å¤§äº3&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_assertFalse</span>(<span class="hljs-params">self</span>):<br>        self.assertFalse(<span class="hljs-number">3</span> &gt; <span class="hljs-number">5</span>, <span class="hljs-string">&quot;3ä¸å¤§äº5&quot;</span>)<br><br><span class="hljs-meta">    @unittest.skipUnless(<span class="hljs-params"><span class="hljs-number">5</span> != <span class="hljs-number">3</span>, <span class="hljs-string">&quot;è·³è¿‡ç”¨ä¾‹&quot;</span></span>)</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_assertEqual</span>(<span class="hljs-params">self</span>):<br>        self.assertEqual(<span class="hljs-number">5</span>, <span class="hljs-number">5</span>, <span class="hljs-string">&quot;5ç­‰äº5&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_assertNotEqual</span>(<span class="hljs-params">self</span>):<br>        self.assertNotEqual(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-string">&quot;5ä¸ç­‰äº3&quot;</span>)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    unittest.main()<br></code></pre></td></tr></table></figure>



<h1 id="4-æ•°æ®é©±åŠ¨"><a href="#4-æ•°æ®é©±åŠ¨" class="headerlink" title="4 æ•°æ®é©±åŠ¨"></a>4 æ•°æ®é©±åŠ¨</h1><ul>
<li>æ•°æ®é©±åŠ¨<ul>
<li>æŒ‡æ•°æ®å‚æ•°åŒ–ï¼Œå³ddt(data-driver tests)ï¼Œä»¥æ•°æ®æ¥é©±åŠ¨æ•´ä¸ªæµ‹è¯•ç”¨ä¾‹çš„æ‰§è¡Œã€‚</li>
<li>ä»£ç å’Œæ•°æ®åˆ†ç¦»ï¼Œé¿å…å†—ä½™ï¼Œä¸å†™é‡å¤çš„ä»£ç é€»è¾‘ï¼Œå®‰è£…ï¼š<code>pip install ddt</code>ã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># test_ddt.py</span><br><span class="hljs-keyword">import</span> unittest<br><span class="hljs-keyword">from</span> ddt <span class="hljs-keyword">import</span> ddt, data, unpack<br><br><br><span class="hljs-comment"># ä½¿ç”¨æ•°æ®é©±åŠ¨ï¼Œè¦åœ¨classå‰åŠ ä¸Š@ddtä¿®é¥°å™¨</span><br><span class="hljs-meta">@ddt</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestPhone</span>(unittest.TestCase):<br>    <span class="hljs-comment"># å¤šå‚æ•°æ•°æ®é©±åŠ¨è¦ç”¨åˆ—è¡¨å½¢å¼</span><br><span class="hljs-meta">    @data(<span class="hljs-params">[<span class="hljs-string">&quot;admin&quot;</span>, <span class="hljs-string">&quot;18850000000&quot;</span>]</span>)</span><br>    <span class="hljs-comment"># @unpackè£…é¥°å™¨è¿›è¡Œæ‹†åŒ…ï¼Œå¦åˆ™ä¼šå°†æ•°æ®å…¨éƒ¨ä¼ å…¥ä¸€ä¸ªå‚æ•°ä¸­</span><br>    <span class="hljs-comment"># è‹¥å­˜åœ¨nä¸ªå¤šå‚æ•°çš„æ•°æ®ï¼Œå…¨éƒ¨å†™å…¥@dataä¼šå¾ˆéº»çƒ¦ï¼Œäºæ˜¯å¼•å‡ºddt</span><br>    <span class="hljs-comment"># å°†æ•°æ®æ”¾å…¥ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶(txtã€csvã€jsonã€yamlã€excel)ä¸­ï¼Œä»æ–‡ä»¶ä¸­è¯»å–</span><br><span class="hljs-meta">    @unpack</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_phone_identify</span>(<span class="hljs-params">self, username, phone</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æµ‹è¯•ï¼š&quot;</span>, username, phone)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    unittest.main()<br></code></pre></td></tr></table></figure>



<h2 id="4-1-txt"><a href="#4-1-txt" class="headerlink" title="4-1 txt"></a>4-1 txt</h2><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs Txt">&lt;!-- ./file/phone.txt --&gt;<br>admin, 18850000000<br>tester, 18851000000<br>devops, 18852000000<br>leader, 18853000000<br>pm, 18854000000<br></code></pre></td></tr></table></figure>

<ul>
<li>Txtæ–‡ä»¶é©±åŠ¨ï¼šä¸€è¡Œè¡¨ç¤ºä¸€ç»„æ•°æ®ã€‚</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># test_txt.py</span><br><span class="hljs-keyword">import</span> unittest<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">read_txt</span>():<br>    phone_list = []<br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;./file/phone.txt&quot;</span>, <span class="hljs-string">&quot;r&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> f:<br>        <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> f.readlines():<br>            phone_list.append(line.strip(<span class="hljs-string">&quot;\n&quot;</span>).split(<span class="hljs-string">&quot;,&quot;</span>))<br>    <span class="hljs-keyword">return</span> phone_list<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestPhone</span>(unittest.TestCase):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_phone_identify</span>(<span class="hljs-params">self</span>):<br>        phone = read_txt()<br>        <span class="hljs-built_in">print</span>(phone)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    unittest.main()<br></code></pre></td></tr></table></figure>



<h2 id="4-2-csv"><a href="#4-2-csv" class="headerlink" title="4-2 csv"></a>4-2 csv</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs Csv">&lt;!-- ./file/phone.csv --&gt;<br>admin, 18850000000<br>tester, 18851000000<br>devops, 18852000000<br>leader, 18853000000<br>pm, 18854000000<br></code></pre></td></tr></table></figure>



<h3 id="1-test-csv1-py"><a href="#1-test-csv1-py" class="headerlink" title="(1) test_csv1.py"></a>(1) test_csv1.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># test_csv1.py</span><br><span class="hljs-keyword">import</span> csv<br><span class="hljs-keyword">import</span> unittest<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">read_csv</span>():<br>    phone_list = []<br>    <span class="hljs-comment"># ä½¿ç”¨csv APIçš„readeræ–¹æ³•</span><br>    data = csv.reader(<span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;./file/phone.csv&quot;</span>, <span class="hljs-string">&quot;r&quot;</span>))<br>    <span class="hljs-built_in">next</span>(data, <span class="hljs-literal">None</span>)<br>    <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> data:<br>        phone_list.append(line)<br>    <span class="hljs-keyword">return</span> phone_list<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestPhone</span>(unittest.TestCase):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_phone_identify</span>(<span class="hljs-params">self</span>):<br>        phone = read_csv()<br>        <span class="hljs-built_in">print</span>(phone)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    unittest.main()<br></code></pre></td></tr></table></figure>



<h3 id="2-test-csv2-py"><a href="#2-test-csv2-py" class="headerlink" title="(2) test_csv2.py"></a>(2) test_csv2.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># test_csv2.py</span><br><span class="hljs-keyword">import</span> csv<br><span class="hljs-keyword">import</span> unittest<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">read_csv</span>():<br>    phone_list = []<br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;./file/phone.csv&quot;</span>, <span class="hljs-string">&quot;r&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> f:<br>        filename = csv.reader(f)<br>        <span class="hljs-built_in">next</span>(filename, <span class="hljs-literal">None</span>)<br>        <span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> filename:<br>            phone_list.append(r)<br>        <span class="hljs-keyword">return</span> phone_list<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestPhone</span>(unittest.TestCase):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_phone_identify</span>(<span class="hljs-params">self</span>):<br>        phone = read_csv()<br>        <span class="hljs-built_in">print</span>(phone)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    unittest.main()<br></code></pre></td></tr></table></figure>



<h2 id="4-3-json"><a href="#4-3-json" class="headerlink" title="4-3 json"></a>4-3 json</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs Json"><span class="hljs-comment">// ./file/phone.json</span><br><span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;username&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;admin&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;phone&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;18850000000&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;username&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;tester&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;phone&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;18851000000&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;username&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;devops&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;phone&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;18852000000&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;username&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;leader&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;phone&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;18853000000&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;username&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;pm&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;phone&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;18854000000&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure>

<ul>
<li><code>@data()</code>ä¸­çš„<code>*</code>æ˜¯ä¼ å…¥å…ƒç»„ï¼Œå¦‚æœæ˜¯<code>**</code>ï¼Œåˆ™ä¼ å…¥å­—å…¸ã€‚</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># test_json.py</span><br><span class="hljs-keyword">import</span> json<br><span class="hljs-keyword">import</span> unittest<br><span class="hljs-keyword">from</span> ddt <span class="hljs-keyword">import</span> ddt, data, unpack<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">read_json</span>():<br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;./file/phone.json&quot;</span>, <span class="hljs-string">&quot;r&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> f:<br>        result = json.load(f)<br>        <span class="hljs-keyword">return</span> result<br><br><br><span class="hljs-meta">@ddt</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestPhone</span>(unittest.TestCase):<br>    <span class="hljs-comment"># å¤šå‚æ•°æ•°æ®é©±åŠ¨</span><br><span class="hljs-meta">    @data(<span class="hljs-params">*read_json(<span class="hljs-params"></span>)</span>)</span><br><span class="hljs-meta">    @unpack</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_phone_identify</span>(<span class="hljs-params">self, username, phone</span>):<br>        <span class="hljs-built_in">print</span>(username, phone)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    unittest.main()<br></code></pre></td></tr></table></figure>



<h2 id="4-4-yaml"><a href="#4-4-yaml" class="headerlink" title="4-4 yaml"></a>4-4 yaml</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs Yaml"><span class="hljs-comment"># ./file/phone.yaml</span><br><span class="hljs-bullet">-</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">admin</span><br>    <span class="hljs-attr">phone:</span> <span class="hljs-number">18850000000</span><br><span class="hljs-bullet">-</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">tester</span><br>    <span class="hljs-attr">phone:</span> <span class="hljs-number">18851000000</span><br><span class="hljs-bullet">-</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">devops</span><br>    <span class="hljs-attr">phone:</span> <span class="hljs-number">18852000000</span><br><span class="hljs-bullet">-</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">leader</span><br>    <span class="hljs-attr">phone:</span> <span class="hljs-number">18853000000</span><br><span class="hljs-bullet">-</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">pm</span><br>    <span class="hljs-attr">phone:</span> <span class="hljs-number">18854000000</span><br></code></pre></td></tr></table></figure>

<ul>
<li><code>file_data()</code>è£…é¥°å™¨ï¼šå¯ä»¥ç›´æ¥è¯»å–yamlå’Œjsonæ–‡ä»¶ã€‚</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># test_yaml.py</span><br><span class="hljs-keyword">import</span> unittest<br><span class="hljs-keyword">from</span> ddt <span class="hljs-keyword">import</span> ddt, unpack, file_data<br><br><br><span class="hljs-meta">@ddt</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestPhone</span>(unittest.TestCase):<br>    <span class="hljs-comment"># file_data()è£…é¥°å™¨å¯ç›´æ¥è¯»å–yamlå’Œjsonæ–‡ä»¶</span><br><span class="hljs-meta">    @file_data(<span class="hljs-params"><span class="hljs-string">&quot;./file/phone.yaml&quot;</span></span>)</span><br><span class="hljs-meta">    @unpack</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_phone_identify</span>(<span class="hljs-params">self, username, phone</span>):<br>        <span class="hljs-built_in">print</span>(username, phone)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    unittest.main()<br></code></pre></td></tr></table></figure>



<h2 id="4-5-excel"><a href="#4-5-excel" class="headerlink" title="4-5 excel"></a>4-5 excel</h2><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs Excel">&lt;!-- phone.xlsx --&gt;<br>admin, <span class="hljs-number">18850000000</span><br>tester, <span class="hljs-number">18851000000</span><br>devops, <span class="hljs-number">18852000000</span><br>leader, <span class="hljs-number">18853000000</span><br>pm, <span class="hljs-number">18854000000</span><br></code></pre></td></tr></table></figure>

<ul>
<li>Excelæ–‡ä»¶é©±åŠ¨ï¼šéœ€è¦ä½¿ç”¨åˆ°openpyxlåº“ï¼Œå®‰è£…åº“<code>pip install openpyxl</code>ã€‚</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># test_excel.py</span><br><span class="hljs-keyword">import</span> unittest<br><span class="hljs-keyword">import</span> openpyxl<br><span class="hljs-keyword">from</span> ddt <span class="hljs-keyword">import</span> ddt, unpack, data<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">read_excel</span>():<br>    xlsx = openpyxl.load_workbook(<span class="hljs-string">&quot;./file/phone.xlsx&quot;</span>)<br>    sheet1 = xlsx[<span class="hljs-string">&quot;phone&quot;</span>]<br>    <span class="hljs-built_in">print</span>(sheet1.max_row)<br>    <span class="hljs-built_in">print</span>(sheet1.max_column)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;***********&quot;</span>)<br>    phone_list = []<br>    <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, sheet1.max_row + <span class="hljs-number">1</span>):<br>        row_list = []<br>        <span class="hljs-keyword">for</span> column <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, sheet1.max_column + <span class="hljs-number">1</span>):<br>            row_list.append(sheet1.cell(row, column).value)<br>        phone_list.append(row_list)<br>    <span class="hljs-keyword">return</span> phone_list<br><br><br><span class="hljs-meta">@ddt</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestPhone</span>(unittest.TestCase):<br><span class="hljs-meta">    @data(<span class="hljs-params">*read_excel(<span class="hljs-params"></span>)</span>)</span><br><span class="hljs-meta">    @unpack</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_phone_identify</span>(<span class="hljs-params">self, username, phone</span>):<br>        <span class="hljs-built_in">print</span>(username, phone)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    unittest.main()<br></code></pre></td></tr></table></figure>



<h1 id="5-æ—¥å¿—æ“ä½œ"><a href="#5-æ—¥å¿—æ“ä½œ" class="headerlink" title="5 æ—¥å¿—æ“ä½œ"></a>5 æ—¥å¿—æ“ä½œ</h1><ul>
<li>æ—¥å¿—æ“ä½œ<ul>
<li>è®°å½•æµ‹è¯•ç”¨ä¾‹çš„æ‰§è¡Œæƒ…å†µï¼Œæ’æŸ¥é”™è¯¯ï¼Œä½¿ç”¨Pythonè‡ªå¸¦çš„loggingæ¨¡å—ã€‚</li>
<li><code>logging.debug()</code>Â·Â·Â·Â·Â·Â·Â·Â·è°ƒè¯•æ—¥å¿—ï¼Œè¯Šæ–­é—®é¢˜æ—¶ä½¿ç”¨ï¼Œæœ€è¯¦ç»†çš„æ—¥å¿—</li>
<li><code>logging.info()</code>Â·Â·Â·Â·Â·Â·Â·Â·Â·æ™®é€šæ—¥å¿—ï¼Œç¡®å®šç¨‹åºæ˜¯å¦æŒ‰ç…§é¢„æœŸçš„æµç¨‹æ‰§è¡Œ</li>
<li><code>logging.warning()</code>Â·Â·Â·Â·Â·Â·è­¦å‘Šæ—¥å¿—ï¼Œå¯èƒ½ä¼šå‡ºç°çš„é—®é¢˜ï¼Œç¨‹åºä»å¯æ‰§è¡Œ</li>
<li><code>logging.error()</code>Â·Â·Â·Â·Â·Â·Â·Â·é”™è¯¯æ—¥å¿—ï¼ŒæŸäº›åŠŸèƒ½è½¯ä»¶å¯èƒ½æ— æ³•æ­£ç¡®åœ°æ‰§è¡Œ</li>
<li><code>logging.critical()</code>Â·Â·Â·Â·Â·ä¸¥é‡é”™è¯¯ï¼Œè¡¨æ˜ç¨‹åºæœ¬èº«å¯èƒ½æ— æ³•å†ç»§ç»­æ‰§è¡Œ</li>
</ul>
</li>
</ul>
<h2 id="5-1-å¯¼å‡ºæ—¥å¿—"><a href="#5-1-å¯¼å‡ºæ—¥å¿—" class="headerlink" title="5-1 å¯¼å‡ºæ—¥å¿—"></a>5-1 å¯¼å‡ºæ—¥å¿—</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># 1ã€å¯¼å…¥æ¨¡å—ï¼Œtest_logbasic.py</span><br><span class="hljs-keyword">import</span> logging<br><br><span class="hljs-comment"># 2ã€è®¾ç½®æ—¥å¿—è¿‡æ»¤é˜ˆå€¼ã€æ—¥å¿—æ ¼å¼</span><br><span class="hljs-comment">#   â‘ æ—¥å¿—æ˜¯å¦ä¼šè¢«å¤„ç†ï¼Œé€šè¿‡é˜ˆå€¼è¿›è¡Œè¿‡æ»¤ï¼Œé»˜è®¤è¿‡æ»¤é˜ˆå€¼æ˜¯warning=30</span><br><span class="hljs-comment">#   â‘¡å½“å°äºwarningçš„30æ—¶ï¼Œæ—¥å¿—ä¸å¤„ç†</span><br><span class="hljs-comment">#   â‘¢debug=10ã€info=20ã€warning=30ã€error=40ã€critical=50</span><br>logging.basicConfig(<br>    level=logging.DEBUG,<br>    <span class="hljs-built_in">format</span>=<span class="hljs-string">&quot;%(asctime)s - %(message)s [%(name)s] &quot;</span><br>           <span class="hljs-string">&quot;[%(filename)s (%(funcName)s:%(lineno)d)] %(levelname)s&quot;</span>,<br>    <span class="hljs-comment"># 3ã€å¯¼å‡ºåˆ°æ—¥å¿—æ–‡ä»¶ä¸­</span><br>    filename=<span class="hljs-string">&quot;./file/test_logbasic.log&quot;</span><br>)<br><br>logging.debug(<span class="hljs-string">&quot;è°ƒè¯•æ—¥å¿—&quot;</span>)<br>logging.info(<span class="hljs-string">&quot;æ™®é€šæ—¥å¿—&quot;</span>)<br>logging.warning(<span class="hljs-string">&quot;è­¦å‘Šæ—¥å¿—&quot;</span>)<br>logging.error(<span class="hljs-string">&quot;é”™è¯¯æ—¥å¿—&quot;</span>)<br>logging.critical(<span class="hljs-string">&quot;ä¸¥é‡é”™è¯¯&quot;</span>)<br></code></pre></td></tr></table></figure>



<h2 id="5-2-æ—¥å¿—å¤„ç†"><a href="#5-2-æ—¥å¿—å¤„ç†" class="headerlink" title="5-2 æ—¥å¿—å¤„ç†"></a>5-2 æ—¥å¿—å¤„ç†</h2><ul>
<li>æ—¥å¿—å¤„ç†<ul>
<li>åº”ç”¨ç¨‹åºä¸­çš„ä¸åŒéƒ¨åˆ†é€šè¿‡è·å–ç›¸åŒçš„æ—¥å¿—è®°å½•å™¨å®ä¾‹æ¥è®°å½•æ—¥å¿—ã€‚</li>
<li>æ—¥å¿—è®°å½•å™¨(Logger)åˆ›å»ºæ—¥å¿—æ¶ˆæ¯ï¼Œå¹¶å°†æ—¥å¿—æ¶ˆæ¯ä¼ é€’ç»™å·²é…ç½®çš„æ—¥å¿—å¤„ç†å™¨(Handler)ã€‚</li>
<li>æ—¥å¿—å¤„ç†å™¨å°†æ—¥å¿—è¾“å‡ºåˆ°æŒ‡å®šçš„ç»ˆç«¯ï¼ŒåŒæ—¶åº”ç”¨æ ¼å¼åŒ–å™¨(Formatter)å¯¹æ—¥å¿—è¿›è¡Œæ ¼å¼åŒ–ã€‚</li>
<li>æ ¼å¼åŒ–åçš„æ—¥å¿—æ¶ˆæ¯ä»¥ç»Ÿä¸€æ ¼å¼è¾“å‡ºåˆ°æŒ‡å®šçš„ç»ˆç«¯ï¼Œä»¥ä¾¿è¿›è¡Œè·Ÿè¸ªå’Œè¯Šæ–­åº”ç”¨ç¨‹åºçš„è¡Œä¸ºã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># 1ã€å¯¼å…¥æ¨¡å—ï¼Œtest_logsenior.py</span><br><span class="hljs-keyword">import</span> logging<br><br><span class="hljs-comment"># 2ã€åˆ›å»ºæ—¥å¿—è®°å½•å™¨ï¼ŒæŒ‡å®šæ—¥å¿—è®°å½•å™¨çš„åç§°ï¼Œæ—¥å¿—è®°å½•å™¨å¯ä»¥è®¾ç½®ç­‰çº§ï¼Œåˆ›å»ºæ—¥å¿—æ—¶å³ç”Ÿæ•ˆ</span><br>logger = logging.getLogger(<span class="hljs-string">&quot;Log&quot;</span>)<br>logger.setLevel(logging.DEBUG)<br><br><span class="hljs-comment"># 3ã€åˆ›å»ºæ—¥å¿—å¤„ç†å™¨ï¼Œå†™å…¥æ–‡ä»¶ä¸­ï¼Œæ—¥å¿—å¤„ç†å™¨ä¹Ÿå¯ä»¥è®¾ç½®ç­‰çº§ï¼Œåªè¾“å‡ºWARNINGä»¥ä¸Šçº§åˆ«æ—¥å¿—</span><br>file_handler = logging.FileHandler(filename=<span class="hljs-string">&quot;./file/test_logsenior.log&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>)<br>file_handler.setLevel(logging.WARNING)<br><br><span class="hljs-comment"># 4ã€åˆ›å»ºæ§åˆ¶å°å¤„ç†å™¨ï¼Œæ‰“å°æ—¥å¿—</span><br>console_handler = logging.StreamHandler()<br>console_handler.setLevel(logging.DEBUG)<br><br><span class="hljs-comment"># 5ã€åˆ›å»ºæ ¼å¼åŒ–å™¨</span><br>formater = logging.Formatter(<br>    fmt=<span class="hljs-string">&quot;%(asctime)s - %(message)s [%(name)s] &quot;</span><br>        <span class="hljs-string">&quot;[%(filename)s (%(funcName)s:%(lineno)d)] %(levelname)s&quot;</span><br>)<br><br><span class="hljs-comment"># 6ã€å°†æ ¼å¼åŒ–å™¨æ·»åŠ åˆ°æ—¥å¿—å¤„ç†å™¨ä¸Š</span><br>file_handler.setFormatter(formater)<br>console_handler.setFormatter(formater)<br><br><span class="hljs-comment"># 7ã€å°†æ—¥å¿—å¤„ç†å™¨æ·»åŠ åˆ°æ—¥å¿—è®°å½•å™¨ä¸Š</span><br>logger.addHandler(file_handler)<br>logger.addHandler(console_handler)<br><br>logger.debug(<span class="hljs-string">&quot;è°ƒè¯•æ—¥å¿—&quot;</span>)<br>logger.info(<span class="hljs-string">&quot;æ™®é€šæ—¥å¿—&quot;</span>)<br>logger.warning(<span class="hljs-string">&quot;è­¦å‘Šæ—¥å¿—&quot;</span>)<br>logger.error(<span class="hljs-string">&quot;é”™è¯¯æ—¥å¿—&quot;</span>)<br>logger.critical(<span class="hljs-string">&quot;ä¸¥é‡é”™è¯¯&quot;</span>)<br></code></pre></td></tr></table></figure>



<h1 id="6-æµ‹è¯•æŠ¥å‘Š"><a href="#6-æµ‹è¯•æŠ¥å‘Š" class="headerlink" title="6 æµ‹è¯•æŠ¥å‘Š"></a>6 æµ‹è¯•æŠ¥å‘Š</h1><ul>
<li>æµ‹è¯•æŠ¥å‘Š<ul>
<li>Textæµ‹è¯•æŠ¥å‘Šï¼šä½¿ç”¨<code>unittest.TextTestRunner()</code>æ–¹æ³•ç”ŸæˆTextç±»å‹çš„æµ‹è¯•æŠ¥å‘Šã€‚</li>
<li>è‡ªå¸¦çš„æµ‹è¯•æŠ¥å‘Šï¼šPycharmæ‰§è¡Œç»“æœRunä¸­çš„<code>Export Test Results</code>è¿›è¡Œè®¾ç½®ç”Ÿæˆã€‚</li>
<li>XTestRunneræµ‹è¯•æŠ¥å‘Šï¼Œä½¿ç”¨å‘½ä»¤å®‰è£…XTestRunnerç¬¬ä¸‰æ–¹åº“ï¼š<code>pip install XTestRunner</code>ã€‚</li>
<li>BeautifulReportæµ‹è¯•æŠ¥å‘Šï¼Œéœ€å‘½ä»¤å®‰è£…BeautifulReportåº“ï¼š<code>pip install BeautifulReport</code>ã€‚</li>
<li>HTMLTestRunneræµ‹è¯•æŠ¥å‘Šï¼Œéœ€è¦æ‰‹åŠ¨ä¸‹è½½å¹¶ä¿®æ”¹HTMLTestRunner.pyæ–‡ä»¶å†…å®¹ï¼Œå†æ”¾å…¥Libä¸­ã€‚</li>
</ul>
</li>
</ul>
<h2 id="6-1-Textæµ‹è¯•æŠ¥å‘Š"><a href="#6-1-Textæµ‹è¯•æŠ¥å‘Š" class="headerlink" title="6-1 Textæµ‹è¯•æŠ¥å‘Š"></a>6-1 Textæµ‹è¯•æŠ¥å‘Š</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># test_textreport.py</span><br><span class="hljs-keyword">import</span> unittest<br><span class="hljs-keyword">import</span> requests<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestAPIResponses</span>(unittest.TestCase):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_weather_api</span>(<span class="hljs-params">self</span>):<br>        url = <span class="hljs-string">&quot;http://t.weather.sojson.com/api/weather/city/101230201&quot;</span><br>        response = requests.get(url)<br>        self.assertIsNotNone(response.json(), <span class="hljs-string">&quot;å“åº”éç©º&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_history_api</span>(<span class="hljs-params">self</span>):<br>        url = <span class="hljs-string">&quot;https://api.oick.cn/lishi/api.php&quot;</span><br>        response = requests.get(url)<br>        self.assertIsNotNone(response.json(), <span class="hljs-string">&quot;å“åº”éç©º&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_assertIn</span>(<span class="hljs-params">self</span>):<br>        container = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]<br>        self.assertIn(<span class="hljs-number">3</span>, container, <span class="hljs-string">&quot;containeråŒ…å«3&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_assertNotIn</span>(<span class="hljs-params">self</span>):<br>        container = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]<br>        self.assertNotIn(<span class="hljs-number">6</span>, container, <span class="hljs-string">&quot;containerä¸åŒ…å«6&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_assertTrue</span>(<span class="hljs-params">self</span>):<br>        self.assertTrue(<span class="hljs-number">5</span> &gt; <span class="hljs-number">3</span>, <span class="hljs-string">&quot;5å¤§äº3&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_assertFalse</span>(<span class="hljs-params">self</span>):<br>        self.assertFalse(<span class="hljs-number">3</span> &gt; <span class="hljs-number">5</span>, <span class="hljs-string">&quot;3ä¸å¤§äº5&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_assertEqual</span>(<span class="hljs-params">self</span>):<br>        self.assertEqual(<span class="hljs-number">5</span>, <span class="hljs-number">5</span>, <span class="hljs-string">&quot;5ç­‰äº5&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_assertNotEqual</span>(<span class="hljs-params">self</span>):<br>        self.assertNotEqual(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-string">&quot;5ä¸ç­‰äº3&quot;</span>)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    <span class="hljs-comment"># åˆ›å»ºæµ‹è¯•å¥—ä»¶</span><br>    suite = unittest.TestLoader().loadTestsFromTestCase(TestAPIResponses)<br>    <span class="hljs-comment"># éœ€è¦ä½¿ç”¨å‘½ä»¤â€œpython test_textreport.pyâ€æ‰§è¡Œæµ‹è¯•ï¼Œæ‰èƒ½ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š</span><br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;./reports/test_textreport.txt&quot;</span>, <span class="hljs-string">&quot;w&quot;</span>) <span class="hljs-keyword">as</span> f:<br>        runner = unittest.TextTestRunner(f)<br>        runner.run(suite)<br></code></pre></td></tr></table></figure>



<h2 id="6-2-XTestRunner"><a href="#6-2-XTestRunner" class="headerlink" title="6-2 XTestRunner"></a>6-2 XTestRunner</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># test_xtesttunner.py</span><br><span class="hljs-keyword">import</span> unittest<br><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">from</span> XTestRunner <span class="hljs-keyword">import</span> HTMLTestRunner<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestAPIResponses</span>(unittest.TestCase):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_weather_api</span>(<span class="hljs-params">self</span>):<br>        url = <span class="hljs-string">&quot;http://t.weather.sojson.com/api/weather/city/101230201&quot;</span><br>        response = requests.get(url)<br>        self.assertIsNotNone(response.json(), <span class="hljs-string">&quot;å“åº”éç©º&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_history_api</span>(<span class="hljs-params">self</span>):<br>        url = <span class="hljs-string">&quot;https://api.oick.cn/lishi/api.php&quot;</span><br>        response = requests.get(url)<br>        self.assertIsNotNone(response.json(), <span class="hljs-string">&quot;å“åº”éç©º&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_assertIn</span>(<span class="hljs-params">self</span>):<br>        container = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]<br>        self.assertIn(<span class="hljs-number">3</span>, container, <span class="hljs-string">&quot;containeråŒ…å«3&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_assertNotIn</span>(<span class="hljs-params">self</span>):<br>        container = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]<br>        self.assertNotIn(<span class="hljs-number">6</span>, container, <span class="hljs-string">&quot;containerä¸åŒ…å«6&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_assertTrue</span>(<span class="hljs-params">self</span>):<br>        self.assertTrue(<span class="hljs-number">5</span> &gt; <span class="hljs-number">3</span>, <span class="hljs-string">&quot;5å¤§äº3&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_assertFalse</span>(<span class="hljs-params">self</span>):<br>        self.assertFalse(<span class="hljs-number">3</span> &gt; <span class="hljs-number">5</span>, <span class="hljs-string">&quot;3ä¸å¤§äº5&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_assertEqual</span>(<span class="hljs-params">self</span>):<br>        self.assertEqual(<span class="hljs-number">5</span>, <span class="hljs-number">5</span>, <span class="hljs-string">&quot;5ç­‰äº5&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_assertNotEqual</span>(<span class="hljs-params">self</span>):<br>        self.assertNotEqual(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-string">&quot;5ä¸ç­‰äº3&quot;</span>)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    <span class="hljs-comment"># åˆ›å»ºæµ‹è¯•å¥—ä»¶</span><br>    suite = unittest.TestLoader().loadTestsFromTestCase(TestAPIResponses)<br>    <span class="hljs-comment"># éœ€è¦ä½¿ç”¨å‘½ä»¤â€œpython test_xtesttunner.pyâ€æ‰§è¡Œæµ‹è¯•ï¼Œæ‰èƒ½ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š</span><br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;./reports/test_xtesttunner.html&quot;</span>, <span class="hljs-string">&quot;wb&quot;</span>) <span class="hljs-keyword">as</span> f:<br>        runner = HTMLTestRunner(<br>            <span class="hljs-comment"># verbosityå‚æ•°ï¼š0æ˜¯ç®€å•æŠ¥å‘Šï¼Œ1æ˜¯ä¸€èˆ¬æŠ¥å‘Šï¼Œ2æ˜¯è¯¦ç»†æŠ¥å‘Š</span><br>            stream=f, verbosity=<span class="hljs-number">2</span>, title=<span class="hljs-string">&quot;UnitTestæµ‹è¯•æŠ¥å‘Š&quot;</span>,<br>            description=<span class="hljs-string">&quot;UnitTestæµ‹è¯•æŠ¥å‘Šï¼šå†…å®¹æè¿°...&quot;</span><br>        )<br>        result = runner.run(suite)<br><br>    <span class="hljs-comment"># with open(&quot;./reports/test_xtesttunner.html&quot;, &quot;wb&quot;) as f:</span><br>    <span class="hljs-comment">#     unittest.main(testRunner=HTMLTestRunner(</span><br>    <span class="hljs-comment">#         stream=f,</span><br>    <span class="hljs-comment">#         title=&quot;UnitTestæµ‹è¯•æŠ¥å‘Š&quot;,</span><br>    <span class="hljs-comment">#         description=&quot;UnitTestæµ‹è¯•æŠ¥å‘Šï¼šå†…å®¹æè¿°...&quot;</span><br>    <span class="hljs-comment">#     ))</span><br></code></pre></td></tr></table></figure>



<h2 id="6-3-BeautifulReport"><a href="#6-3-BeautifulReport" class="headerlink" title="6-3 BeautifulReport"></a>6-3 BeautifulReport</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># test_beautifulreport.py</span><br><span class="hljs-keyword">import</span> unittest<br><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">from</span> BeautifulReport <span class="hljs-keyword">import</span> BeautifulReport<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestAPIResponses</span>(unittest.TestCase):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_weather_api</span>(<span class="hljs-params">self</span>):<br>        url = <span class="hljs-string">&quot;http://t.weather.sojson.com/api/weather/city/101230201&quot;</span><br>        response = requests.get(url)<br>        self.assertIsNotNone(response.json(), <span class="hljs-string">&quot;å“åº”éç©º&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_history_api</span>(<span class="hljs-params">self</span>):<br>        url = <span class="hljs-string">&quot;https://api.oick.cn/lishi/api.php&quot;</span><br>        response = requests.get(url)<br>        self.assertIsNotNone(response.json(), <span class="hljs-string">&quot;å“åº”éç©º&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_assertIn</span>(<span class="hljs-params">self</span>):<br>        container = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]<br>        self.assertIn(<span class="hljs-number">3</span>, container, <span class="hljs-string">&quot;containeråŒ…å«3&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_assertNotIn</span>(<span class="hljs-params">self</span>):<br>        container = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]<br>        self.assertNotIn(<span class="hljs-number">6</span>, container, <span class="hljs-string">&quot;containerä¸åŒ…å«6&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_assertTrue</span>(<span class="hljs-params">self</span>):<br>        self.assertTrue(<span class="hljs-number">5</span> &gt; <span class="hljs-number">3</span>, <span class="hljs-string">&quot;5å¤§äº3&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_assertFalse</span>(<span class="hljs-params">self</span>):<br>        self.assertFalse(<span class="hljs-number">3</span> &gt; <span class="hljs-number">5</span>, <span class="hljs-string">&quot;3ä¸å¤§äº5&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_assertEqual</span>(<span class="hljs-params">self</span>):<br>        self.assertEqual(<span class="hljs-number">5</span>, <span class="hljs-number">5</span>, <span class="hljs-string">&quot;5ç­‰äº5&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_assertNotEqual</span>(<span class="hljs-params">self</span>):<br>        self.assertNotEqual(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-string">&quot;5ä¸ç­‰äº3&quot;</span>)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    <span class="hljs-comment"># åˆ›å»ºæµ‹è¯•å¥—ä»¶</span><br>    suite = unittest.TestLoader().loadTestsFromTestCase(TestAPIResponses)<br>    <span class="hljs-comment"># éœ€è¦ä½¿ç”¨å‘½ä»¤â€œpython test_beautifulreport.pyâ€æ‰§è¡Œæµ‹è¯•ï¼Œæ‰èƒ½ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š</span><br>    BeautifulReport(suite).report(<br>        <span class="hljs-comment"># descriptionåœ¨BeautifulReportæŠ¥å‘Šä¸­æ˜¯ç”¨ä¾‹åç§°</span><br>        description=<span class="hljs-string">&quot;UnitTestæ¥å£æµ‹è¯•&quot;</span>,<br>        filename=<span class="hljs-string">&quot;./reports/test_beautifulreport.html&quot;</span><br>    )<br></code></pre></td></tr></table></figure>



<h2 id="6-4-HTMLTestRunner"><a href="#6-4-HTMLTestRunner" class="headerlink" title="6-4 HTMLTestRunner"></a>6-4 HTMLTestRunner</h2><ul>
<li>å‘½ä»¤å®‰è£…HTMLTestRunnerç¬¬ä¸‰æ–¹åº“ä¼šæŠ¥é”™ï¼Œè¯¥åº“ç”±Python2ç¼–å†™ï¼Œæ²¡æœ‰ç‰ˆæœ¬æ›´æ–°ã€‚</li>
</ul>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs Powershell">pip install HTMLTestRunner<br>Defaulting to user installation because normal site<span class="hljs-literal">-packages</span> is not writeable<br>ERROR: Could not find a version that satisfies the requirement HTMLTestRunner (from versions: none)<br>ERROR: No matching distribution found <span class="hljs-keyword">for</span> HTMLTestRunner<br></code></pre></td></tr></table></figure>

<ul>
<li>ä¸‹è½½â€œ<a target="_blank" rel="noopener" href="http://tungwaiyip.info/software/HTMLTestRunner_0_8_2/HTMLTestRunner.py">HTMLTestRunner.py (0.8.2)</a>â€åï¼Œå°†æ–‡ä»¶æ”¾å…¥Pythonå®‰è£…è·¯å¾„çš„Libç›®å½•ä¸‹ã€‚</li>
<li>ä¿®æ”¹HTMLTestRunner.pyæ–‡ä»¶å†…å®¹ï¼Œå¯å‚è€ƒæ–‡ç« â€œ<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_37417220/article/details/135948513">Python3ä½¿ç”¨HTMLTestRunner</a>â€ã€‚</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># test_htmltestrunner.py</span><br><span class="hljs-keyword">import</span> unittest<br><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">from</span> HTMLTestRunner <span class="hljs-keyword">import</span> HTMLTestRunner<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestAPIResponses</span>(unittest.TestCase):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_weather_api</span>(<span class="hljs-params">self</span>):<br>        url = <span class="hljs-string">&quot;http://t.weather.sojson.com/api/weather/city/101230201&quot;</span><br>        response = requests.get(url)<br>        self.assertIsNotNone(response.json(), <span class="hljs-string">&quot;å“åº”éç©º&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_history_api</span>(<span class="hljs-params">self</span>):<br>        url = <span class="hljs-string">&quot;https://api.oick.cn/lishi/api.php&quot;</span><br>        response = requests.get(url)<br>        self.assertIsNotNone(response.json(), <span class="hljs-string">&quot;å“åº”éç©º&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_assertIn</span>(<span class="hljs-params">self</span>):<br>        container = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]<br>        self.assertIn(<span class="hljs-number">3</span>, container, <span class="hljs-string">&quot;containeråŒ…å«3&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_assertNotIn</span>(<span class="hljs-params">self</span>):<br>        container = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]<br>        self.assertNotIn(<span class="hljs-number">6</span>, container, <span class="hljs-string">&quot;containerä¸åŒ…å«6&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_assertTrue</span>(<span class="hljs-params">self</span>):<br>        self.assertTrue(<span class="hljs-number">5</span> &gt; <span class="hljs-number">3</span>, <span class="hljs-string">&quot;5å¤§äº3&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_assertFalse</span>(<span class="hljs-params">self</span>):<br>        self.assertFalse(<span class="hljs-number">3</span> &gt; <span class="hljs-number">5</span>, <span class="hljs-string">&quot;3ä¸å¤§äº5&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_assertEqual</span>(<span class="hljs-params">self</span>):<br>        self.assertEqual(<span class="hljs-number">5</span>, <span class="hljs-number">5</span>, <span class="hljs-string">&quot;5ç­‰äº5&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_assertNotEqual</span>(<span class="hljs-params">self</span>):<br>        self.assertNotEqual(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-string">&quot;5ä¸ç­‰äº3&quot;</span>)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    <span class="hljs-comment"># åˆ›å»ºæµ‹è¯•å¥—ä»¶</span><br>    suite = unittest.TestLoader().loadTestsFromTestCase(TestAPIResponses)<br>    <span class="hljs-comment"># éœ€è¦ä½¿ç”¨å‘½ä»¤â€œpython test_htmltestrunner.pyâ€æ‰§è¡Œæµ‹è¯•ï¼Œæ‰èƒ½ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š</span><br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;./reports/test_htmltestrunner.html&quot;</span>, <span class="hljs-string">&quot;wb&quot;</span>) <span class="hljs-keyword">as</span> f:<br>        runner = HTMLTestRunner(<br>            stream=f, verbosity=<span class="hljs-number">2</span>, title=<span class="hljs-string">u&quot;UnitTestæµ‹è¯•æŠ¥å‘Š&quot;</span>,<br>            description=<span class="hljs-string">u&quot;UnitTestæµ‹è¯•æŠ¥å‘Šï¼šå†…å®¹æè¿°...&quot;</span><br>        )<br>        result = runner.run(suite)<br><br>    <span class="hljs-comment"># with open(&quot;./reports/test_htmltestrunner.html&quot;, &quot;wb&quot;) as f:</span><br>    <span class="hljs-comment">#     unittest.main(testRunner=HTMLTestRunner(</span><br>    <span class="hljs-comment">#         stream=f,</span><br>    <span class="hljs-comment">#         title=&quot;UnitTestæµ‹è¯•æŠ¥å‘Š&quot;,</span><br>    <span class="hljs-comment">#         description=&quot;UnitTestæµ‹è¯•æŠ¥å‘Šï¼šå†…å®¹æè¿°...&quot;</span><br>    <span class="hljs-comment">#     ))</span><br></code></pre></td></tr></table></figure>



<h1 id="7-é…ç½®è§£æ"><a href="#7-é…ç½®è§£æ" class="headerlink" title="7 é…ç½®è§£æ"></a>7 é…ç½®è§£æ</h1><ul>
<li>é…ç½®è§£æ<ul>
<li>iniï¼šInitializationï¼Œæ˜¯Windowsç³»ç»Ÿå¸¸è§çš„é…ç½®æ–‡ä»¶æ ¼å¼ï¼Œä½¿ç”¨ç®€å•çš„é”®å€¼å¯¹ç»“æ„æ¥å­˜å‚¨é…ç½®ä¿¡æ¯ã€‚</li>
<li>confï¼šConfigurationï¼Œé€šå¸¸ç”¨äºUnixæˆ–Linuxç³»ç»Ÿä¸­ï¼Œä¹Ÿæ˜¯æ–‡æœ¬æ–‡ä»¶ï¼Œç”¨äºå­˜å‚¨åº”ç”¨ç¨‹åºçš„é…ç½®ä¿¡æ¯ã€‚</li>
<li>cnfï¼šConfigurationï¼Œé€šå¸¸ç”¨äºMySQLæ•°æ®åº“ä¸­ï¼Œä¹Ÿæ˜¯æ–‡æœ¬æ–‡ä»¶ï¼Œç”¨äºå­˜å‚¨æ•°æ®åº“æœåŠ¡å™¨çš„é…ç½®ä¿¡æ¯ã€‚</li>
<li>cfgï¼šConfigurationï¼Œé€šç”¨çš„é…ç½®æ–‡ä»¶æ ¼å¼ï¼Œé‡‡ç”¨äº†ä¸åŒçš„ç»“æ„å’Œè¯­æ³•ï¼Œå­˜å‚¨å„ç§åº”ç”¨ç¨‹åºçš„é…ç½®ä¿¡æ¯ã€‚</li>
<li>yamlï¼šä¸ymlåŒç§æ ¼å¼ï¼Œæ‰©å±•åä¸åŒï¼Œæ˜¯ä¸€ç§å¯è¯»çš„æ•°æ®åºåˆ—åŒ–æ ‡å‡†ï¼Œä½¿ç”¨ç¼©è¿›å’Œæ¢è¡Œæ¥è¡¨ç¤ºæ•°æ®ç»“æ„ã€‚</li>
</ul>
</li>
</ul>
<h2 id="7-1-iniæ ¼å¼"><a href="#7-1-iniæ ¼å¼" class="headerlink" title="7-1 iniæ ¼å¼"></a>7-1 iniæ ¼å¼</h2><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs Ini"><span class="hljs-comment">; ./file/conf.ini</span><br><span class="hljs-section">[project]</span><br><span class="hljs-attr">base_url</span> = http://<span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>:<span class="hljs-number">5000</span>/<br><br><span class="hljs-section">[log]</span><br><span class="hljs-attr">name</span> = pylog<br><span class="hljs-attr">filename</span> = logs/test_log.log<br><span class="hljs-attr">debug</span> = <span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure>



<h2 id="7-2-iniè§£æ"><a href="#7-2-iniè§£æ" class="headerlink" title="7-2 iniè§£æ"></a>7-2 iniè§£æ</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># test_ini.py</span><br><span class="hljs-comment"># confã€cnfã€cfgæ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨configparseråº“è¿›è¡Œè§£æ</span><br><span class="hljs-comment"># æ–‡ä»¶è§£æä¹‹å‰ï¼Œéœ€è¦å°†å¯¹åº”æ–‡ä»¶çš„æ‰©å±•åæ”¹ä¸º.iniï¼Œç„¶åæŒ‰ä»¥ä¸‹æ“ä½œè¿›è¡Œ</span><br><span class="hljs-keyword">import</span> configparser<br><br><span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªConfigParserå¯¹è±¡</span><br>config = configparser.ConfigParser()<br><span class="hljs-comment"># è¯»å–é…ç½®æ–‡ä»¶</span><br>config.read(<span class="hljs-string">&quot;./file/conf.ini&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>)<br><br><span class="hljs-comment"># è·å–æ‰€æœ‰çš„æ®µåï¼Œå¹¶æ‰“å°è¾“å‡º</span><br>section = config.sections()<br><span class="hljs-built_in">print</span>(section)<br><br><span class="hljs-comment"># è·å–æŒ‡å®šæ®µåä¸‹çš„nameé…ç½®ï¼Œå¹¶æ‰“å°è¾“å‡º</span><br>filename = config.get(<span class="hljs-string">&quot;log&quot;</span>, <span class="hljs-string">&quot;filename&quot;</span>)<br><span class="hljs-built_in">print</span>(filename)<br><br><span class="hljs-comment"># å­—å…¸æ¨¡å¼å–å€¼</span><br><span class="hljs-built_in">print</span>(config[<span class="hljs-string">&quot;project&quot;</span>][<span class="hljs-string">&quot;base_url&quot;</span>])<br><br><span class="hljs-comment"># è·å–æŒ‡å®šæ®µåä¸‹çš„é…ç½®åï¼Œå¹¶æ‰“å°è¾“å‡º</span><br>options = config.options(<span class="hljs-string">&quot;log&quot;</span>)<br><span class="hljs-built_in">print</span>(options)<br><br><span class="hljs-comment"># è·å–æŒ‡å®šæ®µåä¸‹çš„é…ç½®äºŒå…ƒå…ƒç»„ï¼Œå¹¶æ‰“å°è¾“å‡º</span><br>options_tuple = config.items(<span class="hljs-string">&quot;log&quot;</span>)<br><span class="hljs-built_in">print</span>(options_tuple)<br><br><span class="hljs-comment"># è½¬æ¢å€¼çš„ç±»å‹ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œé…ç½®çš„å€¼å…¨éƒ¨ä¼šè¢«è½¬æ¢æˆå­—ç¬¦ä¸²</span><br><span class="hljs-built_in">print</span>(config.getboolean(<span class="hljs-string">&quot;log&quot;</span>, <span class="hljs-string">&quot;debug&quot;</span>))<br><br><span class="hljs-comment"># ä¿®æ”¹é…ç½®é¡¹çš„å€¼</span><br>config.<span class="hljs-built_in">set</span>(<span class="hljs-string">&quot;log&quot;</span>, <span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;test_log&quot;</span>)<br><br><span class="hljs-comment"># å†™å…¥é…ç½®æ–‡ä»¶</span><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;./file/conf.ini&quot;</span>, <span class="hljs-string">&quot;w&quot;</span>) <span class="hljs-keyword">as</span> configfile:<br>    config.write(configfile)<br></code></pre></td></tr></table></figure>



<h2 id="7-3-ymlè§£æ"><a href="#7-3-ymlè§£æ" class="headerlink" title="7-3 ymlè§£æ"></a>7-3 ymlè§£æ</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># test_yml.py</span><br><span class="hljs-keyword">import</span> yaml<br><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;./file/conf.yml&quot;</span>, <span class="hljs-string">&quot;r&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> f:<br>    config = yaml.load(f, Loader=yaml.FullLoader)<br><br><span class="hljs-built_in">print</span>(config)<br></code></pre></td></tr></table></figure>



<h3 id="1-æ•°ç»„æ ¼å¼"><a href="#1-æ•°ç»„æ ¼å¼" class="headerlink" title="(1) æ•°ç»„æ ¼å¼"></a>(1) æ•°ç»„æ ¼å¼</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs Yaml"><span class="hljs-comment"># conf.yml</span><br><span class="hljs-attr">logs:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">logs_array</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">filename:</span> <span class="hljs-string">logs/test_log.log</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">debug:</span> <span class="hljs-literal">True</span><br><br><span class="hljs-comment"># ç­‰ä»·äº</span><br><span class="hljs-comment"># &#123;</span><br><span class="hljs-comment">#     &quot;logs&quot;: [&#123;</span><br><span class="hljs-comment">#         &quot;name&quot;: &quot;logs_array&quot;,</span><br><span class="hljs-comment">#         &quot;filename&quot;: &quot;logs/test_log.log&quot;,</span><br><span class="hljs-comment">#         &quot;debug&quot;: True</span><br><span class="hljs-comment">#     &#125;]</span><br><span class="hljs-comment"># &#125;</span><br></code></pre></td></tr></table></figure>



<h3 id="2-Mapå¯¹è±¡"><a href="#2-Mapå¯¹è±¡" class="headerlink" title="(2) Mapå¯¹è±¡"></a>(2) Mapå¯¹è±¡</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs Yaml"><span class="hljs-comment"># conf.yaml</span><br><span class="hljs-attr">logs:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">logs_map</span><br>    <span class="hljs-attr">filename:</span> <span class="hljs-string">logs/test_log.log</span><br>    <span class="hljs-attr">debug:</span> <span class="hljs-literal">True</span><br><br><span class="hljs-comment"># ç­‰ä»·äº</span><br><span class="hljs-comment"># &#123;</span><br><span class="hljs-comment">#     &quot;logs&quot;:</span><br><span class="hljs-comment">#     &#123;</span><br><span class="hljs-comment">#         &quot;name&quot;: &quot;logs_map&quot;,</span><br><span class="hljs-comment">#         &quot;filename&quot;: &quot;logs/test_log.log&quot;,</span><br><span class="hljs-comment">#         &quot;debug&quot;: True</span><br><span class="hljs-comment">#     &#125;</span><br><span class="hljs-comment"># &#125;</span><br></code></pre></td></tr></table></figure>



<h1 id="8-é¡¹ç›®æ¡†æ¶"><a href="#8-é¡¹ç›®æ¡†æ¶" class="headerlink" title="8 é¡¹ç›®æ¡†æ¶"></a>8 é¡¹ç›®æ¡†æ¶</h1><ul>
<li>é¡¹ç›®æ¡†æ¶<ul>
<li>å•ä¾‹æ¨¡å¼ï¼šå¯¼å…¥æ¨¡å—æ—¶ä¼šæ‰§è¡Œæ¨¡å—æ‰€åœ¨çš„<code>__init__.py</code>æ–‡ä»¶ï¼Œå°†å…¬ç”¨æ¨¡å—æ”¾å…¥æ–‡ä»¶ä»£ç ä¸­ï¼Œä»¥å®ç°å•ä¾‹æ¨¡å¼ã€‚</li>
<li>é…ç½®æ–‡ä»¶å°è£…ï¼šèƒ½å¤„ç†å¤šç§ç±»å‹çš„é…ç½®æ–‡ä»¶ï¼Œè¿”å›å€¼æ•°æ®ç»“æ„ä¸€è‡´ï¼Œç®€å•åŠŸèƒ½å°è£…æˆå‡½æ•°ï¼Œå¤æ‚åŠŸèƒ½å°è£…æˆç±»ã€‚</li>
<li>å˜é‡é…ç½®ï¼šé¡¹ç›®æ ¹ç›®å½•ä¸‹å•ç‹¬ä½¿ç”¨ä¸€ä¸ªPythonæ–‡ä»¶ï¼Œåœ¨å…¶ä¸­å®šä¹‰é…ç½®ä¿¡æ¯ï¼Œå…¶ä»–æ¨¡å—ç›´æ¥å¼•ç”¨æ•ˆç‡æ›´é«˜æ›´ç›´è§‚ã€‚</li>
</ul>
</li>
</ul>
<h2 id="8-1-åŸºæœ¬æ¡†æ¶"><a href="#8-1-åŸºæœ¬æ¡†æ¶" class="headerlink" title="8-1 åŸºæœ¬æ¡†æ¶"></a>8-1 åŸºæœ¬æ¡†æ¶</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs Yaml"><span class="hljs-attr">logs:</span>                               <span class="hljs-comment"># å­˜å‚¨é¡¹ç›®æ—¥å¿—</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">test_log.log</span>                  <span class="hljs-comment"># æµ‹è¯•è¾“å‡ºæ—¥å¿—</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">test_api.log</span><br><span class="hljs-attr">common:</span>                             <span class="hljs-comment"># å­˜å‚¨å…¬ç”¨æ–¹æ³•</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">log_output.py</span>                 <span class="hljs-comment"># æ—¥å¿—åŠŸèƒ½å°è£…</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">http_request.py</span>               <span class="hljs-comment"># è¯·æ±‚åŠŸèƒ½å°è£…</span><br><span class="hljs-attr">reports:</span>                            <span class="hljs-comment"># å­˜å‚¨é¡¹ç›®æŠ¥å‘Š</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">test_xtesttunner.html</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">test_htmltestrunner.html</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">test_beautifulreport.html</span><br><span class="hljs-attr">test_data:</span>                          <span class="hljs-comment"># å­˜å‚¨ç”¨ä¾‹æ•°æ®</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">test_api.csv</span><br><span class="hljs-attr">test_cases:</span>                         <span class="hljs-comment"># å­˜å‚¨æµ‹è¯•ç”¨ä¾‹</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">test_api.py</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">main.py</span>                           <span class="hljs-comment"># ä½œä¸ºå…¥å£å‡½æ•°ï¼Œæ–¹ä¾¿é¡¹ç›®è°ƒè¯•</span><br></code></pre></td></tr></table></figure>



<h3 id="1-main-py"><a href="#1-main-py" class="headerlink" title="(1) main.py"></a>(1) main.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># main.pyï¼Œé¡¹ç›®å…¥å£</span><br><span class="hljs-keyword">import</span> unittest<br><span class="hljs-keyword">from</span> XTestRunner <span class="hljs-keyword">import</span> HTMLTestRunner<br><span class="hljs-comment"># from HTMLTestRunner import HTMLTestRunner</span><br><span class="hljs-comment"># from BeautifulReport import BeautifulReport</span><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    <span class="hljs-comment"># æ”¶é›†æ‰€æœ‰çš„ç”¨ä¾‹ï¼Œå¹¶è¿”å›æµ‹è¯•å¥—ä»¶</span><br>    suite = unittest.TestLoader().discover(<span class="hljs-string">&quot;test_cases&quot;</span>)<br><br>    <span class="hljs-comment"># æ‰§è¡Œæ‰€æœ‰çš„ç”¨ä¾‹ï¼Œå¹¶ç”ŸæˆæŠ¥å‘Š</span><br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;./reports/test_xtesttunner.html&quot;</span>, <span class="hljs-string">&quot;wb&quot;</span>) <span class="hljs-keyword">as</span> f:<br>        runner = HTMLTestRunner(<br>            <span class="hljs-comment"># verbosityå‚æ•°ï¼š0æ˜¯ç®€å•æŠ¥å‘Šï¼Œ1æ˜¯ä¸€èˆ¬æŠ¥å‘Šï¼Œ2æ˜¯è¯¦ç»†æŠ¥å‘Š</span><br>            stream=f, verbosity=<span class="hljs-number">2</span>, title=<span class="hljs-string">&quot;UnitTestæµ‹è¯•æŠ¥å‘Š&quot;</span>,<br>            description=<span class="hljs-string">&quot;UnitTestæµ‹è¯•æŠ¥å‘Šï¼šå†…å®¹æè¿°...&quot;</span><br>        )<br>        result = runner.run(suite)<br><br>    <span class="hljs-comment"># with open(&quot;./reports/test_htmltestrunner.html&quot;, &quot;wb&quot;) as f:</span><br>    <span class="hljs-comment">#     runner = HTMLTestRunner(</span><br>    <span class="hljs-comment">#         stream=f, verbosity=2, title=u&quot;UnitTestæµ‹è¯•æŠ¥å‘Š&quot;,</span><br>    <span class="hljs-comment">#         description=u&quot;UnitTestæµ‹è¯•æŠ¥å‘Šï¼šå†…å®¹æè¿°...&quot;</span><br>    <span class="hljs-comment">#     )</span><br>    <span class="hljs-comment">#     result = runner.run(suite)</span><br><br>    <span class="hljs-comment"># BeautifulReport(suite).report(</span><br>    <span class="hljs-comment">#     # descriptionåœ¨BeautifulReportæŠ¥å‘Šä¸­æ˜¯ç”¨ä¾‹åç§°</span><br>    <span class="hljs-comment">#     description=&quot;UnitTestæ¥å£æµ‹è¯•&quot;,</span><br>    <span class="hljs-comment">#     filename=&quot;./reports/test_beautifulreport.html&quot;</span><br>    <span class="hljs-comment"># )</span><br></code></pre></td></tr></table></figure>



<h3 id="2-test-api-py"><a href="#2-test-api-py" class="headerlink" title="(2) test_api.py"></a>(2) test_api.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># test_api.py</span><br><span class="hljs-keyword">import</span> csv<br><span class="hljs-keyword">import</span> unittest<br><span class="hljs-keyword">from</span> common.log_output <span class="hljs-keyword">import</span> get_logger<br><span class="hljs-keyword">from</span> common.http_request <span class="hljs-keyword">import</span> send_http_request<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">read_csv</span>():<br>    phone_list = []<br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;./test_data/test_api.csv&quot;</span>, <span class="hljs-string">&quot;r&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> f:<br>        filename = csv.reader(f)<br>        <span class="hljs-built_in">next</span>(filename, <span class="hljs-literal">None</span>)<br>        <span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> filename:<br>            <span class="hljs-comment"># ä½¿ç”¨strip()æ–¹æ³•å»é™¤é¢å¤–çš„ç©ºæ ¼</span><br>            cleaned_data = [item.strip() <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> r]<br>            phone_list.append(cleaned_data)<br>        <span class="hljs-keyword">return</span> phone_list<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestAPI</span>(unittest.TestCase):<br>    <span class="hljs-comment"># å°†æ—¥å¿—ç›¸å…³å†…å®¹å®šä¹‰ä¸ºç±»å±æ€§</span><br>    logger = get_logger(<span class="hljs-string">&quot;test_api&quot;</span>, <span class="hljs-string">&quot;logs/test_api.log&quot;</span>, debug=<span class="hljs-literal">True</span>)<br><br><span class="hljs-meta">    @classmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">setUpClass</span>(<span class="hljs-params">cls</span>) -&gt; <span class="hljs-literal">None</span>:<br>        cls.logger.info(<span class="hljs-string">&quot;æ¥å£æµ‹è¯•å¼€å§‹&quot;</span>)<br><br><span class="hljs-meta">    @classmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">tearDownClass</span>(<span class="hljs-params">cls</span>) -&gt; <span class="hljs-literal">None</span>:<br>        cls.logger.info(<span class="hljs-string">&quot;æ¥å£æµ‹è¯•ç»“æŸ&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_api_response</span>(<span class="hljs-params">self</span>):<br>        self.logger.info(<span class="hljs-string">&quot;ç”¨ä¾‹å¼€å§‹æµ‹è¯•&quot;</span>)<br>        <span class="hljs-comment"># 1ã€æµ‹è¯•æ•°æ®</span><br>        <span class="hljs-keyword">for</span> url, method <span class="hljs-keyword">in</span> read_csv():<br>            <span class="hljs-comment"># 2ã€æµ‹è¯•æ­¥éª¤</span><br>            result = send_http_request(url=url, method=method)<br>            self.logger.debug(<span class="hljs-string">&quot;method: &#123;&#125;, url: &#123;&#125;&quot;</span>.<span class="hljs-built_in">format</span>(method, url))<br>            <span class="hljs-comment"># 3ã€çŠ¶æ€ç æ–­è¨€</span><br>            self.assertEqual(result.status_code, <span class="hljs-number">200</span>)<br>        self.logger.info(<span class="hljs-string">&quot;ç”¨ä¾‹ç»“æŸæµ‹è¯•&quot;</span>)<br></code></pre></td></tr></table></figure>



<h3 id="3-test-api-csv"><a href="#3-test-api-csv" class="headerlink" title="(3) test_api.csv"></a>(3) test_api.csv</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs Csv">&lt;!-- test_api.csvï¼Œéœ€ç©ºä¸€è¡Œï¼Œå¦åˆ™æ— æ³•è·å–åˆ°ç¬¬ä¸€è¡Œæ•°æ® --&gt;<br>&lt;!-- æ‰§è¡Œé¡¹ç›®æ—¶ï¼Œå¿…é¡»æŠŠæ³¨é‡Šè¯´æ˜åˆ é™¤ï¼Œå¦åˆ™ç”¨ä¾‹å°†æ‰§è¡Œå¤±è´¥ --&gt;<br><br>https://api.oick.cn/yulu/api.php, GET<br>https://api.oick.cn/lishi/api.php, GET<br>https://api.oick.cn/dutang/api.php, GET<br>https://v.api.aa1.cn/api/yiyan/index.php, GET<br>https://api.thecatapi.com/v1/images/search, GET<br></code></pre></td></tr></table></figure>



<h3 id="4-log-output-py"><a href="#4-log-output-py" class="headerlink" title="(4) log_output.py"></a>(4) log_output.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># log_output.py</span><br><span class="hljs-keyword">import</span> logging<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_logger</span>(<span class="hljs-params">name, filename, mode=<span class="hljs-string">&quot;a&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>, fmt=<span class="hljs-literal">None</span>, debug=<span class="hljs-literal">False</span></span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    :param name: æ—¥å¿—è®°å½•å™¨çš„åç§°</span><br><span class="hljs-string">    :param filename: æ—¥å¿—æ–‡ä»¶å</span><br><span class="hljs-string">    :param mode: æ–‡ä»¶æ¨¡å¼</span><br><span class="hljs-string">    :param encoding: å­—ç¬¦ç¼–ç </span><br><span class="hljs-string">    :param fmt: æ—¥å¿—æ ¼å¼</span><br><span class="hljs-string">    :param debug: è°ƒè¯•æ¨¡å¼</span><br><span class="hljs-string">    :return:</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªæ—¥å¿—è®°å½•å™¨å¹¶è®¾ç½®æ—¥å¿—ç­‰çº§</span><br>    logger = logging.getLogger(name)<br>    logger.setLevel(logging.DEBUG)<br><br>    <span class="hljs-comment"># ç¡®å®šæ—¥å¿—æ–‡ä»¶å’Œæ§åˆ¶å°è¾“å‡ºçš„æ—¥å¿—çº§åˆ«ï¼Œæ–‡ä»¶å¤„ç†å™¨çš„ç­‰çº§ä¸€èˆ¬æƒ…å†µä¸‹æ¯”æ§åˆ¶å°è¦é«˜</span><br>    <span class="hljs-keyword">if</span> debug:<br>        file_level = logging.DEBUG<br>        console_level = logging.DEBUG<br>    <span class="hljs-keyword">else</span>:<br>        file_level = logging.WARNING<br>        console_level = logging.INFO<br><br>    <span class="hljs-comment"># å®šä¹‰æ—¥å¿—çš„è¾“å‡ºæ ¼å¼</span><br>    <span class="hljs-keyword">if</span> fmt <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>        fmt = <span class="hljs-string">&quot;%(asctime)s [%(name)s] [%(filename)s (%(funcName)s:%(lineno)d)] &quot;</span> \<br>              <span class="hljs-string">&quot;%(levelname)s - %(message)s&quot;</span><br><br>    <span class="hljs-comment"># åˆ›å»ºæ—¥å¿—å¤„ç†å™¨ï¼Œå†™å…¥æ–‡ä»¶ä¸­å¹¶è®¾ç½®æ—¥å¿—ç­‰çº§</span><br>    file_handler = logging.FileHandler(filename=filename, mode=mode, encoding=encoding)<br>    file_handler.setLevel(file_level)<br><br>    <span class="hljs-comment"># å†™å…¥æ§åˆ¶å°çš„æ—¥å¿—å¤„ç†å™¨</span><br>    console_handler = logging.StreamHandler()<br>    console_handler.setLevel(console_level)<br><br>    <span class="hljs-comment"># åˆ›å»ºæ ¼å¼åŒ–å™¨å¹¶æ·»åŠ åˆ°æ—¥å¿—å¤„ç†å™¨</span><br>    formatter = logging.Formatter(fmt=fmt)<br>    file_handler.setFormatter(formatter)<br>    console_handler.setFormatter(formatter)<br><br>    <span class="hljs-comment"># å°†æ—¥å¿—å¤„ç†å™¨æ·»åŠ åˆ°æ—¥å¿—å™¨ä¸Š</span><br>    logger.addHandler(file_handler)<br>    logger.addHandler(console_handler)<br><br>    <span class="hljs-comment"># è¿”å›æ—¥å¿—</span><br>    <span class="hljs-keyword">return</span> logger<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    logger = get_logger(name=<span class="hljs-string">&quot;test&quot;</span>, filename=<span class="hljs-string">&quot;../logs/test_log.log&quot;</span>, debug=<span class="hljs-literal">True</span>)<br>    logger.debug(<span class="hljs-string">&quot;è°ƒè¯•æ—¥å¿—&quot;</span>)<br>    logger.info(<span class="hljs-string">&quot;æ™®é€šæ—¥å¿—&quot;</span>)<br>    logger.warning(<span class="hljs-string">&quot;è­¦å‘Šæ—¥å¿—&quot;</span>)<br>    logger.error(<span class="hljs-string">&quot;é”™è¯¯æ—¥å¿—&quot;</span>)<br>    logger.critical(<span class="hljs-string">&quot;ä¸¥é‡é”™è¯¯&quot;</span>)<br></code></pre></td></tr></table></figure>



<h3 id="5-http-request-py"><a href="#5-http-request-py" class="headerlink" title="(5) http_request.py"></a>(5) http_request.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># http_request.py</span><br><span class="hljs-keyword">import</span> requests<br><br><br><span class="hljs-comment"># -&gt;requests.Responseè¡¨ç¤ºè¿”å›çš„ç±»å‹ï¼Œå…¶ä»–æ¨¡å—è°ƒç”¨æ—¶ï¼ŒPycharmä¼šæç¤º</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">send_http_request</span>(<span class="hljs-params">url, method</span>) -&gt; requests.Response:<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    å‘é€httpè¯·æ±‚</span><br><span class="hljs-string">    :param url: è¯·æ±‚è·¯å¾„</span><br><span class="hljs-string">    :param method: è¯·æ±‚æ–¹å¼</span><br><span class="hljs-string">    :return: response</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-keyword">try</span>:<br>        <span class="hljs-keyword">if</span> method.upper() == <span class="hljs-string">&quot;GET&quot;</span>:<br>            response = requests.get(url)<br>            <span class="hljs-keyword">return</span> response<br>        <span class="hljs-keyword">elif</span> method.upper() == <span class="hljs-string">&quot;POST&quot;</span>:<br>            response = requests.post(url)<br>            <span class="hljs-keyword">return</span> response<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">&quot;ä¸æ”¯æŒçš„HTTPæ–¹æ³•ï¼&quot;</span>)<br>    <span class="hljs-keyword">except</span> requests.RequestException <span class="hljs-keyword">as</span> e:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;é”™è¯¯å‘ç”Ÿ: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    <span class="hljs-comment"># æ–¹æ³•çš„è°ƒç”¨</span><br>    result = send_http_request(url=<span class="hljs-string">&quot;https://www.baidu.com&quot;</span>, method=<span class="hljs-string">&quot;GET&quot;</span>)<br>    <span class="hljs-built_in">print</span>(result.status_code)<br></code></pre></td></tr></table></figure>



<h2 id="8-2-å•ä¾‹æ¨¡å¼"><a href="#8-2-å•ä¾‹æ¨¡å¼" class="headerlink" title="8-2 å•ä¾‹æ¨¡å¼"></a>8-2 å•ä¾‹æ¨¡å¼</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs Yaml"><span class="hljs-attr">logs:</span>                               <span class="hljs-comment"># å­˜å‚¨é¡¹ç›®æ—¥å¿—</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">test_log.log</span>                  <span class="hljs-comment"># æµ‹è¯•è¾“å‡ºæ—¥å¿—</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">test_api.log</span><br><span class="hljs-attr">common:</span>                             <span class="hljs-comment"># å­˜å‚¨å…¬ç”¨æ–¹æ³•</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">__init__.py</span>                   <span class="hljs-comment"># ã€âœ”ã€‘å®ç°å•ä¾‹æ¨¡å¼ï¼Œå°†æ—¥å¿—è¾“å‡ºåŠŸèƒ½æ”¾å…¥å…¶ä¸­</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">log_output.py</span>                 <span class="hljs-comment"># æ—¥å¿—åŠŸèƒ½å°è£…</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">http_request.py</span>               <span class="hljs-comment"># è¯·æ±‚åŠŸèƒ½å°è£…</span><br><span class="hljs-attr">reports:</span>                            <span class="hljs-comment"># å­˜å‚¨é¡¹ç›®æŠ¥å‘Š</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">test_xtesttunner.html</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">test_htmltestrunner.html</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">test_beautifulreport.html</span><br><span class="hljs-attr">test_data:</span>                          <span class="hljs-comment"># å­˜å‚¨ç”¨ä¾‹æ•°æ®</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">test_api.csv</span><br><span class="hljs-attr">test_cases:</span>                         <span class="hljs-comment"># å­˜å‚¨æµ‹è¯•ç”¨ä¾‹</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">test_api.py</span>                   <span class="hljs-comment">#ã€âœ”ã€‘ä¿®æ”¹å¯¼å…¥æ¨¡å—ã€ç±»å±æ€§å®šä¹‰æ–¹æ³•</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">main.py</span>                           <span class="hljs-comment"># ä½œä¸ºå…¥å£å‡½æ•°ï¼Œæ–¹ä¾¿é¡¹ç›®è°ƒè¯•</span><br></code></pre></td></tr></table></figure>



<h3 id="1-init-py"><a href="#1-init-py" class="headerlink" title="(1) __init__.py"></a>(1) __init__.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># __init__.py</span><br><span class="hljs-keyword">from</span> .log_output <span class="hljs-keyword">import</span> get_logger<br><br><span class="hljs-comment"># å•ä¾‹æ¨¡å¼ï¼Œé¿å…ç”¨ä¾‹ä¸­è°ƒç”¨çš„æ—¥å¿—æ–¹æ³•æˆ–æ–‡ä»¶ï¼ŒåŒåæ—¶å¯¼è‡´é‡å¤æ·»åŠ å¤šä¸ªæ—¥å¿—å¤„ç†å™¨</span><br>logger = get_logger(<span class="hljs-string">&quot;test_api&quot;</span>, <span class="hljs-string">&quot;logs/test_api.log&quot;</span>, debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>



<h3 id="2-test-api-py-1"><a href="#2-test-api-py-1" class="headerlink" title="(2) test_api.py"></a>(2) test_api.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># test_api.py</span><br><span class="hljs-keyword">import</span> csv<br><span class="hljs-keyword">import</span> unittest<br><span class="hljs-keyword">from</span> common <span class="hljs-keyword">import</span> logger<br><span class="hljs-comment"># from common.log_output import get_logger</span><br><span class="hljs-keyword">from</span> common.http_request <span class="hljs-keyword">import</span> send_http_request<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">read_csv</span>():<br>    phone_list = []<br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;./test_data/test_api.csv&quot;</span>, <span class="hljs-string">&quot;r&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> f:<br>        filename = csv.reader(f)<br>        <span class="hljs-built_in">next</span>(filename, <span class="hljs-literal">None</span>)<br>        <span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> filename:<br>            <span class="hljs-comment"># ä½¿ç”¨strip()æ–¹æ³•å»é™¤é¢å¤–çš„ç©ºæ ¼</span><br>            cleaned_data = [item.strip() <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> r]<br>            phone_list.append(cleaned_data)<br>        <span class="hljs-keyword">return</span> phone_list<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestAPI</span>(unittest.TestCase):<br>    <span class="hljs-comment"># å°†æ—¥å¿—ç›¸å…³å†…å®¹å®šä¹‰ä¸ºç±»å±æ€§</span><br>    <span class="hljs-comment"># logger = get_logger(&quot;test_api&quot;, &quot;logs/test_api.log&quot;, debug=True)</span><br>    logger = logger<br><br><span class="hljs-meta">    @classmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">setUpClass</span>(<span class="hljs-params">cls</span>) -&gt; <span class="hljs-literal">None</span>:<br>        cls.logger.info(<span class="hljs-string">&quot;æ¥å£æµ‹è¯•å¼€å§‹&quot;</span>)<br><br><span class="hljs-meta">    @classmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">tearDownClass</span>(<span class="hljs-params">cls</span>) -&gt; <span class="hljs-literal">None</span>:<br>        cls.logger.info(<span class="hljs-string">&quot;æ¥å£æµ‹è¯•ç»“æŸ&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_api_response</span>(<span class="hljs-params">self</span>):<br>        self.logger.info(<span class="hljs-string">&quot;ç”¨ä¾‹å¼€å§‹æµ‹è¯•&quot;</span>)<br>        <span class="hljs-comment"># 1ã€æµ‹è¯•æ•°æ®</span><br>        <span class="hljs-keyword">for</span> url, method <span class="hljs-keyword">in</span> read_csv():<br>            <span class="hljs-comment"># 2ã€æµ‹è¯•æ­¥éª¤</span><br>            result = send_http_request(url=url, method=method)<br>            self.logger.debug(<span class="hljs-string">&quot;method: &#123;&#125;, url: &#123;&#125;&quot;</span>.<span class="hljs-built_in">format</span>(method, url))<br>            <span class="hljs-comment"># 3ã€çŠ¶æ€ç æ–­è¨€</span><br>            self.assertEqual(result.status_code, <span class="hljs-number">200</span>)<br>        self.logger.info(<span class="hljs-string">&quot;ç”¨ä¾‹ç»“æŸæµ‹è¯•&quot;</span>)<br></code></pre></td></tr></table></figure>



<h2 id="8-3-é…ç½®å°è£…"><a href="#8-3-é…ç½®å°è£…" class="headerlink" title="8-3 é…ç½®å°è£…"></a>8-3 é…ç½®å°è£…</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs Yaml"><span class="hljs-attr">logs:</span>                               <span class="hljs-comment"># å­˜å‚¨é¡¹ç›®æ—¥å¿—</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">test_log.log</span>                  <span class="hljs-comment"># æµ‹è¯•è¾“å‡ºæ—¥å¿—</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">test_api.log</span><br><span class="hljs-attr">common:</span>                             <span class="hljs-comment"># å­˜å‚¨å…¬ç”¨æ–¹æ³•</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">__init__.py</span>                   <span class="hljs-comment"># ã€âœ”ã€‘å®ç°å•ä¾‹æ¨¡å¼ï¼Œå¼•å…¥é…ç½®æ–‡ä»¶å°è£…åçš„åŠŸèƒ½</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">log_output.py</span>                 <span class="hljs-comment"># æ—¥å¿—åŠŸèƒ½å°è£…</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">http_request.py</span>               <span class="hljs-comment"># è¯·æ±‚åŠŸèƒ½å°è£…</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">config_func.py</span>                <span class="hljs-comment"># ã€âœ”ã€‘é…ç½®æ–‡ä»¶å°è£…ï¼Œå‡½æ•°å°è£…ï¼Œä½¿ç”¨conf.yaml</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">config_class.py</span>               <span class="hljs-comment"># ã€âœ”ã€‘é…ç½®æ–‡ä»¶å°è£…ï¼Œç±»å°è£…ï¼Œä½¿ç”¨conf.iniï¼Œä¸å‡½æ•°å°è£…äºŒé€‰ä¸€å³å¯</span><br><span class="hljs-attr">reports:</span>                            <span class="hljs-comment"># å­˜å‚¨é¡¹ç›®æŠ¥å‘Š</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">test_beautifulreport</span><br><span class="hljs-attr">test_data:</span>                          <span class="hljs-comment"># å­˜å‚¨ç”¨ä¾‹æ•°æ®</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">test_api.csv</span><br><span class="hljs-attr">test_cases:</span>                         <span class="hljs-comment"># å­˜å‚¨æµ‹è¯•ç”¨ä¾‹</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">test_api.py</span>                   <span class="hljs-comment"># ã€âœ”ã€‘å¢åŠ å¯¼å…¥æ¨¡å—ã€ä¿®æ”¹ç”¨ä¾‹æ•°æ®è·¯å¾„</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">main.py</span>                           <span class="hljs-comment"># ã€âœ”ã€‘ä½œä¸ºå…¥å£å‡½æ•°ï¼Œä¿®æ”¹ç”ŸæˆæŠ¥å‘Šè·¯å¾„</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">conf.ini</span>                          <span class="hljs-comment"># ã€âœ”ã€‘æ–°å»ºé…ç½®æ–‡ä»¶ini</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">conf.yaml</span>                         <span class="hljs-comment"># ã€âœ”ã€‘æ–°å»ºé…ç½®æ–‡ä»¶yaml</span><br></code></pre></td></tr></table></figure>



<h3 id="1-main-py-1"><a href="#1-main-py-1" class="headerlink" title="(1) main.py"></a>(1) main.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># main.pyï¼Œé¡¹ç›®å…¥å£</span><br><span class="hljs-keyword">import</span> unittest<br><span class="hljs-keyword">from</span> common <span class="hljs-keyword">import</span> config<br><span class="hljs-comment"># from XTestRunner import HTMLTestRunner</span><br><span class="hljs-comment"># from HTMLTestRunner import HTMLTestRunner</span><br><span class="hljs-keyword">from</span> BeautifulReport <span class="hljs-keyword">import</span> BeautifulReport<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    <span class="hljs-comment"># æ”¶é›†æ‰€æœ‰çš„ç”¨ä¾‹ï¼Œå¹¶è¿”å›æµ‹è¯•å¥—ä»¶</span><br>    suite = unittest.TestLoader().discover(<span class="hljs-string">&quot;test_cases&quot;</span>)<br><br>    <span class="hljs-comment"># æ‰§è¡Œæ‰€æœ‰çš„ç”¨ä¾‹ï¼Œå¹¶ç”ŸæˆæŠ¥å‘Š</span><br>    <span class="hljs-comment"># with open(&quot;./reports/test_xtesttunner.html&quot;, &quot;wb&quot;) as f:</span><br>    <span class="hljs-comment">#     runner = HTMLTestRunner(</span><br>    <span class="hljs-comment">#         # verbosityå‚æ•°ï¼š0æ˜¯ç®€å•æŠ¥å‘Šï¼Œ1æ˜¯ä¸€èˆ¬æŠ¥å‘Šï¼Œ2æ˜¯è¯¦ç»†æŠ¥å‘Š</span><br>    <span class="hljs-comment">#         stream=f, verbosity=2, title=&quot;UnitTestæµ‹è¯•æŠ¥å‘Š&quot;,</span><br>    <span class="hljs-comment">#         description=&quot;UnitTestæµ‹è¯•æŠ¥å‘Šï¼šå†…å®¹æè¿°...&quot;</span><br>    <span class="hljs-comment">#     )</span><br>    <span class="hljs-comment">#     result = runner.run(suite)</span><br><br>    <span class="hljs-comment"># with open(&quot;./reports/test_htmltestrunner.html&quot;, &quot;wb&quot;) as f:</span><br>    <span class="hljs-comment">#     runner = HTMLTestRunner(</span><br>    <span class="hljs-comment">#         stream=f, verbosity=2, title=u&quot;UnitTestæµ‹è¯•æŠ¥å‘Š&quot;,</span><br>    <span class="hljs-comment">#         description=u&quot;UnitTestæµ‹è¯•æŠ¥å‘Šï¼šå†…å®¹æè¿°...&quot;</span><br>    <span class="hljs-comment">#     )</span><br>    <span class="hljs-comment">#     result = runner.run(suite)</span><br><br>    <span class="hljs-comment"># BeautifulReport(suite).report(</span><br>    <span class="hljs-comment">#     # descriptionåœ¨BeautifulReportæŠ¥å‘Šä¸­æ˜¯ç”¨ä¾‹åç§°</span><br>    <span class="hljs-comment">#     description=&quot;UnitTestæ¥å£æµ‹è¯•&quot;,</span><br>    <span class="hljs-comment">#     filename=&quot;./reports/test_beautifulreport.html&quot;</span><br>    <span class="hljs-comment"># )</span><br><br>    <span class="hljs-comment"># å…³é”®åœ¨äºè¿™é‡Œçš„é…ç½®ï¼Œä½¿ç”¨BeautifulReportæ–¹æ³•ï¼Œåªç”ŸæˆBeautifulReportæŠ¥å‘Š</span><br>    BeautifulReport(suite).report(**config[<span class="hljs-string">&quot;report&quot;</span>])<br></code></pre></td></tr></table></figure>



<h3 id="2-conf-ini"><a href="#2-conf-ini" class="headerlink" title="(2) conf.ini"></a>(2) conf.ini</h3><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs Ini"><span class="hljs-comment">; conf.ini</span><br><span class="hljs-section">[log]</span><br><span class="hljs-attr">name</span> = pylog<br><span class="hljs-attr">filename</span> = logs/test_api.log<br><span class="hljs-attr">debug</span> = <span class="hljs-literal">True</span><br><br><span class="hljs-section">[testdata]</span><br><span class="hljs-attr">file</span> = test_data/test_api.csv<br><br><span class="hljs-section">[report]</span><br><span class="hljs-attr">filename</span> = reports/test_beautifulreport.html<br><span class="hljs-attr">description</span> = UnitTestæ¥å£æµ‹è¯•<br></code></pre></td></tr></table></figure>



<h3 id="3-conf-yaml"><a href="#3-conf-yaml" class="headerlink" title="(3) conf.yaml"></a>(3) conf.yaml</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs Yaml"><span class="hljs-comment"># conf.yaml</span><br><span class="hljs-attr">log:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">pylog</span><br>    <span class="hljs-attr">filename:</span> <span class="hljs-string">logs/test_api.log</span><br>    <span class="hljs-attr">debug:</span> <span class="hljs-literal">True</span><br><span class="hljs-attr">testdata:</span><br>    <span class="hljs-attr">file:</span> <span class="hljs-string">test_data/test_api.csv</span><br><span class="hljs-attr">report:</span><br>    <span class="hljs-attr">filename:</span> <span class="hljs-string">reports/test_beautifulreport.html</span><br>    <span class="hljs-attr">description:</span> <span class="hljs-string">UnitTestæ¥å£æµ‹è¯•</span><br></code></pre></td></tr></table></figure>



<h3 id="4-test-api-py"><a href="#4-test-api-py" class="headerlink" title="(4) test_api.py"></a>(4) test_api.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># test_api.py</span><br><span class="hljs-keyword">import</span> csv<br><span class="hljs-keyword">import</span> unittest<br><span class="hljs-keyword">from</span> common <span class="hljs-keyword">import</span> logger, config<br><span class="hljs-comment"># from common.log_output import get_logger</span><br><span class="hljs-keyword">from</span> common.http_request <span class="hljs-keyword">import</span> send_http_request<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">read_csv</span>():<br>    phone_list = []<br>    <span class="hljs-comment"># with open(&quot;./test_data/test_api.csv&quot;, &quot;r&quot;, encoding=&quot;utf-8&quot;) as f:</span><br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(config[<span class="hljs-string">&quot;testdata&quot;</span>][<span class="hljs-string">&quot;file&quot;</span>], <span class="hljs-string">&quot;r&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> f:<br>        filename = csv.reader(f)<br>        <span class="hljs-built_in">next</span>(filename, <span class="hljs-literal">None</span>)<br>        <span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> filename:<br>            <span class="hljs-comment"># ä½¿ç”¨strip()æ–¹æ³•å»é™¤é¢å¤–çš„ç©ºæ ¼</span><br>            cleaned_data = [item.strip() <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> r]<br>            phone_list.append(cleaned_data)<br>        <span class="hljs-keyword">return</span> phone_list<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestAPI</span>(unittest.TestCase):<br>    <span class="hljs-comment"># å°†æ—¥å¿—ç›¸å…³å†…å®¹å®šä¹‰ä¸ºç±»å±æ€§</span><br>    <span class="hljs-comment"># logger = get_logger(&quot;test_api&quot;, &quot;logs/test_api.log&quot;, debug=True)</span><br>    logger = logger<br><br><span class="hljs-meta">    @classmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">setUpClass</span>(<span class="hljs-params">cls</span>) -&gt; <span class="hljs-literal">None</span>:<br>        cls.logger.info(<span class="hljs-string">&quot;æ¥å£æµ‹è¯•å¼€å§‹&quot;</span>)<br><br><span class="hljs-meta">    @classmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">tearDownClass</span>(<span class="hljs-params">cls</span>) -&gt; <span class="hljs-literal">None</span>:<br>        cls.logger.info(<span class="hljs-string">&quot;æ¥å£æµ‹è¯•ç»“æŸ&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_api_response</span>(<span class="hljs-params">self</span>):<br>        self.logger.info(<span class="hljs-string">&quot;ç”¨ä¾‹å¼€å§‹æµ‹è¯•&quot;</span>)<br>        <span class="hljs-comment"># 1ã€æµ‹è¯•æ•°æ®</span><br>        <span class="hljs-keyword">for</span> url, method <span class="hljs-keyword">in</span> read_csv():<br>            <span class="hljs-comment"># 2ã€æµ‹è¯•æ­¥éª¤</span><br>            result = send_http_request(url=url, method=method)<br>            self.logger.debug(<span class="hljs-string">&quot;method: &#123;&#125;, url: &#123;&#125;&quot;</span>.<span class="hljs-built_in">format</span>(method, url))<br>            <span class="hljs-comment"># 3ã€çŠ¶æ€ç æ–­è¨€</span><br>            self.assertEqual(result.status_code, <span class="hljs-number">200</span>)<br>        self.logger.info(<span class="hljs-string">&quot;ç”¨ä¾‹ç»“æŸæµ‹è¯•&quot;</span>)<br></code></pre></td></tr></table></figure>



<h3 id="5-init-py"><a href="#5-init-py" class="headerlink" title="(5) __init__.py"></a>(5) __init__.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># __init__.py</span><br><span class="hljs-comment"># from .config_class import Config</span><br><span class="hljs-keyword">from</span> .log_output <span class="hljs-keyword">import</span> get_logger<br><span class="hljs-keyword">from</span> .config_func <span class="hljs-keyword">import</span> get_config<br><br><span class="hljs-comment"># # å•ä¾‹æ¨¡å¼ï¼Œé¿å…ç”¨ä¾‹ä¸­è°ƒç”¨çš„æ—¥å¿—æ–¹æ³•æˆ–æ–‡ä»¶ï¼ŒåŒåæ—¶å¯¼è‡´é‡å¤æ·»åŠ å¤šä¸ªæ—¥å¿—å¤„ç†å™¨</span><br><span class="hljs-comment"># logger = get_logger(&quot;test_api&quot;, &quot;logs/test_api.log&quot;, debug=True)</span><br><br><span class="hljs-comment"># ä½¿ç”¨config_funcè·å–è§£æå‡ºæ¥çš„é…ç½®æ•°æ®å­—å…¸</span><br>config = get_config(<span class="hljs-string">&quot;conf.yaml&quot;</span>)<br><span class="hljs-comment"># å°†å­—å…¸ä¸­logçš„æ•°æ®è§£åŒ…ä¼ å…¥</span><br>logger = get_logger(**config[<span class="hljs-string">&quot;log&quot;</span>])<br><span class="hljs-built_in">print</span>(logger)<br><br><span class="hljs-comment"># # ä½¿ç”¨config_classè·å–è§£æå‡ºæ¥çš„é…ç½®æ•°æ®å­—å…¸</span><br><span class="hljs-comment"># config = Config(&quot;conf.ini&quot;).parse()</span><br><span class="hljs-comment"># logger = get_logger(**config[&quot;log&quot;])</span><br><span class="hljs-comment"># print(logger)</span><br></code></pre></td></tr></table></figure>



<h3 id="6-config-func-py"><a href="#6-config-func-py" class="headerlink" title="(6) config_func.py"></a>(6) config_func.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># config_func.py</span><br><span class="hljs-keyword">import</span> yaml<br><span class="hljs-keyword">from</span> configparser <span class="hljs-keyword">import</span> ConfigParser<br><br><br><span class="hljs-comment"># å‡½æ•°å°è£…ï¼Œå®šä¹‰è¿”å›ç±»å‹ä¸ºå­—å…¸</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_config</span>(<span class="hljs-params">filename, encoding=<span class="hljs-string">&quot;utf-8&quot;</span></span>) -&gt; <span class="hljs-built_in">dict</span>:<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    è·å–é…ç½®æ–‡ä»¶</span><br><span class="hljs-string">    :param filename: æ–‡ä»¶å</span><br><span class="hljs-string">    :param encoding: æ–‡ä»¶ç¼–ç </span><br><span class="hljs-string">    :return: data</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-comment"># è·å–æ–‡ä»¶ååç¼€</span><br>    suffix = filename.split(<span class="hljs-string">&quot;.&quot;</span>)[-<span class="hljs-number">1</span>]<br>    <span class="hljs-comment"># åˆ¤æ–­è¿™ä¸ªé…ç½®æ–‡ä»¶çš„ç±»å‹</span><br>    <span class="hljs-keyword">if</span> suffix <span class="hljs-keyword">in</span> [<span class="hljs-string">&quot;ini&quot;</span>, <span class="hljs-string">&quot;cfg&quot;</span>, <span class="hljs-string">&quot;cnf&quot;</span>]:<br>        <span class="hljs-comment"># inié…ç½®</span><br>        conf = ConfigParser()<br>        conf.read(filename, encoding=encoding)<br>        <span class="hljs-comment"># å°†inié…ç½®ä¿¡æ¯è§£ææˆä¸€ä¸ªå­—å…¸</span><br>        data = &#123;&#125;<br>        <span class="hljs-keyword">for</span> section <span class="hljs-keyword">in</span> conf.sections():<br>            data[section] = <span class="hljs-built_in">dict</span>(conf.items(section))<br>    <span class="hljs-keyword">elif</span> suffix <span class="hljs-keyword">in</span> [<span class="hljs-string">&quot;yaml&quot;</span>, <span class="hljs-string">&quot;yml&quot;</span>]:<br>        <span class="hljs-comment"># yamlé…ç½®</span><br>        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filename, <span class="hljs-string">&quot;r&quot;</span>, encoding=encoding) <span class="hljs-keyword">as</span> f:<br>            data = yaml.load(f, Loader=yaml.FullLoader)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">&quot;ä¸èƒ½è¯†åˆ«çš„é…ç½®æ–‡ä»¶åç¼€åï¼&quot;</span>)<br>    <span class="hljs-keyword">return</span> data<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    result = get_config(<span class="hljs-string">&quot;../conf.yaml&quot;</span>)<br>    <span class="hljs-built_in">print</span>(result)<br></code></pre></td></tr></table></figure>



<h3 id="7-config-class-py"><a href="#7-config-class-py" class="headerlink" title="(7) config_class.py"></a>(7) config_class.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># config_class.py</span><br><span class="hljs-keyword">import</span> yaml<br><span class="hljs-keyword">from</span> configparser <span class="hljs-keyword">import</span> ConfigParser<br><br><br><span class="hljs-comment"># ç±»å°è£…</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Config</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, filename, encoding=<span class="hljs-string">&quot;utf-8&quot;</span></span>):<br>        <span class="hljs-comment"># åˆå§‹åŒ–å·¥ä½œ</span><br>        self.filename = filename<br>        self.encoding = encoding<br>        self.suffix = filename.split(<span class="hljs-string">&quot;.&quot;</span>)[-<span class="hljs-number">1</span>]<br>        <span class="hljs-keyword">if</span> self.suffix <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> [<span class="hljs-string">&quot;ini&quot;</span>, <span class="hljs-string">&quot;conf&quot;</span>, <span class="hljs-string">&quot;cnf&quot;</span>, <span class="hljs-string">&quot;cfg&quot;</span>, <span class="hljs-string">&quot;yml&quot;</span>, <span class="hljs-string">&quot;yaml&quot;</span>]:<br>            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">&quot;ä¸èƒ½è¯†åˆ«çš„é…ç½®æ–‡ä»¶åç¼€åï¼&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__parse_ini</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        è§£æiniã€confã€cnfã€cfgæ–‡ä»¶</span><br><span class="hljs-string">        :return:</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        conf = ConfigParser()<br>        conf.read(self.filename, encoding=self.encoding)<br>        <span class="hljs-comment"># å°†inié…ç½®ä¿¡æ¯è§£ææˆä¸€ä¸ªå¤§å­—å…¸</span><br>        data = &#123;&#125;<br>        <span class="hljs-keyword">for</span> section <span class="hljs-keyword">in</span> conf.sections():<br>            data[section] = <span class="hljs-built_in">dict</span>(conf.items(section))<br>        <span class="hljs-keyword">return</span> data<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__parse_yaml</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        è§£æyamlã€ymlæ–‡ä»¶</span><br><span class="hljs-string">        :return:</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(self.filename, <span class="hljs-string">&quot;r&quot;</span>, encoding=self.encoding) <span class="hljs-keyword">as</span> f:<br>            data = yaml.load(f, Loader=yaml.FullLoader)<br>        <span class="hljs-keyword">return</span> data<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">parse</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        è§£æé…ç½®æ–‡ä»¶</span><br><span class="hljs-string">        :return:</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">if</span> self.suffix <span class="hljs-keyword">in</span> [<span class="hljs-string">&quot;yaml&quot;</span>, <span class="hljs-string">&quot;yml&quot;</span>]:<br>            <span class="hljs-keyword">return</span> self.__parse_yaml()<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">return</span> self.__parse_ini()<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    result = Config(<span class="hljs-string">&quot;../conf.yaml&quot;</span>)<br>    result = result.parse()<br>    <span class="hljs-built_in">print</span>(result)<br>    result = Config(<span class="hljs-string">&quot;../conf.ini&quot;</span>)<br>    result = result.parse()<br>    <span class="hljs-built_in">print</span>(result)<br></code></pre></td></tr></table></figure>



<h2 id="8-4-å˜é‡é…ç½®"><a href="#8-4-å˜é‡é…ç½®" class="headerlink" title="8-4 å˜é‡é…ç½®"></a>8-4 å˜é‡é…ç½®</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs Yaml"><span class="hljs-attr">logs:</span>                               <span class="hljs-comment"># å­˜å‚¨é¡¹ç›®æ—¥å¿—</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">test_log.log</span>                  <span class="hljs-comment"># æµ‹è¯•è¾“å‡ºæ—¥å¿—</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">test_api.log</span><br><span class="hljs-attr">common:</span>                             <span class="hljs-comment"># å­˜å‚¨å…¬ç”¨æ–¹æ³•</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">__init__.py</span>                   <span class="hljs-comment"># ã€âœ”ã€‘å®ç°å•ä¾‹æ¨¡å¼ï¼Œå°†settings.LOG_CONFIGçš„å€¼è§£åŒ…ä¼ å…¥</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">log_output.py</span>                 <span class="hljs-comment"># æ—¥å¿—åŠŸèƒ½å°è£…</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">http_request.py</span>               <span class="hljs-comment"># è¯·æ±‚åŠŸèƒ½å°è£…</span><br><span class="hljs-attr">reports:</span>                            <span class="hljs-comment"># å­˜å‚¨é¡¹ç›®æŠ¥å‘Š</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">test_beautifulreport.html</span><br><span class="hljs-attr">test_data:</span>                          <span class="hljs-comment"># å­˜å‚¨ç”¨ä¾‹æ•°æ®</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">test_api.csv</span><br><span class="hljs-attr">test_cases:</span>                         <span class="hljs-comment"># å­˜å‚¨æµ‹è¯•ç”¨ä¾‹</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">test_api.py</span>                   <span class="hljs-comment"># ã€âœ”ã€‘å¢åŠ å¯¼å…¥æ¨¡å—ã€ä¿®æ”¹ç”¨ä¾‹æ•°æ®è·¯å¾„</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">main.py</span>                           <span class="hljs-comment"># ã€âœ”ã€‘ä½œä¸ºå…¥å£å‡½æ•°ï¼Œä¿®æ”¹ç”ŸæˆæŠ¥å‘Šè·¯å¾„</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">settings.py</span>                       <span class="hljs-comment"># ã€âœ”ã€‘æ–°å»ºé…ç½®æ–‡ä»¶</span><br></code></pre></td></tr></table></figure>



<h3 id="1-main-py-2"><a href="#1-main-py-2" class="headerlink" title="(1) main.py"></a>(1) main.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># main.pyï¼Œé¡¹ç›®å…¥å£</span><br><span class="hljs-keyword">import</span> unittest<br><span class="hljs-keyword">import</span> settings<br><span class="hljs-comment"># from XTestRunner import HTMLTestRunner</span><br><span class="hljs-comment"># from HTMLTestRunner import HTMLTestRunner</span><br><span class="hljs-keyword">from</span> BeautifulReport <span class="hljs-keyword">import</span> BeautifulReport<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    <span class="hljs-comment"># æ”¶é›†æ‰€æœ‰çš„ç”¨ä¾‹ï¼Œå¹¶è¿”å›æµ‹è¯•å¥—ä»¶</span><br>    suite = unittest.TestLoader().discover(<span class="hljs-string">&quot;test_cases&quot;</span>)<br><br>    <span class="hljs-comment"># æ‰§è¡Œæ‰€æœ‰çš„ç”¨ä¾‹ï¼Œå¹¶ç”ŸæˆæŠ¥å‘Š</span><br>    <span class="hljs-comment"># with open(&quot;./reports/test_xtesttunner.html&quot;, &quot;wb&quot;) as f:</span><br>    <span class="hljs-comment">#     runner = HTMLTestRunner(</span><br>    <span class="hljs-comment">#         # verbosityå‚æ•°ï¼š0æ˜¯ç®€å•æŠ¥å‘Šï¼Œ1æ˜¯ä¸€èˆ¬æŠ¥å‘Šï¼Œ2æ˜¯è¯¦ç»†æŠ¥å‘Š</span><br>    <span class="hljs-comment">#         stream=f, verbosity=2, title=&quot;UnitTestæµ‹è¯•æŠ¥å‘Š&quot;,</span><br>    <span class="hljs-comment">#         description=&quot;UnitTestæµ‹è¯•æŠ¥å‘Šï¼šå†…å®¹æè¿°...&quot;</span><br>    <span class="hljs-comment">#     )</span><br>    <span class="hljs-comment">#     result = runner.run(suite)</span><br><br>    <span class="hljs-comment"># with open(&quot;./reports/test_htmltestrunner.html&quot;, &quot;wb&quot;) as f:</span><br>    <span class="hljs-comment">#     runner = HTMLTestRunner(</span><br>    <span class="hljs-comment">#         stream=f, verbosity=2, title=u&quot;UnitTestæµ‹è¯•æŠ¥å‘Š&quot;,</span><br>    <span class="hljs-comment">#         description=u&quot;UnitTestæµ‹è¯•æŠ¥å‘Šï¼šå†…å®¹æè¿°...&quot;</span><br>    <span class="hljs-comment">#     )</span><br>    <span class="hljs-comment">#     result = runner.run(suite)</span><br><br>    <span class="hljs-comment"># BeautifulReport(suite).report(</span><br>    <span class="hljs-comment">#     # descriptionåœ¨BeautifulReportæŠ¥å‘Šä¸­æ˜¯ç”¨ä¾‹åç§°</span><br>    <span class="hljs-comment">#     description=&quot;UnitTestæµ‹è¯•æŠ¥å‘Š&quot;,</span><br>    <span class="hljs-comment">#     filename=&quot;./reports/test_beautifulreport.html&quot;</span><br>    <span class="hljs-comment"># )</span><br>    <br>    <span class="hljs-comment"># å…³é”®åœ¨äºè¿™é‡Œçš„é…ç½®ï¼Œä½¿ç”¨BeautifulReportæ–¹æ³•ï¼Œåªç”ŸæˆBeautifulReportæŠ¥å‘Š</span><br>    <span class="hljs-comment"># BeautifulReport(suite).report(**config[&quot;report&quot;])</span><br>    BeautifulReport(suite).report(**settings.REPORT_CONFIG)<br></code></pre></td></tr></table></figure>



<h3 id="2-settings-py"><a href="#2-settings-py" class="headerlink" title="(2) settings.py"></a>(2) settings.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># æ—¥å¿—é…ç½®</span><br>LOG_CONFIG = &#123;<br>    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;pylog&quot;</span>,<br>    <span class="hljs-string">&quot;filename&quot;</span>: <span class="hljs-string">&quot;logs/test_api.log&quot;</span>,<br>    <span class="hljs-string">&quot;debug&quot;</span>: <span class="hljs-literal">True</span><br>&#125;<br><br><span class="hljs-comment"># æµ‹è¯•æ•°æ®é…ç½®</span><br>TEST_DATA_FILE = <span class="hljs-string">&quot;test_data/test_api.csv&quot;</span><br><br><span class="hljs-comment"># æµ‹è¯•æŠ¥å‘Š</span><br>REPORT_CONFIG = &#123;<br>    <span class="hljs-string">&quot;filename&quot;</span>: <span class="hljs-string">&quot;reports/test_beautifulreport.html&quot;</span>,<br>    <span class="hljs-string">&quot;description&quot;</span>: <span class="hljs-string">&quot;UnitTestæ¥å£æµ‹è¯•&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="3-test-api-py"><a href="#3-test-api-py" class="headerlink" title="(3) test_api.py"></a>(3) test_api.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># test_api.py</span><br><span class="hljs-keyword">import</span> csv<br><span class="hljs-keyword">import</span> unittest<br><span class="hljs-keyword">import</span> settings<br><span class="hljs-keyword">from</span> common <span class="hljs-keyword">import</span> logger<br><span class="hljs-comment"># from common.log_output import get_logger</span><br><span class="hljs-keyword">from</span> common.http_request <span class="hljs-keyword">import</span> send_http_request<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">read_csv</span>():<br>    phone_list = []<br>    <span class="hljs-comment"># with open(&quot;./test_data/test_api.csv&quot;, &quot;r&quot;, encoding=&quot;utf-8&quot;) as f:</span><br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(settings.TEST_DATA_FILE, <span class="hljs-string">&quot;r&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> f:<br>        filename = csv.reader(f)<br>        <span class="hljs-built_in">next</span>(filename, <span class="hljs-literal">None</span>)<br>        <span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> filename:<br>            <span class="hljs-comment"># ä½¿ç”¨strip()æ–¹æ³•å»é™¤é¢å¤–çš„ç©ºæ ¼</span><br>            cleaned_data = [item.strip() <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> r]<br>            phone_list.append(cleaned_data)<br>        <span class="hljs-keyword">return</span> phone_list<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestAPI</span>(unittest.TestCase):<br>    <span class="hljs-comment"># å°†æ—¥å¿—ç›¸å…³å†…å®¹å®šä¹‰ä¸ºç±»å±æ€§</span><br>    <span class="hljs-comment"># logger = get_logger(&quot;test_api&quot;, &quot;logs/test_api.log&quot;, debug=True)</span><br>    logger = logger<br><br><span class="hljs-meta">    @classmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">setUpClass</span>(<span class="hljs-params">cls</span>) -&gt; <span class="hljs-literal">None</span>:<br>        cls.logger.info(<span class="hljs-string">&quot;æ¥å£æµ‹è¯•å¼€å§‹&quot;</span>)<br><br><span class="hljs-meta">    @classmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">tearDownClass</span>(<span class="hljs-params">cls</span>) -&gt; <span class="hljs-literal">None</span>:<br>        cls.logger.info(<span class="hljs-string">&quot;æ¥å£æµ‹è¯•ç»“æŸ&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_api_response</span>(<span class="hljs-params">self</span>):<br>        self.logger.info(<span class="hljs-string">&quot;ç”¨ä¾‹å¼€å§‹æµ‹è¯•&quot;</span>)<br>        <span class="hljs-comment"># 1ã€æµ‹è¯•æ•°æ®</span><br>        <span class="hljs-keyword">for</span> url, method <span class="hljs-keyword">in</span> read_csv():<br>            <span class="hljs-comment"># 2ã€æµ‹è¯•æ­¥éª¤</span><br>            result = send_http_request(url=url, method=method)<br>            self.logger.debug(<span class="hljs-string">&quot;method: &#123;&#125;, url: &#123;&#125;&quot;</span>.<span class="hljs-built_in">format</span>(method, url))<br>            <span class="hljs-comment"># 3ã€çŠ¶æ€ç æ–­è¨€</span><br>            self.assertEqual(result.status_code, <span class="hljs-number">200</span>)<br>        self.logger.info(<span class="hljs-string">&quot;ç”¨ä¾‹ç»“æŸæµ‹è¯•&quot;</span>)<br></code></pre></td></tr></table></figure>



<h3 id="4-init-py"><a href="#4-init-py" class="headerlink" title="(4) __init__.py"></a>(4) __init__.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># __init__.py</span><br><span class="hljs-keyword">import</span> settings<br><span class="hljs-keyword">from</span> .log_output <span class="hljs-keyword">import</span> get_logger<br><br><span class="hljs-comment"># # å•ä¾‹æ¨¡å¼ï¼Œé¿å…ç”¨ä¾‹ä¸­è°ƒç”¨çš„æ—¥å¿—æ–¹æ³•æˆ–æ–‡ä»¶ï¼ŒåŒåæ—¶å¯¼è‡´é‡å¤æ·»åŠ å¤šä¸ªæ—¥å¿—å¤„ç†å™¨</span><br><span class="hljs-comment"># logger = get_logger(&quot;test_api&quot;, &quot;logs/test_api.log&quot;, debug=True)</span><br><br><span class="hljs-comment"># å°†settings.LOG_CONFIGçš„å€¼è§£åŒ…ä¼ å…¥</span><br>logger = get_logger(**settings.LOG_CONFIG)<br></code></pre></td></tr></table></figure>



              
            </div>
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6/" class="category-chain-item">æµ‹è¯•æ¡†æ¶</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Python/">#Python</a>
      
        <a href="/tags/UnitTest/">#UnitTest</a>
      
        <a href="/tags/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/">#å•å…ƒæµ‹è¯•</a>
      
        <a href="/tags/%E6%B5%8B%E8%AF%95%E5%A5%97%E4%BB%B6/">#æµ‹è¯•å¥—ä»¶</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>UnitTest æµ‹è¯•æ¡†æ¶</div>
      <div>https://stitch-top.github.io/2023/07/23/ce-shi-kuang-jia/tf04-unittest/tf01-unittest-ce-shi-kuang-jia/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>ä½œè€…</div>
          <div>Dr.626</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>å‘å¸ƒäº</div>
          <div>2023å¹´7æœˆ23æ—¥ 21:11:00</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>è®¸å¯åè®®</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - ç½²å">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
              <a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
              <span class="hint--top hint--rounded" aria-label="NC - éå•†ä¸šæ€§ä½¿ç”¨">
                <i class="iconfont icon-nc"></i>
              </span>
              </a>
            
              <a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
              <span class="hint--top hint--rounded" aria-label="SA - ç›¸åŒæ–¹å¼å…±äº«">
                <i class="iconfont icon-sa"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2023/09/09/ce-shi-kuang-jia/tf05-playwright/tf01-playwright-kuang-jia-yi/" title="PlayWright æ¡†æ¶(ä¸€)">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">PlayWright æ¡†æ¶(ä¸€)</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2023/05/01/ce-shi-kuang-jia/tf03-allure/tf01-allure-ce-shi-bao-gao/" title="Allure æµ‹è¯•æŠ¥å‘Š">
                        <span class="hidden-mobile">Allure æµ‹è¯•æŠ¥å‘Š</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  <article id="comments">
    
  <div id="valine"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#valine', function() {
      Fluid.utils.createScript('https://cdn.staticfile.org/valine/1.5.1/Valine.min.js', function() {
        var options = Object.assign(
          {"appId":"Jg3BjUa3RtnEFSREy3wsmUR5-MdYXbMMI","appKey":"DwsEb5BeMxwdz0CEJ6MUBdu3","path":"window.location.pathname","placeholder":"èµ äººç«ç‘°ï¼Œæ‰‹ç•™ä½™é¦™(ï½oï¿£3ï¿£)ï½","avatar":"monsterid","meta":["nick","mail","link"],"requiredFields":["nick","mail"],"pageSize":13,"lang":"zh-CN","highlight":"ture","recordIP":"ture","serverURLs":"","emojiCDN":null,"emojiMaps":null,"enableQQ":"ture"},
          {
            el: "#valine",
            path: window.location.pathname
          }
        )
        new Valine(options);
        Fluid.utils.waitElementVisible('#valine .vcontent', () => {
          var imgSelector = '#valine .vcontent img:not(.vemoji)';
          Fluid.plugins.imageCaption(imgSelector);
          Fluid.plugins.fancyBox(imgSelector);
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


  </article>


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar category-bar" style="margin-left: -1rem">
    





<div class="category-list">
  
  
    
    
    
    <div class="category row nomargin-x">
      <a class="category-item 
          list-group-item category-item-action col-10 col-md-11 col-xm-11" title="æµ‹è¯•æ¡†æ¶"
        id="heading-893b664e5ce5fe8882ce6ce630f2f650" role="tab" data-toggle="collapse" href="#collapse-893b664e5ce5fe8882ce6ce630f2f650"
        aria-expanded="true"
      >
        æµ‹è¯•æ¡†æ¶
        <span class="list-group-count">(8)</span>
        <i class="iconfont icon-arrowright"></i>
      </a>
      
      <div class="category-collapse collapse show" id="collapse-893b664e5ce5fe8882ce6ce630f2f650"
           role="tabpanel" aria-labelledby="heading-893b664e5ce5fe8882ce6ce630f2f650">
        
        
          
  <div class="category-post-list">
    
    
      
      
        <a href="/2023/01/08/ce-shi-kuang-jia/tf01-selenium/tf01-selenium/" title="Selenium"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Selenium</span>
        </a>
      
    
      
      
        <a href="/2023/03/03/ce-shi-kuang-jia/tf02-pytest/tf01-pytest-ce-shi-kuang-jia/" title="Pytest æµ‹è¯•æ¡†æ¶"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Pytest æµ‹è¯•æ¡†æ¶</span>
        </a>
      
    
      
      
        <a href="/2023/05/01/ce-shi-kuang-jia/tf03-allure/tf01-allure-ce-shi-bao-gao/" title="Allure æµ‹è¯•æŠ¥å‘Š"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Allure æµ‹è¯•æŠ¥å‘Š</span>
        </a>
      
    
      
      
        <a href="/2023/07/23/ce-shi-kuang-jia/tf04-unittest/tf01-unittest-ce-shi-kuang-jia/" title="UnitTest æµ‹è¯•æ¡†æ¶"
           class="list-group-item list-group-item-action
           active">
          <span class="category-post">UnitTest æµ‹è¯•æ¡†æ¶</span>
        </a>
      
    
      
      
        <a href="/2024/03/02/ce-shi-kuang-jia/tf04-unittest/tf02-unittest-zi-bao-mock/" title="UnitTest å­åŒ… Mock"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">UnitTest å­åŒ… Mock</span>
        </a>
      
    
      
      
        <a href="/2023/09/09/ce-shi-kuang-jia/tf05-playwright/tf01-playwright-kuang-jia-yi/" title="PlayWright æ¡†æ¶(ä¸€)"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">PlayWright æ¡†æ¶(ä¸€)</span>
        </a>
      
    
      
      
        <a href="/2023/11/02/ce-shi-kuang-jia/tf05-playwright/tf02-playwright-kuang-jia-er/" title="PlayWright æ¡†æ¶(äºŒ)"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">PlayWright æ¡†æ¶(äºŒ)</span>
        </a>
      
    
      
      
        <a href="/2024/07/16/ce-shi-kuang-jia/tf06-robot-framework/tf01-robot-framework/" title="Robot Framework"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Robot Framework</span>
        </a>
      
    
  </div>

        
      </div>
    </div>
  
</div>


  </aside>


    </div>
  </div>
</div>





  



  



  



  



  






    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a><span>Copyright Â© 2021 - 2024</span></a> <i class="iconfont icon-love"></i> <a href="https://stitch-top.github.io" target="_blank" rel="nofollow noopener"><span>Dr.626</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="leancloud-site-pv-container" style="display: none">
        ğŸ“ˆ æ€»è®¿é—®é‡ 
        <span id="leancloud-site-pv"></span>
         æ¬¡
      </span>
    
    
      <span id="leancloud-site-uv-container" style="display: none">
        ğŸ“Š æ€»è®¿å®¢æ•° 
        <span id="leancloud-site-uv"></span>
         äºº
      </span>
    
    

  
</div>

  
  
  
  
  <!-- æ·»åŠ ç½‘ç«™è¿è¡Œæ—¶é—´ -->
  <div class="footer-content">
    <div>
      <span id="timeDate">è½½å…¥å¤©æ•°...</span>
      <span id="times">è½½å…¥æ—¶åˆ†ç§’...</span>
      <script>
      var now = new Date();
      function createtime(){
          var grt= new Date("01/01/2021 00:00:00");   //æ­¤å¤„ä¿®æ”¹ä½ çš„å»ºç«™æ—¶é—´æˆ–è€…ç½‘ç«™ä¸Šçº¿æ—¶é—´
          now.setTime(now.getTime()+250);
          days = (now - grt ) / 1000 / 60 / 60 / 24;
          dnum = Math.floor(days);
          hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum);
          hnum = Math.floor(hours);
          if(String(hnum).length ==1 ){
              hnum = "0" + hnum;
          }
          minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
          mnum = Math.floor(minutes);
          if(String(mnum).length ==1 ){
                    mnum = "0" + mnum;
          }
          seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
          snum = Math.round(seconds);
          if(String(snum).length ==1 ){
                    snum = "0" + snum;
          }
          document.getElementById("timeDate").innerHTML = "æœ¬ç«™å·²å®‰å…¨è¿è¡Œ&nbsp"+dnum+"&nbspå¤©";
          document.getElementById("times").innerHTML = hnum + "&nbspå°æ—¶&nbsp" + mnum + "&nbspåˆ†&nbsp" + snum + "&nbspç§’";
      }
      setInterval("createtime()", 250);
      </script>
    </div>
  </div>
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.staticfile.org/jquery/3.7.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  

  

  

  

  

  

  
    
  




  
    
      <script  src="/js/img-lazyload.js" ></script>
    
  




  
<script>
  Fluid.utils.createScript('https://cdn.staticfile.org/tocbot/4.21.0/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script>
  (function() {
    var enableLang = CONFIG.code_language.enable && CONFIG.code_language.default;
    var enableCopy = CONFIG.copy_btn;
    if (!enableLang && !enableCopy) {
      return;
    }

    function getBgClass(ele) {
      return Fluid.utils.getBackgroundLightness(ele) >= 0 ? 'code-widget-light' : 'code-widget-dark';
    }

    var copyTmpl = '';
    copyTmpl += '<div class="code-widget">';
    copyTmpl += 'LANG';
    copyTmpl += '</div>';
    jQuery('.markdown-body pre').each(function() {
      var $pre = jQuery(this);
      if ($pre.find('code.mermaid').length > 0) {
        return;
      }
      if ($pre.find('span.line').length > 0) {
        return;
      }

      var lang = '';

      if (enableLang) {
        lang = CONFIG.code_language.default;
        if ($pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2 && $pre.children().hasClass('hljs')) {
          lang = $pre[0].children[0].classList[1];
        } else if ($pre[0].getAttribute('data-language')) {
          lang = $pre[0].getAttribute('data-language');
        } else if ($pre.parent().hasClass('sourceCode') && $pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2) {
          lang = $pre[0].children[0].classList[1];
          $pre.parent().addClass('code-wrapper');
        } else if ($pre.parent().hasClass('markdown-body') && $pre[0].classList.length === 0) {
          $pre.wrap('<div class="code-wrapper"></div>');
        }
        lang = lang.toUpperCase().replace('NONE', CONFIG.code_language.default);
      }
      $pre.append(copyTmpl.replace('LANG', lang).replace('code-widget">',
        getBgClass($pre[0]) + (enableCopy ? ' code-widget copy-btn" data-clipboard-snippet><i class="iconfont icon-copy"></i>' : ' code-widget">')));

      if (enableCopy) {
        Fluid.utils.createScript('https://cdn.staticfile.org/clipboard.js/2.0.11/clipboard.min.js', function() {
          var clipboard = new window.ClipboardJS('.copy-btn', {
            target: function(trigger) {
              var nodes = trigger.parentNode.childNodes;
              for (var i = 0; i < nodes.length; i++) {
                if (nodes[i].tagName === 'CODE') {
                  return nodes[i];
                }
              }
            }
          });
          clipboard.on('success', function(e) {
            e.clearSelection();
            e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-copy', 'icon-success');
            setTimeout(function() {
              e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-success', 'icon-copy');
            }, 2000);
          });
        });
      }
    });
  })();
</script>


  
<script>
  Fluid.utils.createScript('https://cdn.staticfile.org/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="/js/leancloud.js" ></script>





<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ï¼Œå°†å®ƒä¿æŒåœ¨æœ€åº•éƒ¨ -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">åšå®¢åœ¨å…è®¸ JavaScript è¿è¡Œçš„ç¯å¢ƒä¸‹æµè§ˆæ•ˆæœæ›´ä½³</div>
  </noscript>
</body>
</html>
