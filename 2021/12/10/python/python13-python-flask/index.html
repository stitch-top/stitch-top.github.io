

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/logo.png">
  <link rel="icon" href="/img/logo.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Dr.626">
  <meta name="keywords" content="">
  
    <meta name="description" content="ğŸ¦ Pythonç¼–å†™çš„Webåº”ç”¨ç¨‹åºæ¡†æ¶ï¼ŒåŸºäºWerkzeug WSGIå·¥å…·åŒ…å’ŒJinja2æ¨¡æ¿å¼•æ“ï¼ŒArmin Ronacherå¸¦é¢†Poccoå›¢é˜Ÿå¼€å‘ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="Python Flask">
<meta property="og:url" content="https://stitch-top.github.io/2021/12/10/python/python13-python-flask/index.html">
<meta property="og:site_name" content="Dr.626">
<meta property="og:description" content="ğŸ¦ Pythonç¼–å†™çš„Webåº”ç”¨ç¨‹åºæ¡†æ¶ï¼ŒåŸºäºWerkzeug WSGIå·¥å…·åŒ…å’ŒJinja2æ¨¡æ¿å¼•æ“ï¼ŒArmin Ronacherå¸¦é¢†Poccoå›¢é˜Ÿå¼€å‘ã€‚">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://stitch-top.github.io/img/ThemeMap/3306520481.jpg">
<meta property="article:published_time" content="2021-12-10T14:43:15.000Z">
<meta property="article:modified_time" content="2024-06-17T06:41:47.269Z">
<meta property="article:author" content="Dr.626">
<meta property="article:tag" content="Flask">
<meta property="article:tag" content="Routes">
<meta property="article:tag" content="Templates">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://stitch-top.github.io/img/ThemeMap/3306520481.jpg">
  
  
  
  <title>Python Flask - Dr.626</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  



  
<link rel="stylesheet" href="/css/my.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"stitch-top.github.io","root":"/","version":"1.9.0","typing":{"enable":true,"typeSpeed":70,"cursorChar":"|","loop":true,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":"âœ"},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"left","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":1},"lazyload":{"enable":true,"loading_img":"/img/load.gif","onlypost":true,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":"Jg3BjUa3RtnEFSREy3wsmUR5-MdYXbMMI","app_key":"DwsEb5BeMxwdz0CEJ6MUBdu3","server_url":null,"path":"window.location.pathname","ignore_local":true}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>

  
  
<meta name="generator" content="Hexo 6.2.0"></head>


<body>
  
  

  <header>
    

<div class="header-inner" style="height: 100vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Dr.626</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                é¦–é¡µ
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                å½’æ¡£
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                åˆ†ç±»
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                æ ‡ç­¾
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                å…³äº
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                å‹é“¾
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button"
                 data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="iconfont icon-code"></i>
                å®éªŒå®¤
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                  
                  
                  
                  <a class="dropdown-item" href="/tagsnet">
                    <i class="iconfont icon-bookmark"></i>
                    æ–‡ç« å…³ç³»ç½‘
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/laboratory/plugin">
                    <i class="iconfont icon-bug"></i>
                    Hexoå°ç»„ä»¶
                  </a>
                
              </div>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/back-1.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Python Flask"></span>
          
        </div>

        
          
  <div class="mt-3">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-author" aria-hidden="true"></i>
        Dr.626
      </span>
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2021-12-10 22:43" pubdate>
          2021å¹´12æœˆ10æ—¥ 22:43:15
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          72k å­—
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          601 åˆ†é’Ÿ
        
      </span>
    

    
    
      
        <span id="leancloud-page-views-container" class="post-meta" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="leancloud-page-views"></span> æ¬¡
        </span>
        
      
    
  </div>


        
      </div>

      
        <div class="scroll-down-bar">
          <i class="iconfont icon-arrowdown"></i>
        </div>
      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
  
  <!-- åŠ¨æ€çº¿æ¡èƒŒæ™¯
  <script type="text/javascript"
  color="0 0 255" opacity='1' zIndex="-2" count="200" src="../js/canvas-nest.js">
  </script> -->
  
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="padding-left: 2rem; margin-right: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;ç›®å½•</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Python Flask</h1>
            
            <div class="markdown-body">
              
              <p>ğŸ¦ Pythonç¼–å†™çš„Webåº”ç”¨ç¨‹åºæ¡†æ¶ï¼ŒåŸºäºWerkzeug WSGIå·¥å…·åŒ…å’ŒJinja2æ¨¡æ¿å¼•æ“ï¼ŒArmin Ronacherå¸¦é¢†Poccoå›¢é˜Ÿå¼€å‘ã€‚</p>
<span id="more"></span>



<h1 id="1-å¾®æ¡†æ¶"><a href="#1-å¾®æ¡†æ¶" class="headerlink" title="1 å¾®æ¡†æ¶"></a>1 å¾®æ¡†æ¶</h1><ul>
<li>å¾®æ¡†æ¶<ul>
<li>WSGIï¼šWebæœåŠ¡å™¨çš„ç½‘å…³æ¥å£ï¼ŒWebæœåŠ¡å™¨å’ŒWebåº”ç”¨ç¨‹åºä¹‹é—´é€šç”¨æ¥å£çš„è§„èŒƒã€‚</li>
<li>Werkzeugï¼šä¸€ä¸ªWSGIå·¥å…·åŒ…ï¼Œå®ç°äº†è¯·æ±‚ã€å“åº”å¯¹è±¡å’Œå®ç”¨å‡½æ•°ï¼Œèƒ½åœ¨ä¸Šé¢æ„å»ºWebæ¡†æ¶ã€‚</li>
<li>jinja2ï¼šPythonçš„ä¸€ä¸ªæµè¡Œæ¨¡æ¿å¼•æ“ï¼ŒWebæ¨¡æ¿ç³»ç»Ÿå°†æ¨¡æ¿ä¸ç‰¹å®šæ•°æ®æºç»„åˆä»¥å‘ˆç°åŠ¨æ€ç½‘é¡µã€‚</li>
<li>å‘½ä»¤çª—å£ä¸‹ä½¿ç”¨PIPè¿›è¡Œå®‰è£…ï¼š<code>pip install Flask</code>ï¼Œæµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸï¼Œæ–°å»ºhello.pyæ–‡ä»¶ã€‚<ul>
<li><code>app.route(rule, options)</code><ul>
<li>route()å‡½æ•°æ˜¯ä¸€ä¸ªè£…é¥°å™¨ï¼Œå‘Šè¯‰åº”ç”¨ç¨‹åºå“ªä¸ªURLåº”è¯¥è°ƒç”¨ç›¸å…³çš„å‡½æ•°ã€‚</li>
<li>ruleè¡¨ç¤ºä¸è¯¥å‡½æ•°çš„URLç»‘å®šï¼Œoptionsæ˜¯è½¬å‘ç»™åŸºç¡€ruleå¯¹è±¡çš„å‚æ•°åˆ—è¡¨ã€‚</li>
</ul>
</li>
<li><code>app.run(host, port, debug, options)</code><ul>
<li>hostï¼šä¸»æœºåï¼Œé»˜è®¤ä¸º127.0.0.1(localhost)ï¼Œè®¾ä¸º0.0.0.0ä»¥ä½¿æœåŠ¡å™¨åœ¨å¤–éƒ¨å¯ç”¨ã€‚</li>
<li>portï¼šç«¯å£å·ï¼Œé»˜è®¤å€¼ä¸º5000ã€‚</li>
<li>debugï¼šé»˜è®¤falseï¼Œè®¾ä¸ºtrueæä¾›è°ƒè¯•ä¿¡æ¯ã€‚</li>
<li>optionsï¼šè¦è½¬å‘åˆ°åº•å±‚çš„WerkzeugæœåŠ¡å™¨ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask                             <span class="hljs-comment"># hello.pyæ–‡ä»¶ï¼Œå¯¼å…¥Flaskæ¨¡å—éªŒè¯æµ‹è¯•</span><br><br>app = Flask(__name__)                               <span class="hljs-comment"># Flaskæ„é€ å‡½æ•°ä½¿ç”¨å½“å‰æ¨¡å—__nameçš„åç§°ä½œä¸ºå‚æ•°</span><br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/&quot;</span></span>)                                     </span><span class="hljs-comment"># Flaskç±»çš„route()æ˜¯ä¸€ä¸ªè£…é¥°å™¨ï¼Œå‘Šè¯‰ç¨‹åºå“ªä¸ªURLåº”è°ƒç”¨ç›¸å…³å‡½æ•°</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">hello_world</span>():                                  <span class="hljs-comment"># &quot;/&quot;URLä¸å‡½æ•°ç»‘å®š</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&lt;center&gt;Hello World!&lt;/center&gt;&quot;</span><br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:                          <span class="hljs-comment"># Flaskä¸­æ–‡ç½‘ï¼šhttps://flask.net.cn/</span><br>    app.run()                                       <span class="hljs-comment"># Flaskç±»çš„run()æ–¹æ³•æ˜¯åœ¨æœ¬åœ°å¼€å‘æœåŠ¡å™¨ä¸Šè¿è¡Œåº”ç”¨ç¨‹åº</span><br></code></pre></td></tr></table></figure>



<h2 id="1-1-éªŒè¯æµ‹è¯•"><a href="#1-1-éªŒè¯æµ‹è¯•" class="headerlink" title="1-1 éªŒè¯æµ‹è¯•"></a>1-1 éªŒè¯æµ‹è¯•</h2><ul>
<li>éªŒè¯æµ‹è¯•<ul>
<li>å‘½ä»¤çª—å£è¿›å…¥hello.pyæ–‡ä»¶å¯¹åº”çš„ç›®å½•ä¸­ï¼Œ<code>python hello.py</code>æ‰§è¡Œå‘½ä»¤ã€‚</li>
<li>åœ¨æµè§ˆå™¨çš„ä»»åŠ¡æ ä¸­è¾“å…¥â€œ<u><a target="_blank" rel="noopener" href="http://127.0.0.1:5000/">http://127.0.0.1:5000/</a></u>â€ï¼Œå›è½¦è¿›è¡ŒæŸ¥çœ‹ã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs Powershell">python hello.py<br><br> * Serving Flask app <span class="hljs-string">&quot;hello&quot;</span> (lazy loading)<br> * Environment: production<br>   WARNING: This is a development server. <span class="hljs-keyword">Do</span> not use it <span class="hljs-keyword">in</span> a production deployment.     <br>   Use a production WSGI server instead.<br> * Debug mode: off<br> * Running on http://<span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>:<span class="hljs-number">5000</span>/ (Press CTRL+C to quit)<br><br><span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span> - - [<span class="hljs-number">01</span>/<span class="hljs-type">Oct</span>/<span class="hljs-number">2023</span> <span class="hljs-number">17</span>:<span class="hljs-number">07</span>:<span class="hljs-number">14</span>] <span class="hljs-string">&quot;GET / HTTP/1.1&quot;</span> <span class="hljs-number">200</span> -<br></code></pre></td></tr></table></figure>



<h2 id="1-2-è°ƒè¯•æ¨¡å¼"><a href="#1-2-è°ƒè¯•æ¨¡å¼" class="headerlink" title="1-2 è°ƒè¯•æ¨¡å¼"></a>1-2 è°ƒè¯•æ¨¡å¼</h2><ul>
<li>è°ƒè¯•æ¨¡å¼<ul>
<li>å½“åº”ç”¨ç¨‹åºå¤„äºå¼€å‘çŠ¶æ€æ—¶ï¼Œå¦‚æœä»£ç è¿›è¡Œäº†æ›´æ”¹ï¼Œåˆ™éœ€è¦æ¯æ¬¡éƒ½é‡å¯æ›´æ–°ï¼Œæ“ä½œååˆ†ä¸ä¾¿ã€‚</li>
<li>ä¸ºäº†é¿å…é¢‘ç¹æ‰‹åŠ¨é‡å¯æ›´æ–°ï¼Œå¯ä»¥å¼€å¯è°ƒè¯•æ¨¡å¼ï¼Œå¦‚æœä»£ç æ›´æ”¹äº†ï¼ŒæœåŠ¡å™¨å°†è‡ªè¡Œé‡æ–°åŠ è½½ã€‚</li>
<li>è°ƒè¯•æ¨¡å¼è¿˜æä¾›äº†ä¸€ä¸ªæœ‰ç”¨çš„è°ƒè¯•å™¨ï¼Œç”¨äºè·Ÿè¸ªåº”ç”¨ç¨‹åºä¸­çš„é”™è¯¯ï¼Œæœ‰ä¸¤ç§è¯­æ³•æ ¼å¼çš„ä¹¦å†™ã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask<br><br>app = Flask(__name__)<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">hello_world</span>():                                  <span class="hljs-comment"># æµè§ˆå™¨è®¿é—®[127.0.0.1:5000]æ—¶ï¼Œæ˜¾ç¤º&quot;Hello World!&quot;</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&lt;center&gt;Hello World!&lt;/center&gt;&quot;</span><br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    app.debug = <span class="hljs-literal">True</span>                                <span class="hljs-comment"># è°ƒè¯•æ¨¡å¼ä¸‹ï¼Œè‹¥ä»£ç æ›´æ”¹ï¼ŒæœåŠ¡å™¨å°†è‡ªè¡Œé‡æ–°åŠ è½½</span><br>    app.run()                                       <span class="hljs-comment"># è¿˜æä¾›äº†ä¸€ä¸ªæœ‰ç”¨çš„è°ƒè¯•å™¨æ¥è·Ÿè¸ªåº”ç”¨ç¨‹åºä¸­çš„é”™è¯¯</span><br>    <span class="hljs-comment"># app.run(debug=True)                           # æˆ–å°†runä¸debugå†™æˆä¸€ä¸ªå‡½æ•°å¸¦å‚å½¢å¼</span><br></code></pre></td></tr></table></figure>



<h2 id="1-3-è·¯ç”±æŠ€æœ¯"><a href="#1-3-è·¯ç”±æŠ€æœ¯" class="headerlink" title="1-3 è·¯ç”±æŠ€æœ¯"></a>1-3 è·¯ç”±æŠ€æœ¯</h2><ul>
<li>è·¯ç”±æŠ€æœ¯<ul>
<li>route()è£…é¥°å™¨ç”¨äºå°†URLä¸å‡½æ•°è¿›è¡Œç»‘å®šï¼Œå¯ç›´æ¥è®¿é—®æƒ³è®¿é—®çš„é¡µé¢ï¼Œä¸ç”¨å†ä»ä¸»é¡µå¼€å§‹å¯¼èˆªäº†ã€‚</li>
<li>è‹¥URLâ€œ<u>&#x2F;hello</u>â€è§„åˆ™ç»‘å®šåˆ°hello_world()å‡½æ•°ï¼Œåˆ™æµè§ˆå™¨è®¿é—®â€œ<u><a target="_blank" rel="noopener" href="http://localhost:5000/hello">http://localhost:5000/hello</a></u>â€ã€‚</li>
<li>add_url_rule()å‡½æ•°ä¹Ÿå¯ä»¥ç”¨äºå°†URLä¸å‡½æ•°è¿›è¡Œç»‘å®šã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask<br><br>app = Flask(__name__)<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/hello&quot;</span></span>)                                </span><span class="hljs-comment"># è®¿é—®[http://127.0.0.1:5000/hello]</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">hello_world</span>():<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&lt;center&gt;Hello World!&lt;/center&gt;&quot;</span><br><br><br>app.add_url_rule(                                   <span class="hljs-comment"># è®¿é—®[http://127.0.0.1:5000/]ï¼Œå¯æ›¿ä»£route()è£…é¥°å™¨</span><br>    <span class="hljs-string">&quot;/&quot;</span>, <span class="hljs-string">&quot;hello&quot;</span>, hello_world<br>)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>



<h3 id="1-URLæ„å»º"><a href="#1-URLæ„å»º" class="headerlink" title="(1) URLæ„å»º"></a>(1) URLæ„å»º</h3><ul>
<li>å˜é‡è§„åˆ™<ul>
<li>route()è£…é¥°å™¨é€šè¿‡å‘è§„åˆ™å‚æ•°æ·»åŠ å˜é‡éƒ¨åˆ†ï¼Œå¯åŠ¨æ€æ„å»ºURLï¼š<code>route(/&lt;name&gt;/&lt;variable-name&gt;)</code>ã€‚</li>
<li>é™¤é»˜è®¤å­—ç¬¦ä¸²å˜é‡éƒ¨åˆ†å¤–ï¼Œè¿˜å¯ä½¿ç”¨è½¬æ¢å™¨æ„å»ºè§„åˆ™ï¼šintã€floatã€path(æ¥å—ç”¨ä½œç›®å½•åˆ†éš”ç¬¦çš„æ–œæ )ã€‚<ul>
<li>å­—ç¬¦ä¸²å˜é‡ï¼šè‹¥è®¿é—®â€œ<u><a target="_blank" rel="noopener" href="http://127.0.0.1:5000/hello/Aha">http://127.0.0.1:5000/hello/Aha</a></u>â€ï¼Œæ˜¾ç¤ºâ€œHello Aha!â€ã€‚</li>
<li>intæ•´æ•°ï¼šè‹¥è®¿é—®â€œ<u><a target="_blank" rel="noopener" href="http://127.0.0.1:5000/blog/27">http://127.0.0.1:5000/blog/27</a></u>â€ï¼Œæ˜¾ç¤ºâ€œBlog Number 27.â€ã€‚</li>
<li>floatæµ®ç‚¹æ•°ï¼šè‹¥è®¿é—®â€œ<u><a target="_blank" rel="noopener" href="http://127.0.0.1:5000/rev/2.7">http://127.0.0.1:5000/rev/2.7</a></u>â€ï¼Œæ˜¾ç¤ºâ€œRevision Number 2.700000.â€ã€‚</li>
<li>pathç›®å½•åˆ†éš”ç¬¦<ul>
<li>è‹¥è®¿é—®â€œ<u><a target="_blank" rel="noopener" href="http://127.0.0.1:5000/python/">http://127.0.0.1:5000/python/</a></u>â€ï¼Œæ˜¾ç¤ºâ€œNot Foundâ€ã€‚</li>
<li>è‹¥è®¿é—®â€œ<u><a target="_blank" rel="noopener" href="http://127.0.0.1:5000/python">http://127.0.0.1:5000/python</a></u>â€ï¼Œæ˜¾ç¤ºâ€œHello Python.â€ã€‚</li>
<li>è®¿é—®â€œ<u><a target="_blank" rel="noopener" href="http://127.0.0.1:5000/golang">http://127.0.0.1:5000/golang</a></u>â€å’Œâ€œ<u><a target="_blank" rel="noopener" href="http://127.0.0.1:5000/golang/">http://127.0.0.1:5000/golang/</a></u>â€éƒ½å¯ä»¥æ­£å¸¸æ˜¾ç¤ºã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>url_for()å‡½æ•°ï¼Œæ¥å—å‡½æ•°åç§°ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œä»¥åŠä¸€ä¸ªæˆ–å¤šä¸ªå…³é”®å­—å‚æ•°ï¼Œæ¯ä¸ªå‚æ•°å¯¹åº”äºURLçš„å˜é‡éƒ¨åˆ†ã€‚<ul>
<li>è‹¥è®¿é—®â€œ<u><a target="_blank" rel="noopener" href="http://localhost:5000/user/admin">http://localhost:5000/user/admin</a></u>â€ï¼Œæ˜¾ç¤ºâ€œHello Admin.â€ã€‚</li>
<li>è‹¥è®¿é—®â€œ<u><a target="_blank" rel="noopener" href="http://localhost:5000/user/mvl">http://localhost:5000/user/mvl</a></u>â€ï¼Œæ˜¾ç¤ºâ€œHello mvl as Guest.â€ã€‚</li>
</ul>
</li>
</ul>
<h4 id="âœ§-å­—ç¬¦ä¸²å˜é‡"><a href="#âœ§-å­—ç¬¦ä¸²å˜é‡" class="headerlink" title="âœ§ å­—ç¬¦ä¸²å˜é‡"></a>âœ§ å­—ç¬¦ä¸²å˜é‡</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask<br><br>app = Flask(__name__)<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/hello/&lt;name&gt;&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">hello_world</span>(<span class="hljs-params">name</span>):                              <span class="hljs-comment"># è®¿é—®[http://127.0.0.1:5000/hello/Aha]</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&lt;center&gt;Hello %s!&lt;/center&gt;&quot;</span> % name<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>



<h4 id="âœ§-æ•´æ•°ä¸æµ®ç‚¹"><a href="#âœ§-æ•´æ•°ä¸æµ®ç‚¹" class="headerlink" title="âœ§ æ•´æ•°ä¸æµ®ç‚¹"></a>âœ§ æ•´æ•°ä¸æµ®ç‚¹</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask<br><br>app = Flask(__name__)<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/blog/&lt;int:postID&gt;&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">show_blog</span>(<span class="hljs-params">postID</span>):                              <span class="hljs-comment"># è®¿é—®[http://localhost:5000/blog/27]</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&lt;center&gt;Blog Number %d.&lt;/center&gt;&quot;</span> % postID<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/rev/&lt;float:revNo&gt;&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">revision</span>(<span class="hljs-params">revNo</span>):                                <span class="hljs-comment"># è®¿é—®[http://localhost:5000/rev/2.7]</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&lt;center&gt;Revision Number %f.&lt;/center&gt;&quot;</span> % revNo<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>



<h4 id="âœ§-ç›®å½•åˆ†éš”ç¬¦"><a href="#âœ§-ç›®å½•åˆ†éš”ç¬¦" class="headerlink" title="âœ§ ç›®å½•åˆ†éš”ç¬¦"></a>âœ§ ç›®å½•åˆ†éš”ç¬¦</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask<br><br>app = Flask(__name__)<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/python&quot;</span></span>)                               </span><span class="hljs-comment"># è®¿é—®[http://127.0.0.1:5000/python/]ï¼ŒNot Found</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">hello_python</span>():                                 <span class="hljs-comment"># è®¿é—®[http://127.0.0.1:5000/python]</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&lt;center&gt;Hello Python.&lt;/center&gt;&quot;</span><br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/golang/&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">hello_golang</span>():                                 <span class="hljs-comment"># è®¿é—®[http://127.0.0.1:5000/golang]</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&lt;center&gt;Hello Golang.&lt;/center&gt;&quot;</span>         <span class="hljs-comment"># æˆ–è®¿é—®[http://127.0.0.1:5000/golang/]</span><br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>



<h4 id="âœ§-url-for-å‡½æ•°"><a href="#âœ§-url-for-å‡½æ•°" class="headerlink" title="âœ§ url_for()å‡½æ•°"></a>âœ§ url_for()å‡½æ•°</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, redirect, url_for<br><br>app = Flask(__name__)<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/admin&quot;</span></span>)                                </span><span class="hljs-comment"># è®¿é—®[http://127.0.0.1:5000/admin]</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">hello_admin</span>():<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&lt;center&gt;Hello Admin.&lt;/center&gt;&quot;</span><br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/guest/&lt;guest&gt;&quot;</span></span>)                        </span><span class="hljs-comment"># è®¿é—®[http://127.0.0.1:5000/guest/Admin]</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">hello_guest</span>(<span class="hljs-params">guest</span>):<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&lt;center&gt;Hello %s as Guest.&lt;/center&gt;&quot;</span> % guest<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/user/&lt;name&gt;&quot;</span></span>)                          </span><span class="hljs-comment"># è®¿é—®[http://127.0.0.1:5000/user/admin]</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">hello_user</span>(<span class="hljs-params">name</span>):                               <span class="hljs-comment"># æ¥æ”¶æ¥è‡ªURLå‚æ•°çš„å€¼ï¼Œæ£€æŸ¥æ¥æ”¶çš„å‚æ•°æ˜¯å¦ä¸adminåŒ¹é…</span><br>    <span class="hljs-keyword">if</span> name == <span class="hljs-string">&quot;admin&quot;</span>:                             <span class="hljs-comment"># åŒ¹é…åˆ™é‡å®šå‘åˆ°hello_admin()å‡½æ•°</span><br>        <span class="hljs-keyword">return</span> redirect(url_for(<span class="hljs-string">&quot;hello_admin&quot;</span>))<br>    <span class="hljs-keyword">else</span>:                                           <span class="hljs-comment"># å¦åˆ™é‡å®šå‘åˆ°hello_guest()å‡½æ•°</span><br>        <span class="hljs-keyword">return</span> redirect(url_for(<span class="hljs-string">&quot;hello_guest&quot;</span>, guest=name))<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>



<h3 id="2-è¯·æ±‚æ–¹æ³•"><a href="#2-è¯·æ±‚æ–¹æ³•" class="headerlink" title="(2) è¯·æ±‚æ–¹æ³•"></a>(2) è¯·æ±‚æ–¹æ³•</h3><ul>
<li>HEADï¼šå’ŒGETæ–¹æ³•ç›¸åŒï¼Œä½†æ˜¯æ²¡æœ‰å“åº”ä½“ã€‚</li>
<li>GETï¼šä»¥æœªåŠ å¯†çš„å½¢å¼å°†æ•°æ®å‘é€åˆ°æœåŠ¡å™¨ã€‚</li>
<li>PUTï¼šç”¨ä¸Šä¼ çš„å†…å®¹æ›¿æ¢ç›®æ ‡èµ„æºçš„æ‰€æœ‰å½“å‰è¡¨ç¤ºã€‚</li>
<li>DELETEï¼šåˆ é™¤ç”±URLç»™å‡ºç›®æ ‡èµ„æºçš„æ‰€æœ‰å½“å‰è¡¨ç¤ºã€‚</li>
<li>POSTï¼šç”¨äºå°†HTMLè¡¨å•æ•°æ®å‘é€åˆ°æœåŠ¡å™¨ï¼Œæ¥æ”¶çš„æ•°æ®ä¸ç”±æœåŠ¡å™¨ç¼“å­˜ã€‚</li>
<li>Flaskè·¯ç”±é»˜è®¤å“åº”GETè¯·æ±‚ï¼Œé€šè¿‡route()è£…é¥°å™¨æä¾›çš„æ–¹æ³•å‚æ•°æ›´æ”¹è¯·æ±‚ã€‚<ul>
<li>å‘½ä»¤çª—å£ä¸‹æ‰§è¡ŒPythonè„šæœ¬å¼€å¯å¼€å‘æœåŠ¡å™¨ï¼Œæµè§ˆå™¨æ‰“å¼€post.htmlï¼Œè¾“å…¥teståæäº¤ã€‚</li>
<li>æ­¤æ—¶æµè§ˆå™¨è·³è½¬â€œ<u><a target="_blank" rel="noopener" href="http://localhost:5000/success/test">http://localhost:5000/success/test</a></u>â€ï¼Œé¡µé¢æ˜¾ç¤ºâ€œWelcom test.â€ã€‚</li>
</ul>
</li>
</ul>
<h4 id="âœ§-post-py"><a href="#âœ§-post-py" class="headerlink" title="âœ§ post.py"></a>âœ§ post.py</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, redirect, url_for, request, render_template<br><br>app = Flask(__name__)<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/&quot;</span></span>)                                     </span><span class="hljs-comment"># æµè§ˆå™¨æ‰“å¼€post.htmlï¼Œè¾“å…¥teståæäº¤</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">post</span>():<br>    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&quot;post.html&quot;</span>)<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/success/&lt;name&gt;&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">success</span>(<span class="hljs-params">name</span>):                                  <span class="hljs-comment"># æ­¤æ—¶æµè§ˆå™¨è·³è½¬[http://localhost:5000/success/test]</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&lt;center&gt;Welcome %s.&lt;/center&gt;&quot;</span> % name<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/login&quot;</span>, methods=[<span class="hljs-string">&quot;POST&quot;</span>, <span class="hljs-string">&quot;GET&quot;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">login</span>():<br>    <span class="hljs-keyword">if</span> request.method == <span class="hljs-string">&quot;POST&quot;</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-number">1</span>)<br>        user = request.form[<span class="hljs-string">&quot;name&quot;</span>]<br>        <span class="hljs-keyword">return</span> redirect(url_for(<span class="hljs-string">&quot;success&quot;</span>, name=user))<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-number">2</span>)                                    <span class="hljs-comment"># argsæ˜¯åŒ…å«è¡¨å•å‚æ•°å¯¹åŠå…¶å¯¹åº”å€¼å¯¹çš„åˆ—è¡¨å­—å…¸å¯¹è±¡</span><br>        user = request.args.get(<span class="hljs-string">&quot;name&quot;</span>)<br>        <span class="hljs-keyword">return</span> redirect(url_for(<span class="hljs-string">&quot;success&quot;</span>, name=user))<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>



<h4 id="âœ§-post-html"><a href="#âœ§-post-html" class="headerlink" title="âœ§ post.html"></a>âœ§ post.html</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs Html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>è¯·æ±‚æ–¹æ³•<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;text-align:center;&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;http://localhost:5000/login&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;POST&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¾“å…¥å§“å<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;æäº¤&quot;</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h2 id="1-4-æ¨¡æ¿å¼•æ“"><a href="#1-4-æ¨¡æ¿å¼•æ“" class="headerlink" title="1-4 æ¨¡æ¿å¼•æ“"></a>1-4 æ¨¡æ¿å¼•æ“</h2><ul>
<li>æ¨¡æ¿å¼•æ“<ul>
<li>è§†å›¾å‡½æ•°çš„ä¸»è¦ä½œç”¨æ˜¯ç”Ÿæˆè¯·æ±‚çš„å“åº”ï¼Œè¿™æ˜¯æœ€ç®€å•çš„è¯·æ±‚ï¼ŒFlaskä½¿ç”¨Jinja2è¿™ä¸ªæ¨¡æ¿å¼•æ“æ¥æ¸²æŸ“æ¨¡æ¿ã€‚</li>
<li>è§†å›¾å‡½æ•°çš„ä¸¤ä¸ªä½œç”¨æ˜¯å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œä»¥åŠè¿”å›å“åº”å†…å®¹ï¼Œæ¨¡æ¿åˆ™æ˜¯è·å–åˆ°è§†å›¾å‡½æ•°çš„æ•°æ®ç»“æœè¿›è¡Œå±•ç¤ºã€‚</li>
<li>é¡¹ç›®ä¸‹åˆ›å»ºtemplatesæ–‡ä»¶å¤¹ï¼Œç”¨äºå­˜æ”¾æ‰€æœ‰çš„æ¨¡æ¿æ–‡ä»¶ï¼Œå¹¶ä¸”åœ¨templatesç›®å½•ä¸‹åˆ›å»ºmould.htmlæ¨¡æ¿æ–‡ä»¶ã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs Xml"><span class="hljs-comment">&lt;!-- é¡¹ç›®ç›®å½•ç»“æ„ --&gt;</span><br>- mould.py<br>- templates<br>    - mould.html<br><span class="hljs-comment">&lt;!-- å‘½ä»¤çª—å£ä¸‹æ‰§è¡Œ&quot;python mould.py&quot;ï¼Œè®¿é—®[http://127.0.0.1:5000] --&gt;</span><br></code></pre></td></tr></table></figure>



<h3 id="1-mould-py"><a href="#1-mould-py" class="headerlink" title="(1) mould.py"></a>(1) mould.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, render_template<br><br>app = Flask(__name__)<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/&quot;</span></span>)                                     </span><span class="hljs-comment"># è®¿é—®[http://127.0.0.1:5000]</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">index</span>():<br>    my_int = <span class="hljs-number">27</span>                                     <span class="hljs-comment"># å¾€mould.htmlæ¨¡æ¿ä¸­ä¼ å…¥çš„æ•°æ®</span><br>    my_str = <span class="hljs-string">&quot;Hello Flask.&quot;</span><br>    my_dict = &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Lucy&quot;</span>, <span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">23</span>&#125;<br>    my_array = [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>]<br>    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&quot;mould.html&quot;</span>,<br>                           my_int=my_int,<br>                           my_str=my_str,<br>                           my_dict=my_dict,<br>                           my_array=my_array<br>                           )<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>



<h3 id="2-mould-html"><a href="#2-mould-html" class="headerlink" title="(2) mould.html"></a>(2) mould.html</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs Html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>æ¨¡æ¿å¼•æ“<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;text-align:center;&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>æ¨¡æ¿HTMLå†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span>&#123;&#123; my_int &#125;&#125;<br>        <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span>&#123;&#123; my_str &#125;&#125;<br>        <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span>&#123;&#123; my_dict.name &#125;&#125;<br>        <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span>&#123;&#123; my_dict &#125;&#125;<br>        <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span>&#123;&#123; my_array &#125;&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h2 id="1-5-é™æ€æ–‡ä»¶"><a href="#1-5-é™æ€æ–‡ä»¶" class="headerlink" title="1-5 é™æ€æ–‡ä»¶"></a>1-5 é™æ€æ–‡ä»¶</h2><ul>
<li>é™æ€æ–‡ä»¶<ul>
<li>Webåº”ç”¨ç¨‹åºé€šå¸¸éœ€è¦é™æ€æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼šJavaScriptæˆ–CSSæ–‡ä»¶ã€‚</li>
<li>ä¸€èˆ¬ç”±åº”ç”¨ç¨‹åºçš„staticæ–‡ä»¶å¤¹æä¾›ï¼Œç”¨äºç”Ÿæˆé™æ€æ–‡ä»¶çš„URLã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs Xml"><span class="hljs-comment">&lt;!-- é¡¹ç›®ç›®å½•ç»“æ„ --&gt;</span><br>- static.py<br>- static<br>    - static.js<br>- templates<br>    - static.html<br><span class="hljs-comment">&lt;!-- å‘½ä»¤çª—å£ä¸‹æ‰§è¡Œ&quot;python static.py&quot;ï¼Œè®¿é—®[http://127.0.0.1:5000] --&gt;</span><br></code></pre></td></tr></table></figure>



<h3 id="1-static-js"><a href="#1-static-js" class="headerlink" title="(1) static.js"></a>(1) static.js</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs Javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">sayHello</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;Hello World!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="2-static-py"><a href="#2-static-py" class="headerlink" title="(2) static.py"></a>(2) static.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, render_template<br><br>app = Flask(__name__)<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/&quot;</span></span>)                                     </span><span class="hljs-comment"># è®¿é—®[http://127.0.0.1:5000]</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_static</span>():<br>    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&quot;static.html&quot;</span>)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>



<h3 id="3-static-html"><a href="#3-static-html" class="headerlink" title="(3) static.html"></a>(3) static.html</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs Html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>é™æ€æ–‡ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;&#123;&#123; url_for(&#x27;static&#x27;, filename=&#x27;static.js&#x27;) &#125;&#125;&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;text-align:center;&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;sayHello()&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;ä½ å¥½å‘€ï¼&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h1 id="2-æ ¸å¿ƒå†…å®¹"><a href="#2-æ ¸å¿ƒå†…å®¹" class="headerlink" title="2 æ ¸å¿ƒå†…å®¹"></a>2 æ ¸å¿ƒå†…å®¹</h1><ul>
<li>æ ¸å¿ƒå†…å®¹<ul>
<li>æ¥è‡ªå®¢æˆ·ç«¯ç½‘é¡µçš„æ•°æ®ä½œä¸ºå…¨å±€è¯·æ±‚å¯¹è±¡å‘é€åˆ°æœåŠ¡å™¨ï¼Œä¸ºå¤„ç†è¯·æ±‚æ•°æ®ï¼Œåº”ä»Flaskæ¨¡å—å¯¼å…¥ã€‚</li>
<li>è¯·æ±‚å¯¹è±¡çš„å±æ€§<ul>
<li>args(è§£ææŸ¥è¯¢å­—ç¬¦ä¸²çš„å†…å®¹ï¼Œæ˜¯é—®å·ä¹‹åURLçš„ä¸€éƒ¨åˆ†)ã€‚</li>
<li>files(ä¸ä¸Šä¼ æ–‡ä»¶æœ‰å…³çš„æ•°æ®)ã€cookies(ä¿å­˜Cookieåç§°å’Œå€¼çš„å­—å…¸å¯¹è±¡)ã€‚</li>
<li>method(å½“å‰è¯·æ±‚æ–¹æ³•)ã€form(å­—å…¸å¯¹è±¡ï¼ŒåŒ…å«è¡¨å•å‚æ•°åŠå…¶å€¼çš„é”®å€¼å¯¹)ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="2-1-è¡¨å•å±•ç¤º"><a href="#2-1-è¡¨å•å±•ç¤º" class="headerlink" title="2-1 è¡¨å•å±•ç¤º"></a>2-1 è¡¨å•å±•ç¤º</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs Xml"><span class="hljs-comment">&lt;!-- é¡¹ç›®ç›®å½•ç»“æ„ --&gt;</span><br>- formshow.py<br>- templates<br>    - stufill.html<br>    - stushow.html<br><span class="hljs-comment">&lt;!-- å‘½ä»¤çª—å£ä¸‹æ‰§è¡Œ&quot;python formshow.py&quot;ï¼Œè®¿é—®[http://127.0.0.1:5000] --&gt;</span><br></code></pre></td></tr></table></figure>



<h3 id="1-formshow-py"><a href="#1-formshow-py" class="headerlink" title="(1) formshow.py"></a>(1) formshow.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, render_template, request<br><br>app = Flask(__name__)<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/&quot;</span></span>)                                     </span><span class="hljs-comment"># &quot;/&quot;URLå‘ˆç°è¡¨å•ç½‘é¡µstufill.html</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">stufill</span>():<br>    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&quot;stufill.html&quot;</span>)<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/stushow&quot;</span>, methods=[<span class="hljs-string">&quot;POST&quot;</span>, <span class="hljs-string">&quot;GET&quot;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">stushow</span>():                                      <span class="hljs-comment"># å¡«å…¥çš„æ•°æ®å°†å‘å¸ƒåˆ°è§¦å‘stushow()çš„&quot;/stushow&quot;URLä¸­</span><br>    <span class="hljs-keyword">if</span> request.method == <span class="hljs-string">&quot;POST&quot;</span>:                    <span class="hljs-comment"># å‡½æ•°æ”¶é›†request.formä¸­çš„è¡¨å•æ•°æ®å¹¶å°†å…¶å‘é€ç»™stushow.html</span><br>        stushow = request.form                      <span class="hljs-comment"># ä»¥å­—å…¸å¯¹è±¡å½¢å¼æ”¶é›†å¹¶å°†å…¶è½¬å‘åˆ°stushow.htmlï¼Œå‘ˆç°åœ¨ç½‘é¡µä¸Š</span><br>        <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&quot;stushow.html&quot;</span>, result=stushow)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)                             <span class="hljs-comment"># è®¿é—®[http://localhost:5000]ï¼Œè¾“å…¥è¡¨å•æ•°æ®æäº¤</span><br></code></pre></td></tr></table></figure>



<h3 id="2-stufill-html"><a href="#2-stufill-html" class="headerlink" title="(2) stufill.html"></a>(2) stufill.html</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs Html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>æ•°æ®å¡«å†™<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;text-align:center;&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;http://localhost:5000/stushow&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;POST&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å§“å <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span> = <span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span> = <span class="hljs-string">&quot;å§“å&quot;</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¯­æ–‡ <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span> = <span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span> = <span class="hljs-string">&quot;è¯­æ–‡&quot;</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ•°å­¦ <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span> = <span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span> = <span class="hljs-string">&quot;æ•°å­¦&quot;</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è‹±è¯­ <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span> = <span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span> = <span class="hljs-string">&quot;è‹±è¯­&quot;</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span> = <span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span> = <span class="hljs-string">&quot;æäº¤&quot;</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h3 id="3-stushow-html"><a href="#3-stushow-html" class="headerlink" title="(3) stushow.html"></a>(3) stushow.html</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs Html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>è¡¨å•å±•ç¤º<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-tag">body</span> &#123;<span class="hljs-attribute">text-align</span>: center;&#125; <span class="hljs-selector-tag">table</span> &#123;<span class="hljs-attribute">margin</span>: auto;&#125;</span><br><span class="language-css">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">border</span>=<span class="hljs-string">&quot;1&quot;</span> <span class="hljs-attr">cellspacing</span>=<span class="hljs-string">&quot;0&quot;</span>&gt;</span><br>        &#123;% for key, value in result.items() %&#125;<br>            <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>&#123;&#123; key &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>&#123;&#123; value &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>        &#123;% endfor %&#125;<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h2 id="2-2-Cookies"><a href="#2-2-Cookies" class="headerlink" title="2-2 Cookies"></a>2-2 Cookies</h2><ul>
<li>Cookies<ul>
<li>ä»¥æ–‡æœ¬å½¢å¼å­˜å‚¨äºå®¢æˆ·ç«¯ï¼Œè®°å½•ä¸è·Ÿè¸ªç”¨æˆ·æ•°æ®ï¼Œè·å¾—æ›´å¥½çš„è®¿é—®è€…ä½“éªŒå’Œç½‘ç«™ç»Ÿè®¡ä¿¡æ¯ï¼Œå¤„ç†æ­¥éª¤å¦‚ä¸‹ã€‚</li>
<li>è®¾ç½®cookieï¼šé»˜è®¤æ˜¯ä¸´æ—¶cookieï¼Œæµè§ˆå™¨å…³é—­ç«‹å³å¤±æ•ˆï¼Œé€šè¿‡max_ageè®¾ç½®æœ‰æ•ˆæœŸï¼Œå•ä½æ˜¯ç§’ã€‚</li>
<li>è·å–cookieï¼šé€šè¿‡request.cookiesçš„æ–¹å¼è·å–ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œå¯ä»¥è·å–å­—å…¸é‡Œçš„ç›¸åº”å€¼ã€‚</li>
<li>åˆ é™¤cookieï¼šè¿™é‡Œåˆ é™¤åªæ˜¯è®©cookieè¿‡æœŸï¼Œè€Œéç›´æ¥åˆ é™¤ï¼Œé€šè¿‡delete_cookie()æ–¹å¼è¿›è¡Œåˆ é™¤ã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, make_response, request<br><br>app = Flask(__name__)<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/set_cookies&quot;</span></span>)                          </span><span class="hljs-comment"># [127.0.0.1:5000/set_cookies]ï¼ŒF12æŸ¥çœ‹Set-Cookieçš„valueå€¼</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">set_cookies</span>():<br>    resp = make_response(<span class="hljs-string">&quot;&lt;center&gt;success&lt;/center&gt;&quot;</span>)<br>    resp.set_cookie(<span class="hljs-string">&quot;flask&quot;</span>, <span class="hljs-string">&quot;flask&quot;</span>, max_age=<span class="hljs-number">3600</span>)<br>    <span class="hljs-keyword">return</span> resp<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/get_cookies&quot;</span></span>)                          </span><span class="hljs-comment"># [http://127.0.0.1:5000/get_cookies]ï¼Œé¡µé¢è¾“å‡ºcookiesä¿¡æ¯</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_cookies</span>():<br>    cookie = request.cookies.get(<span class="hljs-string">&quot;flask&quot;</span>)<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&lt;center&gt;&quot;</span> + cookie + <span class="hljs-string">&quot;&lt;/center&gt;&quot;</span><br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/delete_cookies&quot;</span></span>)                       </span><span class="hljs-comment"># [http://127.0.0.1:5000/delete_cookies]ï¼Œcookieså·²åˆ (è¿‡æœŸ)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">delete_cookies</span>():<br>    resp = make_response(<span class="hljs-string">&quot;&lt;center&gt;del success&lt;/center&gt;&quot;</span>)<br>    resp.delete_cookie(<span class="hljs-string">&quot;flask&quot;</span>)<br>    <span class="hljs-keyword">return</span> resp<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>



<h2 id="2-3-ä¼šè¯å·¥ä½œ"><a href="#2-3-ä¼šè¯å·¥ä½œ" class="headerlink" title="2-3 ä¼šè¯å·¥ä½œ"></a>2-3 ä¼šè¯å·¥ä½œ</h2><ul>
<li>ä¼šè¯å·¥ä½œ<ul>
<li>sessionï¼Œå®¢æˆ·ç«¯ç™»å½•åˆ°æœåŠ¡å™¨å¹¶æ³¨é”€æœåŠ¡å™¨çš„æ—¶é—´é—´éš”ï¼Œåœ¨ä¼šè¯ä¸­ä¿å­˜çš„æ•°æ®ä¼šå­˜å‚¨åœ¨æœåŠ¡å™¨çš„ä¸´æ—¶ç›®å½•ä¸­ã€‚</li>
<li>ä¸ºæ¯ä¸ªå®¢æˆ·ç«¯çš„ä¼šè¯åˆ†é…ä¼šè¯IDï¼Œä¼šè¯æ•°æ®å­˜å‚¨åœ¨cookieçš„é¡¶éƒ¨ï¼ŒæœåŠ¡å™¨ä»¥åŠ å¯†æ–¹å¼å¯¹å…¶è¿›è¡Œç­¾åã€‚</li>
<li>Flaskéœ€è¦å®šä¹‰çš„secret_keyè¿›è¡ŒåŠ å¯†ï¼Œsessionä¹Ÿæ˜¯ä¸€ä¸ªå­—å…¸å¯¹è±¡ï¼ŒåŒ…å«ä¼šè¯å˜é‡å’Œå…³è”å€¼çš„é”®å€¼å¯¹ã€‚<ul>
<li><code>Session[&#39;username&#39;] = &#39;admin&#39;</code>ï¼šè®¾ç½®usernameä¼šè¯å˜é‡ã€‚</li>
<li><code>session.pop(&#39;username&#39;, None)</code>ï¼šé‡Šæ”¾usernameä¼šè¯å˜é‡ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, session, redirect, url_for, request<br><br>app = Flask(__name__)                               <span class="hljs-comment"># [http://127.0.0.1:5000]ï¼Œç¡®ä¿è®¾ç½®åº”ç”¨çš„secret_key</span><br>app.secret_key = <span class="hljs-string">&quot;flask session&quot;</span><br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/&quot;</span></span>)                                     </span><span class="hljs-comment"># æç¤ºç”¨æˆ·ç™»å½•ï¼Œæœªè®¾ç½®ä¼šè¯å˜é‡username</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">index</span>():<br>    <span class="hljs-keyword">if</span> <span class="hljs-string">&quot;username&quot;</span> <span class="hljs-keyword">in</span> session:<br>        username = session[<span class="hljs-string">&quot;username&quot;</span>]<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&lt;center&gt;ç™»å½•ç”¨æˆ·åï¼š&quot;</span> + username + <span class="hljs-string">&quot;ï¼Œ&quot;</span> + \<br>               <span class="hljs-string">&quot;&lt;b&gt;&lt;a href=&#x27;/logout&#x27;&gt;ç‚¹å‡»è¿™é‡Œé€€å‡º&lt;/a&gt;&lt;/b&gt;&quot;</span> + <span class="hljs-string">&quot;ã€‚&lt;/center&gt;&quot;</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&lt;center&gt;æ‚¨æš‚æœªç™»å½•ï¼Œ&lt;a href=&#x27;/login&#x27;&gt;&lt;/b&gt;&quot;</span> + <span class="hljs-string">&quot;ç‚¹å‡»è¿™é‡Œç™»å½•&lt;/b&gt;&lt;/a&gt;&quot;</span> + <span class="hljs-string">&quot;ã€‚&lt;/center&gt;&quot;</span><br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/login&quot;</span>, methods=[<span class="hljs-string">&quot;GET&quot;</span>, <span class="hljs-string">&quot;POST&quot;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">login</span>():                                        <span class="hljs-comment"># login()è§†å›¾å‡½æ•°ï¼Œé€šè¿‡GETè°ƒç”¨ï¼Œæ‰“å¼€ç™»å½•è¡¨å•</span><br>    <span class="hljs-keyword">if</span> request.method == <span class="hljs-string">&quot;POST&quot;</span>:                    <span class="hljs-comment"># æ­¤æ—¶ä¼šè¯å˜é‡å·²è®¾ç½®ï¼Œåº”ç”¨é‡å®šå‘åˆ°&quot;/&quot;ï¼Œä¼šè¯å˜é‡usernameè¢«æ‰¾åˆ°</span><br>        session[<span class="hljs-string">&quot;username&quot;</span>] = request.form[<span class="hljs-string">&quot;username&quot;</span>]<br>        <span class="hljs-keyword">return</span> redirect(url_for(<span class="hljs-string">&quot;index&quot;</span>))<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    &lt;form action=&quot;&quot; method=&quot;POST&quot; style=&quot;text-align:center;&quot;&gt;</span><br><span class="hljs-string">        &lt;p&gt;&lt;input type=&quot;text&quot; name=&quot;username&quot; /&gt;&lt;/p&gt;</span><br><span class="hljs-string">        &lt;p&gt;&lt;input type=&quot;submit&quot; value=&quot;ç™»å½•&quot; /&gt;&lt;/p&gt;</span><br><span class="hljs-string">    &lt;/form&gt;</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/logout&quot;</span></span>)                               </span><span class="hljs-comment"># logout()è§†å›¾å‡½æ•°</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">logout</span>():                                       <span class="hljs-comment"># å¼¹å‡ºusernameä¼šè¯å˜é‡ï¼Œ&quot;/&quot;URLå†æ¬¡æ˜¾ç¤ºå¼€å§‹é¡µé¢</span><br>    session.pop(<span class="hljs-string">&quot;username&quot;</span>, <span class="hljs-literal">None</span>)<br>    <span class="hljs-keyword">return</span> redirect(url_for(<span class="hljs-string">&quot;index&quot;</span>))<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>



<h2 id="2-4-Redirect"><a href="#2-4-Redirect" class="headerlink" title="2-4 Redirect"></a>2-4 Redirect</h2><ul>
<li>Redirect<ul>
<li>å‡½æ•°è°ƒç”¨æ—¶è¿”å›ä¸€ä¸ªå“åº”å¯¹è±¡ï¼Œå¹¶å°†ç”¨æˆ·é‡å®šå‘åˆ°å…·æœ‰æŒ‡å®šçŠ¶æ€ä»£ç çš„å¦ä¸€ç›®æ ‡ä½ç½®ã€‚</li>
<li>redirect()é‡å®šå‘å‡½æ•°åŸå‹ï¼š<code>Flask.redirect(location, statuscode, response)</code>ã€‚</li>
<li>location(é‡å®šå‘å“åº”çš„URL)ã€statuscode(å‘é€åˆ°æµè§ˆå™¨æ ‡å¤´ï¼Œé»˜è®¤302)ã€response(ç”¨äºå®ä¾‹åŒ–å“åº”)ã€‚</li>
<li>çŠ¶æ€ä»£ç æ ‡å‡†åŒ–<ul>
<li>HTTP_300_MULTIPLE_CHOICESã€HTTP_301_MOVED_PERMANENTLYã€‚</li>
<li>HTTP_302_FOUNDã€HTTP_303_SEE_OTHERã€HTTP_304_NOT_MODIFIEDã€‚</li>
<li>HTTP_305_USE_PROXYã€HTTP_306_RESERVEDã€HTTP_307_TEMPORARY_REDIRECTã€‚</li>
</ul>
</li>
<li>ç¤ºä¾‹ï¼šæ‰§è¡Œåº”ç”¨ç¨‹åºï¼Œè®¿é—®â€œ<u><a target="_blank" rel="noopener" href="http://127.0.0.1:5000/">http://127.0.0.1:5000/</a></u>â€ã€‚<ul>
<li>è¾“å…¥ç”¨æˆ·åguestï¼ŒF12æŸ¥çœ‹ï¼Œç‚¹å‡»ç™»å½•ï¼Œè¿”å›â€œçŠ¶æ€ä»£ç : 302 FOUNDâ€ã€‚</li>
<li>è¾“å…¥ç”¨æˆ·åadminï¼Œç‚¹å‡»ç™»å½•ï¼Œè·³è½¬è‡³â€œ<u><a target="_blank" rel="noopener" href="http://127.0.0.1:5000/success">http://127.0.0.1:5000/success</a></u>â€ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs Xml"><span class="hljs-comment">&lt;!-- é¡¹ç›®ç›®å½•ç»“æ„ --&gt;</span><br>- redirect.py<br>- templates<br>    - redirect.html<br><span class="hljs-comment">&lt;!-- å‘½ä»¤çª—å£ä¸‹æ‰§è¡Œ&quot;python redirect.py&quot;ï¼Œè®¿é—®[http://127.0.0.1:5000] --&gt;</span><br></code></pre></td></tr></table></figure>



<h3 id="1-redirect-py"><a href="#1-redirect-py" class="headerlink" title="(1) redirect.py"></a>(1) redirect.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, redirect, url_for, render_template, request<br><br>app = Flask(__name__)<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/&quot;</span></span>)                                     </span><span class="hljs-comment"># è®¿é—®[http://127.0.0.1:5000]</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">index</span>():<br>    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&quot;redirect.html&quot;</span>)<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/login&quot;</span>, methods=[<span class="hljs-string">&quot;POST&quot;</span>, <span class="hljs-string">&quot;GET&quot;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">login</span>():                                        <span class="hljs-comment"># redirect()å‡½æ•°ç”¨äºåœ¨ç™»å½•å°è¯•å¤±è´¥æ—¶å†æ¬¡æ˜¾ç¤ºç™»å½•é¡µé¢</span><br>    <span class="hljs-keyword">if</span> request.method == <span class="hljs-string">&quot;POST&quot;</span> <span class="hljs-keyword">and</span> request.form[<span class="hljs-string">&quot;username&quot;</span>] == <span class="hljs-string">&quot;admin&quot;</span>:<br>        <span class="hljs-keyword">return</span> redirect(url_for(<span class="hljs-string">&quot;success&quot;</span>))<br>    <span class="hljs-keyword">return</span> redirect(url_for(<span class="hljs-string">&quot;index&quot;</span>))<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/success&quot;</span></span>)                              </span><span class="hljs-comment"># è¾“å…¥adminï¼Œè·³è½¬åˆ°[http://127.0.0.1:5000/success]</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">success</span>():                                      <span class="hljs-comment"># è¾“å…¥guestï¼ŒF12æŸ¥çœ‹è¿”å›&quot;302 FOUND&quot;</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&lt;center&gt;ç™»å½•æˆåŠŸï¼&lt;/center&gt;&quot;</span><br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>



<h3 id="2-redirect-html"><a href="#2-redirect-html" class="headerlink" title="(2) redirect.html"></a>(2) redirect.html</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs Html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>é‡å®šå‘<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;text-align:center;&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;/login&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;POST&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ç”¨æˆ·åï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;ç™»å½•&quot;</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h2 id="2-5-é”™è¯¯ä»£ç "><a href="#2-5-é”™è¯¯ä»£ç " class="headerlink" title="2-5 é”™è¯¯ä»£ç "></a>2-5 é”™è¯¯ä»£ç </h2><ul>
<li>é”™è¯¯ä»£ç <ul>
<li>Flaskç±»å…·æœ‰å¸¦é”™è¯¯ä»£ç çš„abort()å‡½æ•°ï¼š<code>Flask.abort(code)</code>ã€‚</li>
<li>400(é”™è¯¯è¯·æ±‚)ã€401(æœªæˆæƒ)ã€403(Forbiddenèµ„æºä¸å¯ç”¨)ã€404(Not Foundç½‘é¡µä¸å­˜åœ¨)ã€‚</li>
<li>406(æ— æ³•ä½¿ç”¨è¯·æ±‚çš„å†…å®¹ç‰¹æ€§å“åº”è¯·æ±‚çš„ç½‘é¡µ)ã€415(ä¸æ”¯æŒçš„åª’ä½“ç±»å‹)ã€429(è¯·æ±‚è¿‡å¤š)ã€‚</li>
<li>æ›´æ”¹redirect.pyä»£ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œæ‰§è¡Œç¨‹åºï¼Œè®¿é—®â€œ<u><a target="_blank" rel="noopener" href="http://127.0.0.1:5000/">http://127.0.0.1:5000/</a></u>â€ã€‚<ul>
<li>è¾“å…¥ç”¨æˆ·åguestï¼ŒF12æŸ¥çœ‹ï¼Œç‚¹å‡»ç™»å½•ï¼Œè¿”å›â€œçŠ¶æ€ä»£ç : 401 UNAUTHORIZEDâ€ã€‚</li>
<li>è¾“å…¥ç”¨æˆ·åadminï¼Œç‚¹å‡»ç™»å½•ï¼Œè·³è½¬â€œ<u><a target="_blank" rel="noopener" href="http://127.0.0.1:5000/success">http://127.0.0.1:5000/success</a></u>â€ï¼Œç™»å½•æˆåŠŸã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, redirect, url_for, render_template, request, abort<br><br>app = Flask(__name__)<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/&quot;</span></span>)                                     </span><span class="hljs-comment"># è®¿é—®[http://127.0.0.1:5000]</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">index</span>():<br>    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&quot;redirect.html&quot;</span>)         <span class="hljs-comment"># redirect.htmlä»£ç å†…å®¹ä¸å˜</span><br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/login&quot;</span>, methods=[<span class="hljs-string">&quot;POST&quot;</span>, <span class="hljs-string">&quot;GET&quot;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">login</span>():                                        <span class="hljs-comment"># è¾“å…¥adminï¼Œè·³è½¬åˆ°[http://127.0.0.1:5000/success]</span><br>    <span class="hljs-keyword">if</span> request.method == <span class="hljs-string">&quot;POST&quot;</span>:<br>        <span class="hljs-keyword">if</span> request.form[<span class="hljs-string">&quot;username&quot;</span>] == <span class="hljs-string">&quot;admin&quot;</span>:<br>            <span class="hljs-keyword">return</span> redirect(url_for(<span class="hljs-string">&quot;success&quot;</span>))<br>        <span class="hljs-keyword">else</span>:<br>            abort(<span class="hljs-number">401</span>)<br>    <span class="hljs-keyword">else</span>:                                           <span class="hljs-comment"># è¾“å…¥guestï¼ŒF12æŸ¥çœ‹è¿”å›&quot;401 UNAUTHORIZED&quot;</span><br>        <span class="hljs-keyword">return</span> redirect(url_for(<span class="hljs-string">&quot;index&quot;</span>))<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/success&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">success</span>():<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&lt;center&gt;ç™»å½•æˆåŠŸï¼&lt;/center&gt;&quot;</span><br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>



<h2 id="2-6-æ¶ˆæ¯é—ªç°"><a href="#2-6-æ¶ˆæ¯é—ªç°" class="headerlink" title="2-6 æ¶ˆæ¯é—ªç°"></a>2-6 æ¶ˆæ¯é—ªç°</h2><ul>
<li>æ¶ˆæ¯é—ªç°<ul>
<li>Flaskæä¾›äº†ä¸€ä¸ªæ–¹æ³•æ¥ä½¿ç”¨é—ªç°ç³»ç»Ÿå‘ç”¨æˆ·åé¦ˆä¿¡æ¯ï¼Œå¯è§†å›¾ä¸­åˆ›å»ºæ¶ˆæ¯ï¼Œå¹¶åœ¨åä¸ºnextçš„è§†å›¾å‡½æ•°ä¸­å‘ˆç°ã€‚</li>
<li>åœ¨ä¸€ä¸ªè¯·æ±‚ç»“æŸæ—¶è®°å½•ä¸€ä¸ªä¿¡æ¯ï¼Œå¹¶ä¸”åœ¨ä¸‹æ¬¡(ä¸”ä»…åœ¨ä¸‹ä¸€æ¬¡)æ±‚æ—¶è®¿é—®ï¼Œé€šå¸¸ä¸å¸ƒå±€æ¨¡æ¿ç»“åˆä½¿ç”¨ä»¥å…¬å¼€ä¿¡æ¯ã€‚</li>
<li><code>flash(message, category)</code><ul>
<li>è¯¥å‡½æ•°ä¼šå°†æ¶ˆæ¯ä¼ é€’ç»™ä¸‹ä¸€ä¸ªè¯·æ±‚ï¼Œå½“å‰è¯·æ±‚é€šå¸¸æ˜¯ä¸€ä¸ªæ¨¡æ¿ã€‚</li>
<li>message(è¦é—ªç°çš„å®é™…æ¶ˆæ¯)ã€category(errorã€infoæˆ–warningï¼Œå¯é€‰)ã€‚</li>
</ul>
</li>
<li><code>get_flashed_messages(with_categories, category_filter)</code>ï¼šä¼šè¯ä¸­åˆ é™¤æ¶ˆæ¯ã€‚</li>
<li>å¦‚æœæ¥æ”¶åˆ°çš„æ¶ˆæ¯å…·æœ‰ç±»åˆ«ï¼Œåˆ™ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å…ƒç»„ï¼Œç¬¬äºŒä¸ªå‚æ•°ä»…ç”¨äºæ˜¾ç¤ºç‰¹å®šæ¶ˆæ¯ã€‚</li>
<li>ç¤ºä¾‹ï¼šæ‰§è¡Œç¨‹åºï¼Œè®¿é—®â€œ<u><a target="_blank" rel="noopener" href="http://127.0.0.1:5000/">http://127.0.0.1:5000/</a></u>â€ï¼Œç‚¹å‡»ç™»å½•è·³è½¬åˆ°ç™»å½•é¡µé¢ã€‚<ul>
<li>ç”¨æˆ·åadminï¼Œå¯†ç 1235ï¼Œæäº¤ï¼Œæ˜¾ç¤ºâ€œé”™è¯¯ï¼šæ— æ•ˆç”¨æˆ·åæˆ–å¯†ç ï¼Œè¯·é‡è¯•ï¼â€ã€‚</li>
<li>é‡æ–°è¾“å…¥ç”¨æˆ·åadminï¼Œå¯†ç adminï¼Œæäº¤ï¼Œè·³å›ç™»å½•é¡µé¢å¹¶æ˜¾ç¤ºâ€œç™»å½•æˆåŠŸï¼â€ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs Xml"><span class="hljs-comment">&lt;!-- é¡¹ç›®ç›®å½•ç»“æ„ --&gt;</span><br>- flash.py<br>- templates<br>    - flashmess.html<br>    - flashlogin.html<br><span class="hljs-comment">&lt;!-- å‘½ä»¤çª—å£ä¸‹æ‰§è¡Œ&quot;python flash.py&quot;ï¼Œè®¿é—®[http://127.0.0.1:5000] --&gt;</span><br></code></pre></td></tr></table></figure>



<h3 id="1-æ¥æ”¶æ¶ˆæ¯"><a href="#1-æ¥æ”¶æ¶ˆæ¯" class="headerlink" title="(1) æ¥æ”¶æ¶ˆæ¯"></a>(1) æ¥æ”¶æ¶ˆæ¯</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs Html"><span class="hljs-comment">&lt;!-- é—ªç°åœ¨æ¨¡æ¿ä¸­æ¥æ”¶æ¶ˆæ¯ --&gt;</span><br>&#123;% with messages = get_flashed_messages() %&#125;<br>    &#123;% if messages %&#125;<br>        &#123;% for message in messages %&#125;<br>            &#123;&#123; message &#125;&#125;<br>        &#123;% endfor %&#125;<br>    &#123;% endif %&#125;<br>&#123;% endwith %&#125;<br></code></pre></td></tr></table></figure>



<h3 id="2-flash-py"><a href="#2-flash-py" class="headerlink" title="(2) flash.py"></a>(2) flash.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, flash, redirect, render_template, request, url_for<br><br>app = Flask(__name__)<br>app.secret_key = <span class="hljs-string">&quot;flask flash&quot;</span><br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/&quot;</span></span>)                                     </span><span class="hljs-comment"># è®¿é—®[http://127.0.0.1:5000]</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_flash</span>():                                    <span class="hljs-comment"># &quot;/&quot;URLæ˜¾ç¤ºç™»å½•é¡µé¢çš„é“¾æ¥ï¼Œæ²¡æœ‰æ¶ˆæ¯é—ªç°</span><br>    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&quot;flashmess.html&quot;</span>)<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/flashlogin&quot;</span>, methods=[<span class="hljs-string">&quot;GET&quot;</span>, <span class="hljs-string">&quot;POST&quot;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">flash_login</span>():                                  <span class="hljs-comment"># æ˜¾ç¤ºç™»å½•è¡¨å•ï¼Œç”±&quot;/&quot;URLé“¾æ¥å¼•å¯¼ç”¨æˆ·åˆ°&quot;/flashlogin&quot;</span><br>    error = <span class="hljs-literal">None</span><br>    <span class="hljs-keyword">if</span> request.method == <span class="hljs-string">&quot;POST&quot;</span>:                    <span class="hljs-comment"># è§†å›¾å‡½æ•°éªŒè¯ç”¨æˆ·åå’Œå¯†ç ï¼Œå¹¶é—ªç°ç™»å½•æˆåŠŸæ¶ˆæ¯æˆ–åˆ›å»ºerrorå˜é‡</span><br>        <span class="hljs-keyword">if</span> request.form[<span class="hljs-string">&quot;username&quot;</span>] != <span class="hljs-string">&quot;admin&quot;</span> <span class="hljs-keyword">or</span> request.form[<span class="hljs-string">&quot;password&quot;</span>] != <span class="hljs-string">&quot;admin&quot;</span>:<br>            error = <span class="hljs-string">&quot;æ— æ•ˆç”¨æˆ·åæˆ–å¯†ç ï¼Œè¯·é‡è¯•ï¼&quot;</span><br>        <span class="hljs-keyword">else</span>:                                       <span class="hljs-comment"># è¾“å…¥ç”¨æˆ·åadminï¼Œå¯†ç adminï¼Œåˆ™ç™»å½•æˆåŠŸï¼Œå¦åˆ™å¤±è´¥æç¤º</span><br>            flash(<span class="hljs-string">&quot;ç™»å½•æˆåŠŸï¼&quot;</span>)<br>            <span class="hljs-keyword">return</span> redirect(url_for(<span class="hljs-string">&quot;get_flash&quot;</span>))<br>    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&quot;flashlogin.html&quot;</span>, error=error)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>



<h3 id="3-flashmess-html"><a href="#3-flashmess-html" class="headerlink" title="(3) flashmess.html"></a>(3) flashmess.html</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs HTML"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>æ¶ˆæ¯é—ªç°<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-tag">body</span> &#123;<span class="hljs-attribute">text-align</span>: center;&#125;</span><br><span class="language-css">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        &#123;% with messages = get_flashed_messages() %&#125;<br>            &#123;% if messages %&#125;<br>                &#123;% for message in messages %&#125;<br>                    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                &#123;% endfor %&#125;<br>            &#123;% endif %&#125;<br>        &#123;% endwith %&#125;<br>        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>æ¬¢è¿ï¼<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span> = <span class="hljs-string">&quot;&#123;&#123; url_for(&#x27;flash_login&#x27;) &#125;&#125;&quot;</span>&gt;</span>ç‚¹å‡»è¿™é‡Œè¿›è¡Œç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h3 id="4-flashlogin-html"><a href="#4-flashlogin-html" class="headerlink" title="(4) flashlogin.html"></a>(4) flashlogin.html</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs HTML"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>ç™»å½•é¡µé¢<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-tag">body</span> &#123;<span class="hljs-attribute">text-align</span>: center;&#125; <span class="hljs-selector-tag">table</span> &#123;<span class="hljs-attribute">margin</span>: auto;&#125;</span><br><span class="language-css">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;POST&quot;</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;http://localhost:5000/flashlogin&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>ç”¨æˆ·å<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>                    <span class="hljs-comment">&lt;!-- &amp;nbsp; åŠè§’ä¸æ–­è¡Œçš„ç©ºç™½æ ¼ --&gt;</span><br>                    <span class="hljs-comment">&lt;!-- &amp;ensp; åŠè§’çš„ç©ºæ ¼ --&gt;</span><br>                    <span class="hljs-comment">&lt;!-- &amp;emsp; å…¨è§’çš„ç©ºæ ¼ --&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>å¯†<span class="hljs-symbol">&amp;emsp;</span>ç <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;æ<span class="hljs-symbol">&amp;emsp;</span>äº¤&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br>        &#123;% if error %&#125;<br>            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>é”™è¯¯ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>&#123;&#123; error &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        &#123;% endif %&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h2 id="2-7-æ–‡ä»¶ä¸Šä¼ "><a href="#2-7-æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="2-7 æ–‡ä»¶ä¸Šä¼ "></a>2-7 æ–‡ä»¶ä¸Šä¼ </h2><ul>
<li>æ–‡ä»¶ä¸Šä¼ <ul>
<li>éœ€HTMLè¡¨å•ï¼Œenctypeå±æ€§è®¾ä¸ºâ€œmultipart&#x2F;form-dataâ€ï¼Œå°†æ–‡ä»¶å‘å¸ƒåˆ°URLã€‚</li>
<li>URLå¤„ç†ç¨‹åºä»<code>request.files[]</code>å¯¹è±¡ä¸­æå–æ–‡ä»¶ï¼Œå¹¶å°†å…¶ä¿å­˜åˆ°æ‰€éœ€çš„ä½ç½®ã€‚</li>
<li>æ¯ä¸ªä¸Šä¼ çš„æ–‡ä»¶é¦–å…ˆä¿å­˜åœ¨æœåŠ¡å™¨çš„ä¸´æ—¶ä½ç½®ä¸­ï¼Œç„¶åå†å°†å…¶ä¿å­˜åˆ°æœ€ç»ˆä½ç½®ä¸Šã€‚</li>
<li>ç›®æ ‡æ–‡ä»¶çš„åç§°å¯ä»¥æ˜¯ç¡¬ç¼–ç çš„ï¼Œä¹Ÿå¯ä»¥ä»<code>request.files[]</code>å¯¹è±¡çš„å±æ€§ä¸­è·å–ã€‚<ul>
<li><code>secure_filename()</code>ï¼šè·å–å®‰å…¨ç‰ˆæœ¬ã€‚</li>
<li><code>app.config[&#39;UPLOAD_FOLDER&#39;]</code>ï¼šå®šä¹‰ä¸Šä¼ æ–‡ä»¶å¤¹çš„è·¯å¾„ã€‚</li>
<li><code>app.config[&#39;MAX_CONTENT_LENGTH&#39;]</code>ï¼šæŒ‡å®šè¦ä¸Šä¼ æ–‡ä»¶å¤§å°çš„æœ€å¤§å€¼(ä»¥å­—èŠ‚ä¸ºå•ä½)ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs Xml"><span class="hljs-comment">&lt;!-- é¡¹ç›®ç›®å½•ç»“æ„ --&gt;</span><br>- upload.py<br>- templates<br>    - upload.html<br><span class="hljs-comment">&lt;!-- å‘½ä»¤çª—å£ä¸‹æ‰§è¡Œ&quot;python upload.py&quot;ï¼Œè®¿é—®[http://127.0.0.1:5000/upload] --&gt;</span><br></code></pre></td></tr></table></figure>



<h3 id="1-upload-py"><a href="#1-upload-py" class="headerlink" title="(1) upload.py"></a>(1) upload.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">from</span> werkzeug.utils <span class="hljs-keyword">import</span> secure_filename<br><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, render_template, request<br><br>app = Flask(__name__)                               <span class="hljs-comment"># ä¸Šä¼ å›¾ç‰‡è·¯å¾„è‡ªå®šä¹‰ï¼Œå¿…é¡»å­˜åœ¨ï¼Œå¦åˆ™æŠ¥é”™</span><br>app.config[<span class="hljs-string">&quot;UPLOAD_FOLDER&quot;</span>] = <span class="hljs-string">&quot;C:/Users/&lt;username&gt;/Pictures/&quot;</span><br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/upload&quot;</span></span>)                               </span><span class="hljs-comment"># è®¿é—®[http://127.0.0.1:5000/upload]</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">upload_file</span>():<br>    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&quot;upload.html&quot;</span>)<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/uploaded&quot;</span>, methods=[<span class="hljs-string">&quot;GET&quot;</span>, <span class="hljs-string">&quot;POST&quot;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">uploaded</span>():<br>    <span class="hljs-keyword">if</span> request.method == <span class="hljs-string">&quot;POST&quot;</span>:<br>        f = request.files[<span class="hljs-string">&quot;file&quot;</span>]<br>        <span class="hljs-built_in">print</span>(request.files)<br>        path = os.path.join(app.config[<span class="hljs-string">&quot;UPLOAD_FOLDER&quot;</span>], secure_filename(f.filename))<br>        <span class="hljs-built_in">print</span>(path)                                 <span class="hljs-comment"># æ³¨æ„ï¼šå›¾ç‰‡è·¯å¾„ä¸å«ä¸­æ–‡ï¼Œä¸­æ–‡æ‰“å°è¯†åˆ«ä¸åˆ°</span><br>        f.save(path)<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&lt;center&gt;æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼&lt;/center&gt;&quot;</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&quot;upload.html&quot;</span>)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>



<h3 id="2-upload-html"><a href="#2-upload-html" class="headerlink" title="(2) upload.html"></a>(2) upload.html</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs Html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>æ–‡ä»¶ä¸Šä¼ <span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;text-align:center;&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;http://localhost:5000/uploaded&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;POST&quot;</span> <span class="hljs-attr">enctype</span>=<span class="hljs-string">&quot;multipart/form-data&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;file&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;file&quot;</span> /&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;æäº¤&quot;</span> /&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h1 id="3-æ‰©å±•åŠŸèƒ½"><a href="#3-æ‰©å±•åŠŸèƒ½" class="headerlink" title="3 æ‰©å±•åŠŸèƒ½"></a>3 æ‰©å±•åŠŸèƒ½</h1><ul>
<li>æ‰©å±•åŠŸèƒ½<ul>
<li>å‘Flaskåº”ç”¨ç¨‹åºæ·»åŠ ç‰¹å®šç±»å‹çš„æ”¯æŒï¼ŒFlask Extension Registry(æ‰©å±•æ³¨å†Œè¡¨)æ˜¯ä¸€ä¸ªå¯ç”¨çš„æ‰©å±•ç›®å½•ã€‚</li>
<li>å¸¸ç”¨æ‰©å±•åŒ…<ul>
<li>Flask-migrate(ç®¡ç†è¿ç§»æ•°æ®åº“)ã€Flask-Admin(å¯æ‰©å±•çš„ç®¡ç†æ¥å£æ¡†æ¶)ã€‚</li>
<li>Flask-script(æ’å…¥è„šæœ¬)ã€Flask-Bable(æä¾›å›½é™…åŒ–å’Œæœ¬åœ°åŒ–æ”¯æŒçš„ç¿»è¯‘)ã€‚</li>
<li>Flask-Moment(æœ¬åœ°åŒ–æ—¥æœŸå’Œæ—¶é—´)ã€Flask-Bootstrap(é›†æˆå‰ç«¯çš„Twitter Bootstrapæ¡†æ¶)ã€‚</li>
<li>Flask-Session(Sessionå­˜å‚¨æ–¹å¼æŒ‡å®š)ã€Flask-OpenID(è®¤è¯)ã€Flask-RESTful(å¼€å‘REST APIçš„å·¥å…·)ã€‚</li>
<li>Flask-Mail(é‚®ä»¶)ã€Flask-WTF(è¡¨å•)ã€Flask-SQLAlchemy(æ“ä½œæ•°æ®åº“)ã€Flask-Login(è®¤è¯ç”¨æˆ·çŠ¶æ€)ã€‚</li>
</ul>
</li>
<li>æ‰©å±•é€šå¸¸å‘½åä¸ºFlask-Fooæˆ–Foo-Flaskï¼Œåœ¨PyPIæœç´¢æ ‡è®°ä¸ºâ€œ<u><a target="_blank" rel="noopener" href="https://pypi.org/search/?c=Framework+::+Flask">FRAMEWORK::FLASK</a></u>â€æ‰©å±•åŒ…ï¼Œé€šè¿‡PIPâ€‹ä¸‹è½½ã€‚</li>
</ul>
</li>
</ul>
<h2 id="3-1-Mail"><a href="#3-1-Mail" class="headerlink" title="3-1 Mail"></a>3-1 Mail</h2><ul>
<li>Mail<ul>
<li>é€šè¿‡PIPå‘½ä»¤å®‰è£…Flask-Mailæ‰©å±•ï¼š<code>pip install Flask-Mail</code>ã€‚</li>
<li>å‚æ•°<ul>
<li>MAIL_SERVER-&gt;ç”µå­é‚®ä»¶æœåŠ¡å™¨çš„åç§°æˆ–IPåœ°å€ã€MAIL_PORT-&gt;æœåŠ¡å™¨çš„ç«¯å£å·ã€‚</li>
<li>MAIL_USERNAME-&gt;å‘ä»¶äººçš„ç”¨æˆ·åã€MAIL_DEFAULT_SENDER-&gt;è®¾ç½®é»˜è®¤å‘ä»¶äººã€‚</li>
<li>MAIL_PASSWORD-&gt;å‘ä»¶äººçš„å¯†ç ã€MAIL_MAX_EMAILS-&gt;è®¾ç½®è¦å‘é€çš„æœ€å¤§é‚®ä»¶æ•°ã€‚</li>
<li>MAIL_ASCII_ATTACHMENTS-&gt;å¦‚æœå€¼è®¾ç½®ä¸ºTrueï¼Œé‚£ä¹ˆé™„åŠ çš„æ–‡ä»¶åå°†è½¬æ¢ä¸ºASCIIã€‚</li>
<li>MAIL_USE_TLS-&gt;å¯ç”¨æˆ–ç¦ç”¨ä¼ è¾“å®‰å…¨å±‚åŠ å¯†ã€MAIL_USE_SSL-&gt;å¯ç”¨æˆ–ç¦ç”¨å®‰å…¨å¥—æ¥å­—å±‚åŠ å¯†ã€‚</li>
<li>MAIL_DEBUG-&gt;é»˜è®¤è°ƒè¯•çŠ¶æ€ã€MAIL_SUPPRESS_SEND-&gt;app.testingè®¾ä¸ºTrueï¼Œåˆ™å‘é€è¢«æŠ‘åˆ¶ã€‚</li>
</ul>
</li>
<li>é‡è¦ç±»çš„å®šä¹‰<ul>
<li>Mailç±»ï¼šç®¡ç†ç”µå­é‚®ä»¶æ¶ˆæ¯ä¼ é€’éœ€æ±‚ï¼Œç±»æ„é€ å‡½æ•°ä¸º<code>flask-mail.Mail(app = None)</code>ã€‚<ul>
<li><code>send_message()</code>ï¼šå‘é€æ¶ˆæ¯çš„å¯¹è±¡ã€‚</li>
<li><code>connect()</code>ï¼šæ‰“å¼€ä¸é‚®ä»¶ä¸»æœºçš„è¿æ¥ã€‚</li>
<li><code>send()</code>ï¼šå‘é€Messageç±»å¯¹è±¡çš„å†…å®¹ã€‚</li>
</ul>
</li>
<li>Messageç±»ï¼šå°è£…ä¸€å°ç”µå­é‚®ä»¶ï¼Œç±»æ„é€ å‡½æ•°ä¸º<code>flask-mail.Message(subject, ...)</code>ã€‚<ul>
<li><code>attach()</code>ï¼šæ”¯æŒå‘é‚®ä»¶æ·»åŠ ç›¸å…³é™„ä»¶ã€‚</li>
<li><code>add_recipient()</code>ï¼šæ·»åŠ å¦ä¸€ä¸ªæ”¶ä»¶äººã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask<br><span class="hljs-keyword">from</span> flask_mail <span class="hljs-keyword">import</span> Mail, Message                <span class="hljs-comment"># flask-mailæ¨¡å—å¯¼å…¥Mailå’ŒMessageç±»</span><br><br>app = Flask(__name__)                               <span class="hljs-comment"># é…ç½®Flask-Mail</span><br><br>app.config[<span class="hljs-string">&quot;MAIL_SERVER&quot;</span>] = <span class="hljs-string">&quot;smtp.126.com&quot;</span>          <span class="hljs-comment"># 126ç”µå­é‚®ä»¶æœåŠ¡å™¨çš„åç§°æˆ–IPåœ°å€</span><br>app.config[<span class="hljs-string">&quot;MAIL_PORT&quot;</span>] = <span class="hljs-number">25</span>                        <span class="hljs-comment"># æœåŠ¡å™¨çš„ç«¯å£å·</span><br>app.config[<span class="hljs-string">&quot;MAIL_USERNAME&quot;</span>] = <span class="hljs-string">&quot;Id1@126.com&quot;</span>         <span class="hljs-comment"># å‘ä»¶äººçš„ç”¨æˆ·å</span><br>app.config[<span class="hljs-string">&quot;MAIL_PASSWORD&quot;</span>] = <span class="hljs-string">&quot;******&quot;</span>              <span class="hljs-comment"># å‘ä»¶äººçš„å¯†ç (æˆæƒç )</span><br><span class="hljs-comment"># å¹¶éä½¿ç”¨é‚®ç®±å¯†ç è€Œæ˜¯æˆæƒç ï¼Œæ³¨æ„æˆæƒç éœ€é‡æ–°è·å–ï¼Œæ—§çš„ä¸è¡Œï¼Œå¦åˆ™æŠ¥é”™smtplib.SMTPAuthenticationError</span><br><span class="hljs-comment"># å°†é‚®ç®±çš„å®‰å…¨éªŒè¯çº§åˆ«é™è‡³æœ€ä½ï¼Œä¾‹å¦‚ï¼šè®¾äº†é‚®ç®±ç™»å½•äºŒæ¬¡éªŒè¯(å¯†ç ç™»å½•åéœ€è¾“å…¥æ‰‹æœºéªŒè¯ç )ï¼Œå°†è¯¥åŠŸèƒ½å…³é—­</span><br><span class="hljs-comment"># ssl.SSLError: [SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:1129)ï¼ŒMAIL_USE_SSLæ”¹ä¸ºFalse</span><br>app.config[<span class="hljs-string">&quot;MAIL_USE_SSL&quot;</span>] = <span class="hljs-literal">False</span>                  <span class="hljs-comment"># ç¦ç”¨å®‰å…¨å¥—æ¥å­—å±‚åŠ å¯†</span><br>app.config[<span class="hljs-string">&quot;MAIL_USE_TLS&quot;</span>] = <span class="hljs-literal">False</span>                  <span class="hljs-comment"># ç¦ç”¨ä¼ è¾“å®‰å…¨å±‚åŠ å¯†</span><br>mail = Mail(app)                                    <span class="hljs-comment"># åˆ›å»ºMailç±»çš„å®ä¾‹</span><br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/&quot;</span></span>)                                     </span><span class="hljs-comment"># è®¿é—®[http://127.0.0.1:5000/]å³å‘é€é‚®ä»¶</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">index</span>():<br>    msg = Message(<span class="hljs-string">&quot;Flask-Mailæµ‹è¯•&quot;</span>, sender=<span class="hljs-string">&quot;Id1@126.com&quot;</span>, recipients=[<span class="hljs-string">&quot;Id2@126.com&quot;</span>])<br>    msg.body = <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        Nameï¼šDr.626</span><br><span class="hljs-string">        Descriptionï¼šæµ‹è¯•Flask-Mailæ‰©å±•æ˜¯å¦ç”Ÿæ•ˆã€‚</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    mail.send(msg)<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&lt;center&gt;å‘é€æˆåŠŸï¼&lt;/center&gt;&quot;</span><br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>



<h2 id="3-2-WTF"><a href="#3-2-WTF" class="headerlink" title="3-2 WTF*"></a>3-2 WTF*</h2><ul>
<li>WTF<ul>
<li>PIPå‘½ä»¤å®‰è£…Flask-WTFæ‰©å±•ï¼š<code>pip install Flask-WTF</code>ã€‚</li>
<li>WTformsåŒ…ä¸­çš„æ ‡å‡†è¡¨å•å­—æ®µ<ul>
<li>DecimalField-&gt;æ˜¾ç¤ºå¸¦å°æ•°çš„æ•°å­—æ–‡æœ¬å­—æ®µã€TextAreaField-&gt;<code>&lt;textarea&gt;</code>ã€‚</li>
<li>SelectField-&gt;é€‰æ‹©è¡¨å•å…ƒç´ ã€PasswordField-&gt;<code>&lt;input type=&#39;password&#39;&gt;</code>ã€‚</li>
<li>IntegerField-&gt;æ˜¾ç¤ºæ•´æ•°çš„æ–‡æœ¬å­—æ®µã€RadioField-&gt;<code>&lt;input type=&#39;radio&#39;&gt;</code>ã€‚</li>
<li>StringField-&gt;<code>&lt;input type=&#39;text&#39;&gt;</code>ã€SubmitField-&gt;<code>&lt;input type=&#39;submit&#39;&gt;</code>ã€‚</li>
<li>BooleanField-&gt;<code>&lt;input type=&#39;checkbox&#39;&gt;</code>ã€‚</li>
</ul>
</li>
<li>WTFormsåŒ…ä¸­å¸¸ç”¨çš„éªŒè¯å™¨<ul>
<li>NumberRange-&gt;éªŒè¯ç»™å®šèŒƒå›´å†…è¾“å…¥å­—æ®µä¸­çš„æ•°å­—ã€URL-&gt;éªŒè¯åœ¨è¾“å…¥å­—æ®µä¸­è¾“å…¥çš„URLã€‚</li>
<li>DataRequired-&gt;æ£€æŸ¥è¾“å…¥å­—æ®µæ˜¯å¦ä¸ºç©ºã€Email-&gt;æ£€æŸ¥å­—æ®µä¸­çš„æ–‡æœ¬æ˜¯å¦éµå¾ªç”µå­é‚®ä»¶çš„IDçº¦å®šã€‚</li>
<li>IPAddress-&gt;è¾“å…¥å­—æ®µä¸­éªŒè¯IPåœ°å€ã€Length-&gt;éªŒè¯è¾“å…¥å­—æ®µä¸­çš„å­—ç¬¦ä¸²é•¿åº¦æ˜¯å¦åœ¨ç»™å®šèŒƒå›´å†…ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs Xml"><span class="hljs-comment">&lt;!-- é¡¹ç›®ç›®å½•ç»“æ„ --&gt;</span><br>- form.py<br>- formnew.py<br>- templates<br>    - formfill.html<br>    - formsub.html<br><span class="hljs-comment">&lt;!-- å‘½ä»¤çª—å£ä¸‹æ‰§è¡Œ&quot;python form.py&quot;ï¼Œè®¿é—®[http://127.0.0.1:5000/formfill] --&gt;</span><br></code></pre></td></tr></table></figure>



<h3 id="1-form-py"><a href="#1-form-py" class="headerlink" title="(1) form.py"></a>(1) form.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> formnew <span class="hljs-keyword">import</span> ContactForm<br><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, render_template, request, flash<br><br>app = Flask(__name__)<br>app.secret_key = <span class="hljs-string">&quot;flask wtf&quot;</span><br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/formfill&quot;</span>, methods=[<span class="hljs-string">&quot;GET&quot;</span>, <span class="hljs-string">&quot;POST&quot;</span>]</span>)    </span><span class="hljs-comment"># è®¿é—®[http://127.0.0.1:5000/formfill]ï¼Œå¡«å†™æ•°æ®</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">form_fill</span>():<br>    form = ContactForm()                            <span class="hljs-comment"># formnew.pyä¸­è®¾ç½®äº†nameä¸emailå¿…å¡«</span><br><br>    <span class="hljs-keyword">if</span> request.method == <span class="hljs-string">&quot;POST&quot;</span>:<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> form.validate():                     <span class="hljs-comment"># åˆ¤æ–­å¿…å¡«é¡¹æ˜¯å¦å…¨éƒ¨å¡«å†™ï¼Œæ²¡æœ‰åˆ™æç¤ºï¼Œæœ‰åˆ™è·³è½¬é¡µé¢</span><br>            flash(<span class="hljs-string">&quot;è¯·å¡«å†™æ‰€æœ‰å¿…å¡«å­—æ®µã€‚&quot;</span>)<br>            <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&quot;formfill.html&quot;</span>, form=form)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&quot;formsub.html&quot;</span>)  <span class="hljs-comment"># ä¸ºä»€ä¹ˆæäº¤åè·³è½¬é¡µé¢çš„URLä»ä¸ºâ€œ/formfillâ€ï¼Ÿï¼Ÿï¼Ÿ</span><br>    <span class="hljs-keyword">elif</span> request.method == <span class="hljs-string">&quot;GET&quot;</span>:<br>        <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&quot;formfill.html&quot;</span>, form=form)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>



<h3 id="2-formnew-py"><a href="#2-formnew-py" class="headerlink" title="(2) formnew.py"></a>(2) formnew.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> wtforms <span class="hljs-keyword">import</span> validators<br><span class="hljs-keyword">from</span> flask_wtf <span class="hljs-keyword">import</span> FlaskForm<br><span class="hljs-keyword">from</span> wtforms <span class="hljs-keyword">import</span> StringField, IntegerField, TextAreaField, SubmitField, RadioField, SelectField<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ContactForm</span>(<span class="hljs-title class_ inherited__">FlaskForm</span>):<br>    name = StringField(<span class="hljs-string">&quot;å§“å&quot;</span>, [validators.DataRequired(message=<span class="hljs-string">&quot;è¯·è¾“å…¥ä½ çš„å§“å!&quot;</span>)])<br>    sex = RadioField(<span class="hljs-string">&quot;æ€§åˆ«&quot;</span>, choices=[(<span class="hljs-string">&quot;M&quot;</span>, <span class="hljs-string">&quot;ç”·&quot;</span>), (<span class="hljs-string">&quot;F&quot;</span>, <span class="hljs-string">&quot;å¥³&quot;</span>)])<br>    address = TextAreaField(<span class="hljs-string">&quot;åœ°å€&quot;</span>)<br>    email = StringField(<span class="hljs-string">&quot;é‚®ä»¶&quot;</span>,                     <span class="hljs-comment"># æ ¡éªŒé‚®ç®±æ˜¯å¦å¿…å¡«ï¼Œä»¥åŠé‚®ç®±æ­£ç¡®æ€§</span><br>                        [validators.DataRequired(message=<span class="hljs-string">&quot;è¯·è¾“å…¥ä½ çš„é‚®ä»¶åœ°å€!&quot;</span>),<br>                         validators.Email(message=<span class="hljs-string">&quot;è¯·è¾“å…¥æ­£ç¡®çš„é‚®ä»¶åœ°å€!&quot;</span>)])<br>    age = IntegerField(<span class="hljs-string">&quot;å¹´é¾„&quot;</span>)<br>    <span class="hljs-comment"># language = SelectField(&quot;è¯­è¨€&quot;, choices=[&quot;C#&quot;, &quot;CPP&quot;, &quot;Java&quot;, &quot;Python&quot;, &quot;Golang&quot;])</span><br>    <span class="hljs-comment"># languageä¸Šè¿°å†™æ³•ï¼Œæ‰§è¡Œæ—¶å¯èƒ½æŠ¥é”™ValueError: too many values to unpack (expected 2)</span><br>    language = SelectField(<br>        <span class="hljs-string">&quot;è¯­è¨€&quot;</span>,<br>        choices=[<br>            (<span class="hljs-string">&quot;c#&quot;</span>, <span class="hljs-string">&quot;C#&quot;</span>), (<span class="hljs-string">&quot;cpp&quot;</span>, <span class="hljs-string">&quot;CPP&quot;</span>), (<span class="hljs-string">&quot;java&quot;</span>, <span class="hljs-string">&quot;Java&quot;</span>), <br>            (<span class="hljs-string">&quot;python&quot;</span>, <span class="hljs-string">&quot;Python&quot;</span>), (<span class="hljs-string">&quot;golang&quot;</span>, <span class="hljs-string">&quot;Golang&quot;</span>)<br>        ],<br>        default=<span class="hljs-string">&quot;python&quot;</span>,<br>        render_kw=&#123;<span class="hljs-string">&quot;style&quot;</span>: <span class="hljs-string">&quot;width:180px;height:30px;&quot;</span>&#125;,<br>    )<br>    submit = SubmitField(<span class="hljs-string">&quot;æäº¤&quot;</span>)<br></code></pre></td></tr></table></figure>



<h3 id="3-formfill-html"><a href="#3-formfill-html" class="headerlink" title="(3) formfill.html"></a>(3) formfill.html</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs Html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>è¡¨å•å¡«å†™<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;text-align: center;&quot;</span>&gt;</span>Flask-WTFè¡¨å•<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;http://localhost:5000/formfill&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;POST&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">fieldset</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">legend</span>&gt;</span>Flask-WTFè¡¨å•<span class="hljs-tag">&lt;/<span class="hljs-name">legend</span>&gt;</span><br>                <span class="hljs-comment">&lt;!-- formnew.pyçš„ContactFormç±»åˆ›å»ºnameå­—æ®µæ—¶ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºCSRFä»¤ç‰Œçš„éšè—å­—æ®µ --&gt;</span><br>                <span class="hljs-comment">&lt;!-- é˜²æ­¢è·¨ç«™è¯·æ±‚ä¼ªé€ æ”»å‡»ï¼ŒCSRFä»¤ç‰Œçš„éšè—å­—æ®µï¼Œç›¸å½“äºå¦‚ä¸‹è„šæœ¬ --&gt;</span><br>                <span class="hljs-comment">&lt;!-- &lt;input id=&quot;csrf_token&quot; name=&quot;csrf_token&quot; type=&quot;hidden&quot; /&gt; --&gt;</span><br>                &#123;&#123; form.hidden_tag() &#125;&#125;<br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;font-size:20px;font-weight:bold;text-align:center;&quot;</span>&gt;</span><br>                    &#123;&#123; form.name.label &#125;&#125;<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>                    &#123;&#123; form.name(style=&quot;width:170px;height:20px;&quot;) &#125;&#125;<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>                    <span class="hljs-comment">&lt;!-- è¿™é‡Œè²Œä¼¼åªæ ¡éªŒäº†é‚®ç®±çš„æ­£ç¡®æ€§ï¼Œå¿…å¡«é¡¹å¼¹çª—æç¤ºè¯éƒ½ä¸€è‡´ --&gt;</span><br>                    <span class="hljs-comment">&lt;!-- å¹¶ä¸æ˜¯formnew.pyæ–‡ä»¶ä¸­è‡ªå®šä¹‰çš„æç¤ºè¯ --&gt;</span><br>                    &#123;% for message in form.name.errors %&#125;<br>                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;alert alert-danger&quot;</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                    &#123;% endfor %&#125;<br>                    &#123;&#123; form.sex.label &#125;&#125;<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>                    &#123;&#123; form.sex(style=&quot;display:inline-block;text-align:center;&quot;) &#125;&#125;<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>                    &#123;&#123; form.address.label &#125;&#125;<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>                    &#123;&#123; form.address(style=&quot;width:170px;height:20px;&quot;) &#125;&#125;<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>                    &#123;&#123; form.email.label &#125;&#125;<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>                    &#123;&#123; form.email(style=&quot;width:170px;height:20px;&quot;) &#125;&#125;<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>                    &#123;% for message in form.email.errors %&#125;<br>                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;alert alert-danger&quot;</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                    &#123;% endfor %&#125;<br>                    &#123;&#123; form.age.label &#125;&#125;<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>                    &#123;&#123; form.age(style=&quot;width:170px;height:20px;&quot;) &#125;&#125;<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>                    &#123;&#123; form.language.label &#125;&#125;<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>                    <span class="hljs-comment">&lt;!-- &#123;&#123; form.language(style=&quot;width:180px;height:30px;&quot;) &#125;&#125;&lt;br&gt;&lt;br&gt; --&gt;</span><br>                    &#123;&#123; form.language() &#125;&#125;<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>                    &#123;&#123; form.submit(style=&quot;width:50px;height:30px;&quot;) &#125;&#125;<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">fieldset</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h3 id="4-formsub-html"><a href="#4-formsub-html" class="headerlink" title="(4) formsub.html"></a>(4) formsub.html</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs Html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>æäº¤æ˜¾ç¤º<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">center</span>&gt;</span>ä¿¡æ¯æäº¤æˆåŠŸï¼<span class="hljs-tag">&lt;/<span class="hljs-name">center</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h2 id="3-3-Sijax"><a href="#3-3-Sijax" class="headerlink" title="3-3 Sijax*"></a>3-3 Sijax*</h2><ul>
<li>Sijax<ul>
<li>å³Simple Ajaxï¼Œå¯è½»æ¾åœ°å®ç°AJAXåŠŸèƒ½ï¼ŒPIPå®‰è£…Flask-Sijaxæ‰©å±•ï¼š<code>pip install flask-sijax</code>ã€‚</li>
<li>Flask-Sijaxæ˜¯ä¸€ä¸ªä¸“é—¨ä¸ºFlaskè®¾è®¡çš„Sijaxæ‰©å±•ï¼Œæä¾›äº†ä¸Flaskæ— ç¼é›†æˆçš„APIï¼Œä¹Ÿæ˜¯ä¸ªè½»é‡çº§çš„åº“ã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs Xml"><span class="hljs-comment">&lt;!-- é¡¹ç›®ç›®å½•ç»“æ„ --&gt;</span><br>- sijaxapp.py<br>- templates<br>    - sijaxapp.html<br><span class="hljs-comment">&lt;!-- å‘½ä»¤çª—å£ä¸‹æ‰§è¡Œ&quot;python sijaxapp.py&quot;ï¼Œè®¿é—®[http://127.0.0.1:5000/] --&gt;</span><br></code></pre></td></tr></table></figure>



<h3 id="1-sijaxapp-py"><a href="#1-sijaxapp-py" class="headerlink" title="(1) sijaxapp.py"></a>(1) sijaxapp.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> flask_sijax, os<br><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, g, render_template<br><br>app = Flask(__name__)<br><br><span class="hljs-comment"># SIJAX_STATIC_PATHï¼Œè¦è¢«é•œåƒçš„Sijax javascriptæ–‡ä»¶çš„é™æ€è·¯å¾„ï¼Œé»˜è®¤â€œ/static/js/sijax/â€</span><br><span class="hljs-comment"># SIJAX_JSON_URIï¼Œä»ä¸­åŠ è½½json2.jsé™æ€æ–‡ä»¶çš„URIï¼ŒSijaxä½¿ç”¨Jsonåœ¨æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ é€’æ•°æ®</span><br>path = os.path.join(<span class="hljs-string">&quot;.&quot;</span>, os.path.dirname(__file__), <span class="hljs-string">&quot;static/js/sijax/&quot;</span>)<br>app.config[<span class="hljs-string">&quot;SIJAX_STATIC_PATH&quot;</span>] = path<br>app.config[<span class="hljs-string">&quot;SIJAX_JSON_URI&quot;</span>] = <span class="hljs-string">&quot;/static/js/sijax/json2.js&quot;</span><br>flask_sijax.Sijax(app)<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/&quot;</span></span>)                                     </span><span class="hljs-comment"># è®¿é—®[http://127.0.0.1:5000/]</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">index</span>():<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&lt;center&gt;&lt;a href=&#x27;/app&#x27;&gt;è·³è½¬appé¡µé¢&lt;/a&gt;&lt;/center&gt;&quot;</span><br><br><br><span class="hljs-meta">@flask_sijax.route(<span class="hljs-params">app, <span class="hljs-string">&quot;/app&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">hello</span>():<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">say_hi</span>(<span class="hljs-params">obj_response</span>):<br>        obj_response.alert(<span class="hljs-string">&quot;Hi there!&quot;</span>)             <span class="hljs-comment"># å‡½æ•°å›å¤æµè§ˆå™¨çš„æ–¹å¼</span><br>        <span class="hljs-keyword">if</span> g.sijax.is_sijax_request:                <span class="hljs-comment"># ä¸ºä»€ä¹ˆä¸ä¼šå¼¹çª—æ˜¾ç¤ºå†…å®¹ï¼Ÿï¼Ÿï¼Ÿ</span><br>            g.sijax.register_callback(<span class="hljs-string">&quot;say_hi&quot;</span>, say_hi)<br>        <span class="hljs-keyword">return</span> g.sijax.process_request()            <span class="hljs-comment"># æ£€æµ‹åˆ°Ajaxè¯·æ±‚æ—¶ï¼ŒSijaxä¼šè‡ªè¡Œå¤„ç†</span><br>    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&quot;sijaxapp.html&quot;</span>)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>



<h3 id="2-sijaxapp-html"><a href="#2-sijaxapp-html" class="headerlink" title="(2) sijaxapp.html"></a>(2) sijaxapp.html</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs Html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Flask-Sijax<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- è°ƒç”¨ç™¾åº¦çš„jQueryåŠ é€Ÿ --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;http://libs.baidu.com/jquery/2.0.0/jquery.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- å®‰è£…Flask-sijaxæ—¶é»˜è®¤å®‰è£…çš„sijax.js --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/static/js/sijax/sijax.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- ä½¿ç”¨è¿‡æ»¤å™¨safeç¦æ­¢è½¬è¯‘sijax_get_js() --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-handlebars"><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">g.sijax.get_js</span>()|safe &#125;&#125;</span></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;text-align: center;&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Flask-Sijax<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- åˆ›å»ºidä¸ºmy_formçš„è¡¨å• --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;my_form&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;admin&quot;</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;123456&quot;</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- ä½¿ç”¨Sijax.getFormValuesæ–¹æ³•è·å–idä¸ºmy_formçš„è¡¨å•æ•°æ® --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> values = <span class="hljs-title class_">Sijax</span>.<span class="hljs-title function_">getFormValues</span>(<span class="hljs-string">&quot;#my_form&quot;</span>);</span><br><span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript://&quot;</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;Sijax.request(&#x27;say_hi&#x27;, values);&quot;</span>&gt;</span>ç‚¹å‡»è¿™é‡Œ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- å•å‡»é“¾æ¥å°†å‘æœåŠ¡å™¨å‘å‡ºä¸€ä¸ªSijaxè¯·æ±‚ï¼Œä¸€ä¸ªç‰¹æ®Šçš„jQuery.ajax()è¯·æ±‚ --&gt;</span><br>        <span class="hljs-comment">&lt;!-- å…·ä½“å‚çœ‹Flask-Sijaxå®˜ç½‘â€œhttps://pythonhosted.org/Flask-Sijax/â€ --&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h2 id="3-4-SQLite"><a href="#3-4-SQLite" class="headerlink" title="3-4 SQLite"></a>3-4 SQLite</h2><ul>
<li>SQLite<ul>
<li>é€šè¿‡PIPå‘½ä»¤å®‰è£…SQLiteæ‰©å±•ï¼š<code>pip install sqlite3</code>ã€‚</li>
<li>SQLiteæ˜¯ä¸€ç§åµŒå…¥å¼æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œæ˜“äºä½¿ç”¨æ— éœ€é…ç½®ã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs Xml"><span class="hljs-comment">&lt;!-- é¡¹ç›®ç›®å½•ç»“æ„ --&gt;</span><br>- adox.py<br>- sqloper.py<br>- templates<br>    - sqlres.html<br>    - sqlstu.html<br>    - sqllist.html<br>    - sqlhome.html<br><span class="hljs-comment">&lt;!-- å‘½ä»¤çª—å£ä¸‹æ‰§è¡Œ&quot;python sqloper.py&quot;ï¼Œè®¿é—®[http://127.0.0.1:5000/] --&gt;</span><br></code></pre></td></tr></table></figure>



<h3 id="1-adox-py"><a href="#1-adox-py" class="headerlink" title="(1) adox.py"></a>(1) adox.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> sqlite3                                       <span class="hljs-comment"># å®ä¾‹æ“ä½œå‰éœ€è¦å…ˆåˆ›å»ºæ•°æ®åº“å’Œæ•°æ®è¡¨</span><br><br>conn = sqlite3.connect(<span class="hljs-string">&quot;database.db&quot;</span>)                <span class="hljs-comment"># åˆ›å»ºSQLiteæ•°æ®åº“å’Œä¸€ä¸ªå­¦ç”Ÿè¡¨</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æˆåŠŸæ‰“å¼€æ•°æ®åº“ï¼&quot;</span>)<br><br>conn.execute(<span class="hljs-string">&quot;CREATE TABLE students (name TEXT, address TEXT, city TEXT, pin TEXT)&quot;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æ•°æ®è¡¨åˆ›å»ºæˆåŠŸï¼&quot;</span>)<br>conn.close()<br></code></pre></td></tr></table></figure>



<h3 id="2-sqloper-py"><a href="#2-sqloper-py" class="headerlink" title="(2) sqloper.py"></a>(2) sqloper.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> sqlite3 <span class="hljs-keyword">as</span> sql                               <span class="hljs-comment"># å®ä¾‹å°†å­¦ç”Ÿä¿¡æ¯æ·»åŠ åˆ°æ•°æ®åº“ä¸­ï¼Œå¹¶åˆ—è¡¨å±•ç¤º</span><br><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, render_template, request<br><br>app = Flask(__name__)<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/&quot;</span></span>)                                     </span><span class="hljs-comment"># æ˜¾ç¤º[127.0.0.1:5000]ä¸»é¡µï¼Œé“¾æ¥åˆ°sqlhome.html</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">sql_home</span>():<br>    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&quot;sqlhome.html&quot;</span>)<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/sqlstu&quot;</span></span>)                               </span><span class="hljs-comment"># é¡µé¢è¡¨å•æ·»åŠ å­¦ç”Ÿè®°å½•ï¼Œé“¾æ¥åˆ°sqlstu.html</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">new_stu</span>():<br>    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&quot;sqlstu.html&quot;</span>)<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/addrec&quot;</span>, methods=[<span class="hljs-string">&quot;POST&quot;</span>, <span class="hljs-string">&quot;GET&quot;</span>]</span>)      </span><span class="hljs-comment"># å°†è¡¨å•è®°å½•æ’å…¥æ•°æ®åº“å¯¹åº”çš„è¡¨ä¸­</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">add_rec</span>():<br>    <span class="hljs-keyword">global</span> msg<br>    <span class="hljs-keyword">if</span> request.method == <span class="hljs-string">&quot;POST&quot;</span>:<br>        <span class="hljs-keyword">try</span>:<br>            name = request.form[<span class="hljs-string">&quot;name&quot;</span>]             <span class="hljs-comment"># è¿™é‡Œå¹¶æœªåšè¡¨å•å†…å®¹çš„æ ¡éªŒ</span><br>            address = request.form[<span class="hljs-string">&quot;address&quot;</span>]<br>            city = request.form[<span class="hljs-string">&quot;city&quot;</span>]<br>            pin = request.form[<span class="hljs-string">&quot;pin&quot;</span>]<br>            <span class="hljs-keyword">with</span> sql.connect(<span class="hljs-string">&quot;database.db&quot;</span>) <span class="hljs-keyword">as</span> con:<br>                cur = con.cursor()                  <span class="hljs-comment"># æ‰“å¼€database.dbæ•°æ®åº“</span><br>                cur.execute(<span class="hljs-string">&quot;INSERT INTO students (name, address, city, pin) \</span><br><span class="hljs-string">                            VALUES(?, ?, ?, ?)&quot;</span>, (name, address, city, pin))<br>                con.commit()                        <span class="hljs-comment"># å°†æ•°æ®æ’å…¥æ•°æ®åº“ä¸­å¹¶commitæäº¤</span><br>                msg = <span class="hljs-string">&quot;è®°å½•æ·»åŠ æˆåŠŸï¼&quot;</span><br>        <span class="hljs-keyword">except</span>:<br>            con.rollback()<br>            msg = <span class="hljs-string">&quot;æ’å…¥æ“ä½œæœ‰è¯¯ï¼&quot;</span><br>        <span class="hljs-keyword">finally</span>:<br>            <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&quot;sqlres.html&quot;</span>, msg=msg)<br>            con.close()                             <span class="hljs-comment"># å…³é—­æ•°æ®åº“è¿æ¥ï¼Œé‡Šæ”¾èµ„æºé¿å…æ½œåœ¨çš„é—®é¢˜</span><br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/sqllist&quot;</span></span>)                              </span><span class="hljs-comment"># ä»æ•°æ®åº“ä¸­æ£€ç´¢æ‰€æœ‰å­¦ç”Ÿä¿¡æ¯ï¼Œå¹¶åœ¨é¡µé¢å±•ç¤º</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">sql_list</span>():<br>    con = sql.connect(<span class="hljs-string">&quot;database.db&quot;</span>)<br>    con.row_factory = sql.Row<br>    cur = con.cursor()<br>    cur.execute(<span class="hljs-string">&quot;SELECT * FROM students&quot;</span>)           <span class="hljs-comment"># æ•°æ®è¡¨è®°å½•æŸ¥è¯¢è¯­å¥</span><br>    rows = cur.fetchall()<br>    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&quot;sqllist.html&quot;</span>, rows=rows)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>



<h3 id="3-sqlres-html"><a href="#3-sqlres-html" class="headerlink" title="(3) sqlres.html"></a>(3) sqlres.html</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs Html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>æ·»åŠ ç»“æœ<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;text-align: center;&quot;</span>&gt;</span><br>        æ·»åŠ åçš„ç»“æœ : &#123;&#123; msg &#125;&#125;<br>        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span> = <span class="hljs-string">&quot;\&quot;</span>&gt;</span>ç‚¹å‡»å›åˆ°é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h3 id="4-sqlstu-html"><a href="#4-sqlstu-html" class="headerlink" title="(4) sqlstu.html"></a>(4) sqlstu.html</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs Html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>è¡¨å•å¡«å†™<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;&#123;&#123; url_for(&#x27;add_rec&#x27;) &#125;&#125;&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;POST&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;text-align: center;&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>å­¦ç”Ÿä¿¡æ¯<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>å§“å<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width: 180px; height: 30px;&quot;</span> /&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>åœ°å€<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;address&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width: 180px; height: 30px;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">textarea</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>åŸå¸‚<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;city&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width: 180px; height: 30px;&quot;</span> /&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>è®¤è¯ç <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;pin&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width: 180px; height: 30px;&quot;</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;æäº¤&quot;</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h3 id="5-sqllist-html"><a href="#5-sqllist-html" class="headerlink" title="(5) sqllist.html"></a>(5) sqllist.html</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs Html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>åˆ—è¡¨å±•ç¤º<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-tag">body</span> &#123;<span class="hljs-attribute">text-align</span>: center;&#125; <span class="hljs-selector-tag">table</span> &#123;<span class="hljs-attribute">margin</span>: auto;&#125;</span><br><span class="language-css">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">border</span>=<span class="hljs-string">2</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">thead</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>å§“å<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>åœ°å€<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>åŸå¸‚<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>è®¤è¯ç <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">thead</span>&gt;</span><br>            &#123;% for row in rows %&#125;<br>                <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>&#123;&#123; row[&quot;name&quot;] &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>&#123;&#123; row[&quot;address&quot;] &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>&#123;&#123; row[&quot;city&quot;] &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>&#123;&#123; row[&quot;pin&quot;] &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>            &#123;% endfor %&#125;<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span> = <span class="hljs-string">&quot;/&quot;</span>&gt;</span>ç‚¹å‡»å›åˆ°é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h3 id="6-sqlhome-html"><a href="#6-sqlhome-html" class="headerlink" title="(6) sqlhome.html"></a>(6) sqlhome.html</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs Html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>æ•°æ®æ“ä½œ<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;text-align: center;&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/sqlstu&quot;</span>&gt;</span>æ·»åŠ è®°å½•<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/sqllist&quot;</span>&gt;</span>åˆ—è¡¨å±•ç¤º<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h2 id="3-5-SQLAlchemy"><a href="#3-5-SQLAlchemy" class="headerlink" title="3-5 SQLAlchemy"></a>3-5 SQLAlchemy</h2><ul>
<li>SQLAlchemy<ul>
<li>PIPå‘½ä»¤å®‰è£…Flask-SQLAlchemyæ‰©å±•ï¼š<code>pip install flask-sqlalchemy</code>ã€‚</li>
<li>Flask-SQLAlchemyæ˜¯Flaskæ¡†æ¶çš„ä¸€ä¸ªæ‰©å±•ï¼Œæä¾›äº†ä¸€ç§ç®€å•æ˜“ç”¨çš„æ–¹å¼æ¥æ“ä½œSQLæ•°æ®åº“ã€‚</li>
<li>ä½¿ç”¨SQLAlchemyå¯è½»æ¾å®šä¹‰æ•°æ®æ¨¡å‹ã€æŸ¥è¯¢æ•°æ®å¹¶è¿›è¡ŒCRUDæ“ä½œï¼Œä¸å¿…ç¼–å†™åŸå§‹SQLè¯­å¥ã€‚</li>
<li>ORMï¼ŒObject-Relational Mappingï¼Œå¯¹è±¡å…³ç³»æ˜ å°„ï¼ŒORM APIæä¾›äº†æ‰§è¡ŒCRUDæ“ä½œçš„æ–¹æ³•ã€‚<ul>
<li>å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€å¹³å°æ˜¯é¢å‘å¯¹è±¡çš„ï¼Œè€ŒRDBMSæœåŠ¡å™¨ä¸­çš„æ•°æ®å­˜å‚¨ä¸ºè¡¨ã€‚</li>
<li>ORMå°†å…³ç³»æ•°æ®åº“è¡¨è§†ä¸ºå¯¹è±¡ï¼ŒæŠŠå¯¹è±¡å‚æ•°æ˜ å°„åˆ°åº•å±‚RDBMSè¡¨ç»“æ„ä¸­ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs Xml"><span class="hljs-comment">&lt;!-- é¡¹ç›®ç›®å½•ç»“æ„ --&gt;</span><br>- sqlaloper.py<br>- templates<br>    - sqlalnew.html<br>    - sqlalshow.html<br><span class="hljs-comment">&lt;!-- å‘½ä»¤çª—å£ä¸‹æ‰§è¡Œ&quot;python sqlaloper.py&quot;ï¼Œè®¿é—®[http://127.0.0.1:5000/] --&gt;</span><br></code></pre></td></tr></table></figure>



<h3 id="1-sqlaloper-py"><a href="#1-sqlaloper-py" class="headerlink" title="(1) sqlaloper.py"></a>(1) sqlaloper.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> flask_sqlalchemy <span class="hljs-keyword">import</span> SQLAlchemy             <span class="hljs-comment"># æ”¯æŒæ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤å’ŒæŸ¥çœ‹å­¦ç”Ÿä¿¡æ¯</span><br><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, request, flash, url_for, redirect, render_template<br><br>app = Flask(__name__)<br>app.config[<span class="hljs-string">&quot;SQLALCHEMY_DATABASE_URI&quot;</span>] = <span class="hljs-string">&quot;sqlite:///students.sqlite3&quot;</span><br>app.config[<span class="hljs-string">&quot;SECRET_KEY&quot;</span>] = <span class="hljs-string">&quot;flask sqlalchemy&quot;</span><br><br>db = SQLAlchemy(app)<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">students</span>(db.Model):                           <span class="hljs-comment"># studentsç±»ç»§æ‰¿è‡ªdb.Modelç±»</span><br>    <span class="hljs-built_in">id</span> = db.Column(<span class="hljs-string">&quot;id&quot;</span>, db.Integer, primary_key=<span class="hljs-literal">True</span>)<br>    name = db.Column(db.String(<span class="hljs-number">100</span>))                <span class="hljs-comment"># å®šä¹‰äº†idã€nameã€cityå’Œaddresså››ä¸ªå±æ€§</span><br>    city = db.Column(db.String(<span class="hljs-number">50</span>))<br>    address = db.Column(db.String(<span class="hljs-number">200</span>))<br>    pincode = db.Column(db.String(<span class="hljs-number">10</span>))<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name, city, address, pincode</span>):<br>        self.name = name                            <span class="hljs-comment"># å®šä¹‰æ„é€ å‡½æ•°ï¼Œä½¿ç”¨å››ä¸ªå‚æ•°åˆå§‹åŒ–ç±»å®ä¾‹çš„å±æ€§</span><br>        self.city = city<br>        self.address = address<br>        self.pincode = pincode                      <span class="hljs-comment"># è®¿é—®[http://127.0.0.1:5000]</span><br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/&quot;</span></span>)                                     </span><span class="hljs-comment"># ä¸»åº”ç”¨ç¨‹åºå®šä¹‰ä¸¤ä¸ªè·¯ç”±å™¨ï¼Œâ€œ/â€å’Œâ€œ/sqlalnewâ€</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">sqlal_show</span>():                                   <span class="hljs-comment"># è®¿é—®æ ¹è·¯å¾„æ—¶æ¸²æŸ“sqlalshow.htmlå¹¶æ˜¾ç¤ºæ‰€æœ‰è®°å½•</span><br>    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&quot;sqlalshow.html&quot;</span>, students=students.query.<span class="hljs-built_in">all</span>())<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/sqlalnew&quot;</span>, methods=[<span class="hljs-string">&quot;GET&quot;</span>, <span class="hljs-string">&quot;POST&quot;</span>]</span>)    </span><span class="hljs-comment"># è®¿é—®â€œ/sqlalnewâ€è·¯å¾„æ—¶æ¸²æŸ“sqlalnew.htmlæ¨¡æ¿</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">sqlal_new</span>():                                    <span class="hljs-comment"># å¹¶å…è®¸ç”¨æˆ·æ·»åŠ æ–°çš„è®°å½•åˆ°SQLite3æ•°æ®åº“ä¸­</span><br>    <span class="hljs-keyword">if</span> request.method == <span class="hljs-string">&quot;POST&quot;</span>:                    <span class="hljs-comment"># è¡¨å•æ ¡éªŒï¼Œå¦‚æœç”¨æˆ·æäº¤å¤±è´¥ï¼Œåˆ™æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> request.form[<span class="hljs-string">&quot;name&quot;</span>] <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> request.form[<span class="hljs-string">&quot;city&quot;</span>] <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> request.form[<span class="hljs-string">&quot;address&quot;</span>]:<br>            flash(<span class="hljs-string">&quot;è¯·è¾“å…¥æ‰€æœ‰å­—æ®µï¼&quot;</span>, <span class="hljs-string">&quot;error&quot;</span>)<br>        <span class="hljs-keyword">else</span>:                                       <span class="hljs-comment"># ç”¨æˆ·æäº¤æˆåŠŸï¼Œåˆ™å°†æ–°è®°å½•æ·»åŠ åˆ°æ•°æ®åº“ä¸­</span><br>            student = students(request.form[<span class="hljs-string">&quot;name&quot;</span>], request.form[<span class="hljs-string">&quot;city&quot;</span>],<br>                               request.form[<span class="hljs-string">&quot;address&quot;</span>], request.form[<span class="hljs-string">&quot;pincode&quot;</span>])<br>            db.session.add(student)                 <span class="hljs-comment"># sessionå¯¹è±¡æ‰§è¡ŒCRUDçš„æ’å…¥æ˜ å°„è¡¨æ“ä½œ</span><br>            db.session.commit()<br>            flash(<span class="hljs-string">&quot;è®°å½•æ·»åŠ æˆåŠŸï¼&quot;</span>)<br>            <span class="hljs-keyword">return</span> redirect(url_for(<span class="hljs-string">&quot;sqlal_show&quot;</span>))  <span class="hljs-comment"># åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼Œéƒ½ä¼šå°†ç”¨æˆ·é‡å®šå‘å›æ˜¾ç¤ºé¡µé¢</span><br>    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&quot;sqlalnew.html&quot;</span>)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    <span class="hljs-keyword">with</span> app.app_context():                         <span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªåº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡</span><br>        db.create_all()                             <span class="hljs-comment"># è°ƒç”¨db.create_all()å‡½æ•°ä»¥åˆ›å»ºæ•°æ®åº“è¡¨</span><br><br>    <span class="hljs-comment"># è‹¥æ‰§è¡Œæ—¶æŠ¥é”™ImportError: cannot import name &quot;EVENT_TYPE_OPENED&quot; from &quot;watchdog.events&quot;</span><br>    app.run(debug=<span class="hljs-literal">True</span>)                             <span class="hljs-comment"># å‡çº§ï¼špip install --upgrade watchdog</span><br></code></pre></td></tr></table></figure>



<h3 id="2-sqlalnew-html"><a href="#2-sqlalnew-html" class="headerlink" title="(2) sqlalnew.html"></a>(2) sqlalnew.html</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs Html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>è¡¨å•å¡«å†™<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;text-align: center;&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Flask-SQLAlchemy å®ä¾‹<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">hr</span>&gt;</span><span class="hljs-comment">&lt;!-- æ°´å¹³çº¿æ ‡ç­¾ --&gt;</span><br>        &#123;% for category, message in get_flashed_messages(with_categories = true) %&#125;<br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;alert alert-danger&quot;</span>&gt;</span><br>                &#123;&#123; message &#125;&#125;<br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        &#123;% endfor %&#125;<br>        <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;&#123;&#123; request.path &#125;&#125;&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;name&quot;</span>&gt;</span>å§“å<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;å§“å&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width: 180px; height: 15px;&quot;</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;city&quot;</span>&gt;</span>åŸå¸‚<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;city&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;åŸå¸‚&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width: 180px; height: 15px;&quot;</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;address&quot;</span>&gt;</span>åœ°å€<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;address&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;åœ°å€&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width: 180px; height: 15px;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">textarea</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;pincode&quot;</span>&gt;</span>è®¤è¯ç <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;pincode&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;è®¤è¯ç &quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width: 180px; height: 15px;&quot;</span> /&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;æäº¤&quot;</span> /&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h3 id="3-sqlalshow-html"><a href="#3-sqlalshow-html" class="headerlink" title="(3) sqlalshow.html"></a>(3) sqlalshow.html</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs Html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>æ•°æ®æ“ä½œ<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-tag">body</span> &#123;<span class="hljs-attribute">text-align</span>: center;&#125; <span class="hljs-selector-tag">table</span> &#123;<span class="hljs-attribute">margin</span>: auto;&#125;</span><br><span class="language-css">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;&#123;&#123; url_for(&#x27;sqlal_show&#x27;) &#125;&#125;&quot;</span>&gt;</span>Flask-SQLAlchemy å®ä¾‹<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">hr</span>&gt;</span><span class="hljs-comment">&lt;!-- æ°´å¹³çº¿æ ‡ç­¾ --&gt;</span><br>        &#123;%- for message in get_flashed_messages() %&#125;<br>            &#123;&#123; message &#125;&#125;<br>        &#123;%- endfor %&#125;<br>        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>å­¦ç”Ÿï¼š(<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;&#123;&#123; url_for(&#x27;sqlal_new&#x27;) &#125;&#125;&quot;</span>&gt;</span>æ–°å¢<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>)<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">thead</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>å§“å<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>åŸå¸‚<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>åœ°å€<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>è®¤è¯ç <span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">thead</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">tbody</span>&gt;</span><br>            &#123;% for student in students %&#125;<br>                <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>&#123;&#123; student.name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>&#123;&#123; student.city &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>&#123;&#123; student.address &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>&#123;&#123; student.pincode &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>            &#123;% endfor %&#125;<br>            <span class="hljs-tag">&lt;/<span class="hljs-name">tbody</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h1 id="4-å³æ’è§†å›¾"><a href="#4-å³æ’è§†å›¾" class="headerlink" title="4 å³æ’è§†å›¾"></a>4 å³æ’è§†å›¾</h1><ul>
<li>å³æ’è§†å›¾<ul>
<li>Pluggable Viewsï¼Œä¸€ç§å¤„ç†è¯·æ±‚çš„ç±»ï¼Œå¯ä»¥æ ¹æ®ä¸åŒçš„HTTPæ–¹æ³•æ¥æ‰§è¡Œä¸åŒçš„æ“ä½œã€‚</li>
<li>åŸºæœ¬åŸåˆ™<ul>
<li>è§†å›¾ç±»å¿…é¡»ç»§æ‰¿è‡ª<code>flask.views.View</code>æˆ–å…¶å­ç±»ï¼Œä¾‹å¦‚ï¼š<code>flask.views.MethodView</code>ã€‚</li>
<li>å¯å®šä¹‰å¤šä¸ªHTTPæ–¹æ³•(ä¾‹å¦‚ï¼šGETã€POSTã€PUTã€DELETEç­‰)æ¥å¤„ç†ä¸åŒç±»å‹çš„è¯·æ±‚ã€‚</li>
<li>è¯·æ±‚åˆ°è¾¾åº”ç”¨ç¨‹åºæ—¶ï¼ŒFlaskå°†ä½¿ç”¨URLè§„åˆ™åŒ¹é…å™¨æŸ¥æ‰¾ä¸è¯¥è¯·æ±‚URLç›¸å¯¹åº”çš„è§†å›¾å‡½æ•°ã€‚</li>
<li>å¦‚æœæ‰¾åˆ°åŒ¹é…çš„è§†å›¾å‡½æ•°ï¼Œåˆ›å»ºè¯¥è§†å›¾ç±»çš„å®ä¾‹ï¼Œå¹¶è°ƒç”¨è¯¥ç±»æ–¹æ³•(GETç­‰)æ¥å¤„ç†è¯·æ±‚ã€‚</li>
<li>æä¾›å¯é€‰è£…é¥°å™¨å’Œé’©å­å‡½æ•°ï¼Œä»¥ä¾¿åœ¨è°ƒç”¨è§†å›¾æ–¹æ³•å‰åæ‰§è¡Œä¾‹å¦‚æˆæƒéªŒè¯ã€æ—¥å¿—è®°å½•ç­‰æ“ä½œã€‚</li>
<li>è§†å›¾æ–¹æ³•åº”è¯¥è¿”å›ä¸€ä¸ªå“åº”å¯¹è±¡ï¼Œé€šå¸¸æ˜¯å“åº”å­—ç¬¦ä¸²ï¼Œæˆ–è€…æ¨¡æ¿æ¸²æŸ“ç»“æœï¼Œäº¦æˆ–æ˜¯JSONæ•°æ®ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask<br><span class="hljs-keyword">from</span> flask.views <span class="hljs-keyword">import</span> View<br><br>app = Flask(__name__)                               <span class="hljs-comment"># è®¿é—®[http://127.0.0.1:5000/hello]</span><br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloWorld</span>(<span class="hljs-title class_ inherited__">View</span>):                             <span class="hljs-comment"># å®šä¹‰äº†HelloWorldç»§æ‰¿è‡ªViewçš„å³æ’è§†å›¾ç±»</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">dispatch_request</span>(<span class="hljs-params">self</span>):                     <span class="hljs-comment"># å®ç°dispatch_requestæ–¹æ³•ï¼Œå¤„ç†è§†å›¾æ¥æ”¶åˆ°çš„è¯·æ±‚</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&lt;center&gt;Hello, World!&lt;/center&gt;&quot;</span><br><br><br><span class="hljs-comment"># ç”¨æˆ·è®¿é—®â€œ/helloâ€æ—¶åˆ›å»ºHelloWorldViewå®ä¾‹ï¼Œå¹¶è°ƒç”¨dispatch_requestæ–¹æ³•æ¥å“åº”è¯·æ±‚ï¼Œè¿”å›â€œHello, World!â€</span><br>app.add_url_rule(<span class="hljs-string">&quot;/hello&quot;</span>, view_func=HelloWorld.as_view(<span class="hljs-string">&quot;Hello&quot;</span>))<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>



<h2 id="4-1-æ–¹æ³•è°ƒåº¦"><a href="#4-1-æ–¹æ³•è°ƒåº¦" class="headerlink" title="4-1 æ–¹æ³•è°ƒåº¦"></a>4-1 æ–¹æ³•è°ƒåº¦</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> flask.views <span class="hljs-keyword">import</span> MethodView<br><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, request, jsonify<br><br>app = Flask(__name__)<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloWorld</span>(<span class="hljs-title class_ inherited__">MethodView</span>):                       <span class="hljs-comment"># è®¿é—®[http://127.0.0.1:5000/hello]</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">self</span>):                                  <span class="hljs-comment"># ç½‘é¡µè®¿é—®â€œ/helloâ€ï¼Œå“åº”GETè¯·æ±‚</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&lt;center&gt;GETè¯·æ±‚&lt;/center&gt;&quot;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">post</span>(<span class="hljs-params">self</span>):                                 <span class="hljs-comment"># åº”ç”¨ç¨‹åºå¯åŠ¨åï¼Œä½¿ç”¨JMeteræ¨¡æ‹Ÿå“åº”POSTè¯·æ±‚</span><br>        data = request.get_json()                   <span class="hljs-comment"># æ­£ç¡®çš„JSONæ ¼å¼ï¼š&#123;&quot;name&quot;: &quot;John&quot;, &quot;surname&quot;: &quot;Doe&quot;&#125;</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;&lt;center&gt;POSTè¯·æ±‚è¿”å›çš„ç»“æœï¼š<span class="hljs-subst">&#123;data&#125;</span>ã€‚&lt;/center&gt;&quot;</span><br>        <span class="hljs-comment"># return jsonify(data)                      # JSONæ•°æ®çš„æ‰€æœ‰å±æ€§åéƒ½å¿…é¡»ä½¿ç”¨åŒå¼•å·æ‹¬èµ·æ¥</span><br><br><br><span class="hljs-comment"># ä½¿ç”¨app.add_url_rule()æ–¹æ³•å°†HelloWorldç±»é™„åŠ åˆ°URLè§„åˆ™ä¸Šï¼Œå¹¶å°†as_view()æ–¹æ³•ä½œä¸ºè§†å›¾å‡½æ•°</span><br><span class="hljs-comment"># ä¸ºç‰¹å®šçš„HTTPè¯·æ±‚æ–¹æ³•æŒ‡å®šå¤„ç†å‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨methodså‚æ•°ï¼Œå‘é€POSTè¯·æ±‚æ—¶éœ€è®¾ç½®Content-Typeæ ‡å¤´</span><br>app.add_url_rule(<span class="hljs-string">&quot;/hello&quot;</span>, view_func=HelloWorld.as_view(<span class="hljs-string">&quot;GET-Request&quot;</span>), methods=[<span class="hljs-string">&quot;GET&quot;</span>])<br>app.add_url_rule(<span class="hljs-string">&quot;/hello&quot;</span>, view_func=HelloWorld.as_view(<span class="hljs-string">&quot;POST-Request&quot;</span>), methods=[<span class="hljs-string">&quot;POST&quot;</span>])<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:                          <span class="hljs-comment"># JMeteréœ€è®¾ç½®ä¿¡æ¯å¤´ç®¡ç†å™¨</span><br>    app.run(debug=<span class="hljs-literal">True</span>)                             <span class="hljs-comment"># Content-Typeä¸ºapplication/json; charset=UTF-8;</span><br></code></pre></td></tr></table></figure>



<h2 id="4-2-è£…é¥°è§†å›¾"><a href="#4-2-è£…é¥°è§†å›¾" class="headerlink" title="4-2 è£…é¥°è§†å›¾"></a>4-2 è£…é¥°è§†å›¾</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs Xml"><span class="hljs-comment">&lt;!-- é¡¹ç›®ç›®å½•ç»“æ„ --&gt;</span><br>- decview.py<br>- templates<br>    - declogin.html<br>    - dechello.html<br>    - decerror.html<br><span class="hljs-comment">&lt;!-- å‘½ä»¤çª—å£ä¸‹æ‰§è¡Œ&quot;python decview.py&quot;ï¼Œè®¿é—®[http://127.0.0.1:5000/declogin] --&gt;</span><br></code></pre></td></tr></table></figure>



<h3 id="1-decview-py"><a href="#1-decview-py" class="headerlink" title="(1) decview.py"></a>(1) decview.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> wraps<br><span class="hljs-keyword">from</span> flask.views <span class="hljs-keyword">import</span> MethodView<br><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, g, render_template, session, request, redirect<br><br>app = Flask(__name__)                               <span class="hljs-comment"># è®¿é—®[http://127.0.0.1:5000/declogin]</span><br><br>app.secret_key = <span class="hljs-string">b&quot;flask decorating views&quot;</span><br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">LoginView</span>(<span class="hljs-title class_ inherited__">MethodView</span>):                        <span class="hljs-comment"># LoginViewæ˜¯ç»§æ‰¿è‡ªMethodViewåŸºç±»çš„è§†å›¾ç±»</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">self</span>):                                  <span class="hljs-comment"># è¯¥ç±»åŒ…å«äº†ä¸€ä¸ªget()æ–¹æ³•å’Œä¸€ä¸ªpost()æ–¹æ³•</span><br>        <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&quot;declogin.html&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">post</span>(<span class="hljs-params">self</span>):<br>        username = request.form[<span class="hljs-string">&quot;username&quot;</span>]         <span class="hljs-comment"># è‹¥è¾“å…¥ç”¨æˆ·åadminï¼Œå¯†ç 12345ï¼Œåˆ™è·³è½¬dechello.html</span><br>        password = request.form[<span class="hljs-string">&quot;password&quot;</span>]         <span class="hljs-comment"># å¦åˆ™æ˜¾ç¤º&quot;é”™è¯¯ï¼šæ— æ•ˆçš„ç”¨æˆ·åæˆ–å¯†ç ï¼&quot;</span><br><br>        <span class="hljs-keyword">if</span> username == <span class="hljs-string">&quot;admin&quot;</span> <span class="hljs-keyword">and</span> password == <span class="hljs-string">&quot;12345&quot;</span>:<br>            g.user = &#123;<span class="hljs-string">&quot;username&quot;</span>: username&#125;<br>            session[<span class="hljs-string">&quot;user&quot;</span>] = g.user                <span class="hljs-comment"># é€šè¿‡éªŒè¯è®¾ç½®g.user</span><br>            <span class="hljs-keyword">return</span> redirect(<span class="hljs-string">&quot;/dechello&quot;</span>)            <span class="hljs-comment"># é‡å®šå‘åˆ°å—ä¿æŠ¤çš„é¡µé¢</span><br>        <span class="hljs-keyword">else</span>:<br>            error = <span class="hljs-string">&quot;é”™è¯¯ï¼šæ— æ•ˆçš„ç”¨æˆ·åæˆ–å¯†ç ï¼&quot;</span><br>            <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&quot;declogin.html&quot;</span>, error=error)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">login_required</span>(<span class="hljs-params">f</span>):                              <span class="hljs-comment"># login_requiredè£…é¥°å™¨å‡½æ•°æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°</span><br><span class="hljs-meta">    @wraps(<span class="hljs-params">f</span>)                                       </span><span class="hljs-comment"># å¹¶è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œè°ƒç”¨åŸå§‹å‡½æ•°ï¼Œç™»å½•æˆ–è¿”å›401</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decorated_function</span>(<span class="hljs-params">*args, **kwargs</span>):        <span class="hljs-comment"># è‹¥æœªç™»å½•è¿›è¡Œè®¿é—®[http://127.0.0.1:5000/dechello]</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> session.get(<span class="hljs-string">&quot;user&quot;</span>):                 <span class="hljs-comment"># åˆ™é¡µé¢å°†æ˜¾ç¤º&quot;è¯·ç™»å½•åå†è¿›è¡Œè®¿é—®ï¼&quot;</span><br>            <span class="hljs-keyword">return</span> unauthorized(<span class="hljs-string">&quot;è¯·ç™»å½•åå†è¿›è¡Œè®¿é—®ï¼&quot;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            g.user = session[<span class="hljs-string">&quot;user&quot;</span>]<br>            <span class="hljs-keyword">return</span> f(*args, **kwargs)<br><br>    <span class="hljs-keyword">return</span> decorated_function<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">unauthorized</span>(<span class="hljs-params">message</span>):<br>    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&quot;decerror.html&quot;</span>, message=message), <span class="hljs-number">401</span><br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloView</span>(<span class="hljs-title class_ inherited__">MethodView</span>):<br>    decorators = [login_required]                   <span class="hljs-comment"># å¼•ç”¨è£…é¥°å™¨å‡½æ•°</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">self</span>):<br>        message = <span class="hljs-string">&quot;Hello, %s!&quot;</span> % g.user[<span class="hljs-string">&quot;username&quot;</span>]<br>        <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&quot;dechello.html&quot;</span>, message=message)<br><br><br>app.add_url_rule(<span class="hljs-string">&quot;/declogin&quot;</span>, view_func=LoginView.as_view(<span class="hljs-string">&quot;login&quot;</span>))<br>app.add_url_rule(<span class="hljs-string">&quot;/dechello&quot;</span>, view_func=HelloView.as_view(<span class="hljs-string">&quot;hello&quot;</span>))<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>



<h3 id="2-declogin-html"><a href="#2-declogin-html" class="headerlink" title="(2) declogin.html"></a>(2) declogin.html</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs Html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>ç™»å½•é¡µé¢<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-tag">body</span> &#123;<span class="hljs-attribute">text-align</span>: center;&#125;</span><br><span class="language-css">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        &#123;% if error %&#125;<br>            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;&#123; error &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        &#123;% endif %&#125;<br>        <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;&#123;&#123; url_for(&quot;</span><span class="hljs-attr">login</span>&quot;) &#125;&#125;&quot; <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;username&quot;</span>&gt;</span>ç”¨æˆ·åï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;username&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;password&quot;</span>&gt;</span>å¯†<span class="hljs-symbol">&amp;emsp;</span>ç ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;password&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;æ<span class="hljs-symbol">&amp;emsp;</span>äº¤&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h3 id="3-dechello-html"><a href="#3-dechello-html" class="headerlink" title="(3) dechello.html"></a>(3) dechello.html</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs Html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>æ¬¢è¿é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-tag">body</span> &#123;<span class="hljs-attribute">text-align</span>: center;&#125;</span><br><span class="language-css">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;&#123;&#123; url_for(&#x27;login&#x27;) &#125;&#125;&quot;</span>&gt;</span>é€€å‡ºç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h3 id="4-decerror-html"><a href="#4-decerror-html" class="headerlink" title="(4) decerror.html"></a>(4) decerror.html</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs Html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>é”™è¯¯é¡µé¢<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-tag">body</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">                <span class="hljs-attribute">justify-content</span>: center;</span><br><span class="language-css">                <span class="hljs-attribute">align-items</span>: center;</span><br><span class="language-css">                <span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">            <span class="hljs-selector-tag">h1</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">                <span class="hljs-attribute">font-size</span>: <span class="hljs-number">27px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">color</span>: <span class="hljs-number">#dc3545</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h2 id="4-3-APIçš„æ–¹æ³•è§†å›¾"><a href="#4-3-APIçš„æ–¹æ³•è§†å›¾" class="headerlink" title="4-3 APIçš„æ–¹æ³•è§†å›¾*"></a>4-3 APIçš„æ–¹æ³•è§†å›¾*</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs Xml"><span class="hljs-comment">&lt;!-- é¡¹ç›®ç›®å½•ç»“æ„ --&gt;</span><br>- apiview.py<br>- apidata.json<br>- templates<br>    - apiadds.html<br>    - apiedit.html<br>    - apiusers.html<br><span class="hljs-comment">&lt;!-- å‘½ä»¤çª—å£ä¸‹æ‰§è¡Œ&quot;python apiview.py&quot;ï¼Œè®¿é—®[http://127.0.0.1:5000/users/] --&gt;</span><br></code></pre></td></tr></table></figure>



<h3 id="1-apiview-py"><a href="#1-apiview-py" class="headerlink" title="(1) apiview.py"></a>(1) apiview.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> json<br><span class="hljs-keyword">from</span> flask.views <span class="hljs-keyword">import</span> MethodView<br><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, request, render_template, redirect, url_for<br><br>app = Flask(__name__)<br>app.secret_key = <span class="hljs-string">&quot;flask method view of api&quot;</span><br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">UserAPI</span>(<span class="hljs-title class_ inherited__">MethodView</span>):                          <span class="hljs-comment"># GETæŸ¥è¯¢ã€POSTæ·»åŠ (æˆ–ç™»å½•)ã€PUTä¿®æ”¹ã€DELETEåˆ é™¤</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        self.load_users()<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">load_users</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;apidata.json&quot;</span>, <span class="hljs-string">&quot;r&quot;</span>) <span class="hljs-keyword">as</span> f:<br>            self.users = json.load(f)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">save_users</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;apidata.json&quot;</span>, <span class="hljs-string">&quot;w&quot;</span>) <span class="hljs-keyword">as</span> f:<br>            json.dump(self.users, f, indent=<span class="hljs-number">2</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">self, user_name=<span class="hljs-literal">None</span></span>):                  <span class="hljs-comment"># æ ¹æ®user_nameæ¥è·å–ç”¨æˆ·çš„ä¿¡æ¯</span><br>        <span class="hljs-built_in">print</span>(request.method)<br>        <span class="hljs-keyword">if</span> user_name <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:                       <span class="hljs-comment"># è®¿é—®[http://127.0.0.1:5000/users/]</span><br>            user_all = [<br>                &#123;<span class="hljs-string">&quot;id&quot;</span>: user[<span class="hljs-string">&quot;id&quot;</span>], <span class="hljs-string">&quot;name&quot;</span>: user[<span class="hljs-string">&quot;name&quot;</span>], <span class="hljs-string">&quot;age&quot;</span>: user[<span class="hljs-string">&quot;age&quot;</span>], <span class="hljs-string">&quot;email&quot;</span>: user[<span class="hljs-string">&quot;email&quot;</span>]&#125;<br>                <span class="hljs-keyword">for</span> user <span class="hljs-keyword">in</span> self.users<br>            ]                                       <span class="hljs-comment"># å¦‚æœæ²¡æœ‰æä¾›user_nameï¼Œå°†å±•ç¤ºæ‰€æœ‰ç”¨æˆ·ä¿¡æ¯</span><br>            <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&quot;apiusers.html&quot;</span>, users=user_all)<br>        <span class="hljs-keyword">else</span>:                                       <span class="hljs-comment"># å¦‚æœæä¾›user_nameï¼Œåªæ˜¾ç¤ºè¯¥ç”¨æˆ·ä¿¡æ¯</span><br>            user_sigle = <span class="hljs-built_in">next</span>((user <span class="hljs-keyword">for</span> user <span class="hljs-keyword">in</span> self.users <span class="hljs-keyword">if</span> user[<span class="hljs-string">&quot;name&quot;</span>] == user_name), <span class="hljs-literal">None</span>)<br>            <span class="hljs-keyword">if</span> user_sigle <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:                  <span class="hljs-comment"># ä¾‹å¦‚è®¿é—®[http://127.0.0.1:5000/users/Adam]</span><br>                <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&quot;apiusers.html&quot;</span>, message=<span class="hljs-string">&quot;æ²¡æœ‰æ‰¾åˆ°ç”¨æˆ·ï¼Œè¯·å…ˆæ·»åŠ ç”¨æˆ·ï¼&quot;</span>)<br>            <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&quot;apiusers.html&quot;</span>, users=[user_sigle])<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">post</span>(<span class="hljs-params">self</span>):                                 <span class="hljs-comment"># æ·»åŠ æ–°çš„ç”¨æˆ·ä¿¡æ¯</span><br>        <span class="hljs-built_in">print</span>(request.method)<br>        next_id = <span class="hljs-built_in">max</span>(<span class="hljs-built_in">int</span>(user[<span class="hljs-string">&quot;id&quot;</span>]) <span class="hljs-keyword">for</span> user <span class="hljs-keyword">in</span> self.users) + <span class="hljs-number">1</span><br>        name = request.form.get(<span class="hljs-string">&quot;name&quot;</span>)<br>        age = request.form.get(<span class="hljs-string">&quot;age&quot;</span>)               <span class="hljs-comment"># æ·»åŠ ç”¨æˆ·ï¼Œè·³è½¬åˆ°[http://127.0.0.1:5000/users/add/]</span><br>        email = request.form.get(<span class="hljs-string">&quot;email&quot;</span>)<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> name <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> age <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> email:<br>            <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&quot;apiadds.html&quot;</span>)<br>        new_user = &#123;<span class="hljs-string">&quot;id&quot;</span>: next_id, <span class="hljs-string">&quot;name&quot;</span>: name, <span class="hljs-string">&quot;age&quot;</span>: age, <span class="hljs-string">&quot;email&quot;</span>: email&#125;<br>        self.users.append(new_user)<br>        next_id += <span class="hljs-number">1</span><br>        self.save_users()                           <span class="hljs-comment"># å°†æ·»åŠ çš„ç”¨æˆ·ä¿¡æ¯å†™å…¥apidata.jsonä¸­</span><br>        <span class="hljs-keyword">return</span> redirect(url_for(<span class="hljs-string">&quot;user_get&quot;</span>))        <span class="hljs-comment"># é‡å®šå‘åˆ°ç”¨æˆ·åˆ—è¡¨é¡µé¢</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">put</span>(<span class="hljs-params">self, user_name=<span class="hljs-literal">None</span></span>):                  <span class="hljs-comment"># æ›´æ–°æŒ‡å®šç”¨æˆ·çš„ä»£ç </span><br>        <span class="hljs-built_in">print</span>(request.method)                       <span class="hljs-comment"># è·¯ç”±æ— è®ºå¦‚ä½•å®šä¹‰éƒ½æ— æ³•è¯·æ±‚åˆ°è¯¥è¯·æ±‚ï¼ï¼ï¼</span><br>        users = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">filter</span>(<span class="hljs-keyword">lambda</span> user: user[<span class="hljs-string">&quot;name&quot;</span>] == user_name, self.users))<br>        user = users[<span class="hljs-number">0</span>]                             <span class="hljs-comment"># ä½¿ç”¨hidden inputä¼ é€’æ¨¡æ‹Ÿputè¯·æ±‚</span><br>        <span class="hljs-keyword">if</span> request.form.get(<span class="hljs-string">&quot;_method&quot;</span>) == <span class="hljs-string">&quot;PUT&quot;</span>:<br>            age = request.form.get(<span class="hljs-string">&quot;age&quot;</span>)<br>            email = request.form.get(<span class="hljs-string">&quot;email&quot;</span>)<br>            user[<span class="hljs-string">&quot;age&quot;</span>] = age                       <span class="hljs-comment"># æ›´æ–°ç”¨æˆ·ä¿¡æ¯</span><br>            user[<span class="hljs-string">&quot;email&quot;</span>] = email<br>            self.save_users()<br>            <span class="hljs-keyword">return</span> redirect(url_for(<span class="hljs-string">&quot;user_get&quot;</span>))<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&quot;apiedit.html&quot;</span>, user_name=user_name)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">delete</span>(<span class="hljs-params">self, user_name=<span class="hljs-literal">None</span></span>):               <span class="hljs-comment"># åˆ é™¤æŒ‡å®šç”¨æˆ·çš„ä»£ç ï¼Œä¿®æ”¹ä¸åˆ é™¤åŠŸèƒ½æœªå®ç°ï¼</span><br>        <span class="hljs-keyword">pass</span><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">register_api</span>(<span class="hljs-params">view, endpoint, url, pk=<span class="hljs-string">&quot;name&quot;</span>, pk_type=<span class="hljs-string">&quot;string&quot;</span></span>):<br>    view_func = view.as_view(endpoint)<br>    app.add_url_rule(url, view_func=view_func, methods=[<span class="hljs-string">&quot;GET&quot;</span>])<br>    app.add_url_rule(url, view_func=view_func, methods=[<span class="hljs-string">&quot;POST&quot;</span>])<br>    app.add_url_rule(<span class="hljs-string">&quot;%s&lt;%s:%s&gt;&quot;</span> % (url, pk_type, pk), view_func=view_func, methods=[<span class="hljs-string">&quot;GET&quot;</span>, <span class="hljs-string">&quot;PUT&quot;</span>])<br><br><br>register_api(UserAPI, <span class="hljs-string">&quot;user_get&quot;</span>, <span class="hljs-string">&quot;/users/&quot;</span>, pk=<span class="hljs-string">&quot;user_name&quot;</span>)<br>register_api(UserAPI, <span class="hljs-string">&quot;user_post&quot;</span>, <span class="hljs-string">&quot;/users/add/&quot;</span>)<br>register_api(UserAPI, <span class="hljs-string">&quot;user_put&quot;</span>, <span class="hljs-string">&quot;/users/edit/&quot;</span>, pk=<span class="hljs-string">&quot;user_name&quot;</span>)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>



<h3 id="2-apidata-json"><a href="#2-apidata-json" class="headerlink" title="(2) apidata.json"></a>(2) apidata.json</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs Json"><span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Test&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;age&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">32</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;email&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Test@126.com&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Mike&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;age&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">26</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;email&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Mike@example.com&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Adminstator&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;age&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;27&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;email&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Adminstator@qq.com&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure>



<h3 id="3-apiadds-html"><a href="#3-apiadds-html" class="headerlink" title="(3) apiadds.html"></a>(3) apiadds.html</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs Html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>æ·»åŠ ç”¨æˆ·<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;text-align: center;&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æ·»åŠ ç”¨æˆ·ä¿¡æ¯<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;&#123;&#123; url_for(&#x27;user_post&#x27;) &#125;&#125;&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;name&quot;</span>&gt;</span>å§“å<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;age&quot;</span>&gt;</span>å¹´é¾„<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;age&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;email&quot;</span>&gt;</span>é‚®ç®±<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;email&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;return check()&quot;</span>&gt;</span>æäº¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">function</span> <span class="hljs-title function_">check</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">                <span class="hljs-keyword">var</span> name = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementsByName</span>(<span class="hljs-string">&quot;name&quot;</span>)[<span class="hljs-number">0</span>].<span class="hljs-property">value</span>;</span><br><span class="language-javascript">                <span class="hljs-keyword">var</span> age = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementsByName</span>(<span class="hljs-string">&quot;age&quot;</span>)[<span class="hljs-number">0</span>].<span class="hljs-property">value</span>;</span><br><span class="language-javascript">                <span class="hljs-keyword">var</span> email = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementsByName</span>(<span class="hljs-string">&quot;email&quot;</span>)[<span class="hljs-number">0</span>].<span class="hljs-property">value</span>;</span><br><span class="language-javascript">                <span class="hljs-keyword">if</span> (name === <span class="hljs-string">&quot;&quot;</span> || age === <span class="hljs-string">&quot;&quot;</span> || email === <span class="hljs-string">&quot;&quot;</span>) &#123;</span><br><span class="language-javascript">                    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;è¯·å…ˆæŠŠä¿¡æ¯å¡«å†™å®Œæ•´ï¼Œå†è¿›è¡Œæäº¤ï¼&quot;</span>);</span><br><span class="language-javascript">                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;                   <span class="hljs-comment">// é˜²æ­¢è¡¨å•æäº¤</span></span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">            </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h3 id="4-apiedit-html"><a href="#4-apiedit-html" class="headerlink" title="(4) apiedit.html"></a>(4) apiedit.html</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs Html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>ä¿®æ”¹ç”¨æˆ·<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;text-align: center;&quot;</span>&gt;</span><br>        &#123;% for user in users %&#125;<br>            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>ä¿®æ”¹ç”¨æˆ·â€œ&#123;&#123; user.name &#125;&#125;â€ä¿¡æ¯<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;&#123;&#123; url_for(&#x27;user_put&#x27;, user_name=user.name) &#125;&#125;&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;POST&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;hidden&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;_method&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;PUT&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;age&quot;</span>&gt;</span>å¹´é¾„<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;age&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;&#123;&#123; user.age &#125;&#125;&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;email&quot;</span>&gt;</span>é‚®ç®±<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;email&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;&#123;&#123; user.email &#125;&#125;&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;ä¿å­˜&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn btn-primary&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">formaction</span>=<span class="hljs-string">&quot;&#123;&#123; url_for(&#x27;user_get&#x27;) &#125;&#125;&quot;</span>&gt;</span><br>                        å–æ¶ˆ<br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br>        &#123;% endfor %&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h3 id="5-apiusers-html"><a href="#5-apiusers-html" class="headerlink" title="(5) apiusers.html"></a>(5) apiusers.html</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs Html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>ç”¨æˆ·ä¿¡æ¯<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-tag">table</span> &#123;<span class="hljs-attribute">margin</span>: auto; <span class="hljs-attribute">border-collapse</span>: collapse;&#125;</span><br><span class="language-css">            <span class="hljs-selector-tag">tr</span><span class="hljs-selector-pseudo">:hover</span> &#123;<span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f5f5f5</span>;&#125;</span><br><span class="language-css">            <span class="hljs-selector-tag">td</span>, <span class="hljs-selector-tag">th</span> &#123;<span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span>; <span class="hljs-attribute">text-align</span>: left;&#125;</span><br><span class="language-css">            <span class="hljs-selector-tag">th</span> &#123;<span class="hljs-attribute">background-color</span>: <span class="hljs-number">#333</span>; <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>; <span class="hljs-attribute">text-align</span>: center;&#125;</span><br><span class="language-css">            <span class="hljs-selector-tag">td</span> &#123;<span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ddd</span>;&#125;</span><br><span class="language-css">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;text-align: center;&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>è¯†åˆ«ç <span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>å§“å<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>å¹´é¾„<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>é‚®ç®±<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>æ“ä½œ<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>            &#123;% for user in users %&#125;<br>            <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>&#123;&#123; user.id &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>&#123;&#123; user.name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>&#123;&#123; user.age &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>&#123;&#123; user.email &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;&#123;&#123; url_for(&#x27;user_put&#x27;, user_name=user.name) &#125;&#125;&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;POST&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;hidden&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;_method&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;PUT&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn btn-primary&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span>&gt;</span>ä¿®æ”¹<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>            &#123;% endfor %&#125;<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;&#123;&#123; url_for(&#x27;user_post&#x27;) &#125;&#125;&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn btn-primary&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span>&gt;</span>æ·»åŠ ç”¨æˆ·<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h1 id="5-ä¸Šä¸‹æ–‡ä½œç”¨åŸŸ"><a href="#5-ä¸Šä¸‹æ–‡ä½œç”¨åŸŸ" class="headerlink" title="5 ä¸Šä¸‹æ–‡ä½œç”¨åŸŸ"></a>5 ä¸Šä¸‹æ–‡ä½œç”¨åŸŸ</h1><ul>
<li>ä¸Šä¸‹æ–‡ä½œç”¨åŸŸ<ul>
<li>åº”ç”¨ä¸Šä¸‹æ–‡ï¼ŒApplication Contextã€‚<ul>
<li>æ˜¯æ•´ä¸ªFlaskåº”ç”¨çš„ä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œç”¨äºåœ¨ä¸åŒçš„çº¿ç¨‹ä¸­å…±äº«Flaskçš„åº”ç”¨å®ä¾‹ã€‚</li>
<li>ä½¿ç”¨<code>app.app_context()</code>æ˜¾å¼åˆ›å»ºï¼Œä¹Ÿå¯é€šè¿‡Flaskçš„æ–¹æ³•å’Œå‡½æ•°éšå¼åˆ›å»ºã€‚</li>
</ul>
</li>
<li>è¯·æ±‚ä¸Šä¸‹æ–‡ï¼ŒRequest Contextã€‚<ul>
<li>æ˜¯åœ¨æ¯ä¸ªHTTPè¯·æ±‚ä¸­åˆ›å»ºçš„ä¸Šä¸‹æ–‡ï¼ŒåŒ…å«äº†å½“å‰è¯·æ±‚åŠå…¶ç›¸å…³ä¿¡æ¯ã€‚</li>
<li>åœ¨å¤„ç†è¯·æ±‚çš„è¿‡ç¨‹ä¸­ï¼Œå°†åˆ›å»ºä¸€ä¸ªè¯·æ±‚ä¸Šä¸‹æ–‡ï¼Œç„¶åå°†è¯·æ±‚å¯¹è±¡å­˜å‚¨åœ¨å…¨å±€å˜é‡requestä¸­ã€‚</li>
<li>å¯ä»¥è®¿é—®åˆ°è¯·æ±‚å¯¹è±¡ã€ä¼šè¯å¯¹è±¡å’Œå…¶ä»–å·¥å…·å‡½æ•°ï¼Œä¾‹å¦‚ï¼š<code>url_for</code>ã€<code>render_template</code>ç­‰ã€‚</li>
</ul>
</li>
<li>æµ‹è¯•ä¸Šä¸‹æ–‡ï¼ŒTest Contextã€‚<ul>
<li>æ˜¯åœ¨Flaskè¿›è¡Œå•å…ƒæµ‹è¯•æ—¶ä½¿ç”¨çš„ä¸Šä¸‹æ–‡ç¯å¢ƒã€‚</li>
<li>å¯ä½¿ç”¨<code>app.test_request_context()</code>æ˜¾å¼åˆ›å»ºï¼Œä¹Ÿå¯ä½¿ç”¨FlaskClientç±»éšå¼åˆ›å»ºã€‚</li>
<li>å¯ä»¥è®¿é—®åˆ°Flaskçš„åº”ç”¨å®ä¾‹ã€è¯·æ±‚å¯¹è±¡å’Œå“åº”å¯¹è±¡ï¼Œä»è€Œè¿›è¡Œé’ˆå¯¹Flaskåº”ç”¨çš„æµ‹è¯•ã€‚</li>
<li>è¿˜å¯ä»¥è®¿é—®Flaskæä¾›çš„æµ‹è¯•å·¥å…·å‡½æ•°ï¼Œä¾‹å¦‚ï¼š<code>jsonify</code>ã€<code>make_response</code>ç­‰ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="5-1-åº”ç”¨ä¸Šä¸‹æ–‡"><a href="#5-1-åº”ç”¨ä¸Šä¸‹æ–‡" class="headerlink" title="5-1 åº”ç”¨ä¸Šä¸‹æ–‡"></a>5-1 åº”ç”¨ä¸Šä¸‹æ–‡</h2><ul>
<li>åº”ç”¨ä¸Šä¸‹æ–‡<ul>
<li>éšå¼åˆ›å»ºï¼Œé€‚ç”¨äºå¤§å¤šæƒ…å†µã€‚<ul>
<li>é»˜è®¤çš„åˆ›å»ºæ–¹å¼ï¼Œè¿è¡Œåº”ç”¨æ—¶æ¯ä¸ªè¯·æ±‚éƒ½ä¼šéšå¼åœ°åˆ›å»ºåº”ç”¨ä¸Šä¸‹æ–‡ã€‚</li>
<li>æ–¹ä¾¿ä½¿ç”¨ï¼Œä¸éœ€è¦é¢å¤–çš„ä»£ç å°±å¯ä»¥åœ¨Flaskä¸­è®¿é—®gå¯¹è±¡æ¥å…±äº«æ•°æ®ã€‚</li>
</ul>
</li>
<li>æ˜¾å¼åˆ›å»ºï¼Œé€‚ç”¨äºç‰¹æ®Šåœºæ™¯ã€‚<ul>
<li>éœ€è¦æ‰‹åŠ¨åˆ›å»ºåº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œä½¿ç”¨æ›´åŠ çµæ´»ï¼Œå¯ä»¥åœ¨è¯·æ±‚ä¹‹å¤–çš„åœ°æ–¹ä½¿ç”¨åº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡ã€‚</li>
<li>ä¾‹å¦‚æµ‹è¯•Flaskåº”ç”¨æ—¶ï¼Œå¯èƒ½éœ€è¦æ˜¾å¼åˆ›å»ºåº”ç”¨ä¸Šä¸‹æ–‡æ¥æµ‹è¯•åº”ç”¨ä¸­çš„æŸéƒ¨åˆ†ï¼Œä»¥ç¡®ä¿æ­£ç¡®æ€§ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="1-éšå¼åˆ›å»º"><a href="#1-éšå¼åˆ›å»º" class="headerlink" title="(1) éšå¼åˆ›å»º"></a>(1) éšå¼åˆ›å»º</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, g, current_app             <span class="hljs-comment"># ä½¿ç”¨gå¯¹è±¡æ¥å­˜å‚¨å’Œå…±äº«åº”ç”¨ä¸Šä¸‹æ–‡ä¸­çš„æ•°æ®</span><br><br>app = Flask(__name__)<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/&quot;</span></span>)                                     </span><span class="hljs-comment"># è®¿é—®[127.0.0.1:5000]</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">index</span>():                                        <span class="hljs-comment"># å®šä¹‰ä¸€ä¸ªè·¯ç”±å‡½æ•°index</span><br>    app_name = current_app.name                     <span class="hljs-comment"># åœ¨è§†å›¾å‡½æ•°ä¸­è·å–åº”ç”¨ä¸Šä¸‹æ–‡çš„å±æ€§</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;åº”ç”¨åï¼š&quot;</span>, app_name)<br><br>    g.username = <span class="hljs-string">&quot;administrator&quot;</span>                    <span class="hljs-comment"># è®¿é—®æ ¹è·¯å¾„æ—¶ä½¿ç”¨gå¯¹è±¡å°†ç”¨æˆ·åå­˜å‚¨åœ¨åº”ç”¨ä¸Šä¸‹æ–‡ä¸­</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ç”¨æˆ·åï¼š&quot;</span>, g.username)<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&lt;center&gt;Hello, Flask!&lt;/center&gt;&quot;</span><br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:                          <span class="hljs-comment"># è¿”å›å“åº”åï¼Œåº”ç”¨ä¸Šä¸‹æ–‡å°†è¢«å¼¹å‡º</span><br>    app.run(debug=<span class="hljs-literal">True</span>)                             <span class="hljs-comment"># ç¡®ä¿æ¯ä¸ªè¯·æ±‚ä¹‹é—´çš„æ•°æ®éš”ç¦»</span><br></code></pre></td></tr></table></figure>



<h3 id="2-æ˜¾å¼åˆ›å»º"><a href="#2-æ˜¾å¼åˆ›å»º" class="headerlink" title="(2) æ˜¾å¼åˆ›å»º"></a>(2) æ˜¾å¼åˆ›å»º</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, g<br><br>app = Flask(__name__)<br><br><span class="hljs-keyword">with</span> app.app_context():                             <span class="hljs-comment"># é€šè¿‡ä½¿ç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨æ¥æ˜¾å¼åˆ›å»ºFlaskåº”ç”¨ä¸Šä¸‹æ–‡</span><br>    g.my_variable = <span class="hljs-literal">None</span>                            <span class="hljs-comment"># è®¾ç½®å…¨å±€å˜é‡é»˜è®¤å€¼ï¼Œå°†å…¶ä¼ é€’åˆ°è·¯ç”±å¤„ç†å‡½æ•°ä¸­</span><br><br><span class="hljs-meta">    @app.before_request</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">set_my_variable</span>():<br>        g.my_variable = <span class="hljs-string">&quot;Hello, Flask!&quot;</span>             <span class="hljs-comment"># æ‰§è¡Œè·¯ç”±å¤„ç†å‡½æ•°å‰ï¼Œè®¾ç½®g.my_variableå˜é‡</span><br><br><span class="hljs-meta">    @app.route(<span class="hljs-params"><span class="hljs-string">&quot;/&quot;</span>, methods=[<span class="hljs-string">&quot;GET&quot;</span>]</span>)                </span><span class="hljs-comment"># è®¿é—®[127.0.0.1:5000]</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_my_variable</span>():<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;&lt;center&gt;<span class="hljs-subst">&#123;g.my_variable&#125;</span>&lt;/center&gt;&quot;</span><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:                          <span class="hljs-comment"># å‘½ä»¤å‡½æ•°ç»“æŸåï¼Œåº”ç”¨ä¸Šä¸‹æ–‡å°†è¢«å¼¹å‡º</span><br>    app.run(debug=<span class="hljs-literal">True</span>)                             <span class="hljs-comment"># ç¡®ä¿æ¯ä¸ªå‘½ä»¤ä¹‹é—´çš„æ•°æ®éš”ç¦»</span><br></code></pre></td></tr></table></figure>



<h2 id="5-2-è¯·æ±‚ä¸Šä¸‹æ–‡"><a href="#5-2-è¯·æ±‚ä¸Šä¸‹æ–‡" class="headerlink" title="5-2 è¯·æ±‚ä¸Šä¸‹æ–‡"></a>5-2 è¯·æ±‚ä¸Šä¸‹æ–‡</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, request<br><br>app = Flask(__name__)<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/&quot;</span></span>)                                     </span><span class="hljs-comment"># è®¿é—®[127.0.0.1:5000]</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">index</span>():                                        <span class="hljs-comment"># åªåœ¨è¯·æ±‚å¤„ç†å‡½æ•°ä¸­æ‰èƒ½ä½¿ç”¨requestå¯¹è±¡ï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸</span><br>    url = request.url                               <span class="hljs-comment"># è·å–å½“å‰è¯·æ±‚URL</span><br>    path = request.path                             <span class="hljs-comment"># è·å–å½“å‰è¯·æ±‚è·¯å¾„ï¼Œrequestå¯¹è±¡æ˜¯Flaskçš„å…¨å±€å˜é‡</span><br>    method = request.method                         <span class="hljs-comment"># è·å–å½“å‰è¯·æ±‚æ–¹æ³•</span><br>    headers = request.headers                       <span class="hljs-comment"># è·å–å½“å‰è¯·æ±‚å¤´éƒ¨ä¿¡æ¯</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;&lt;div style=&#x27;text-align:center;&#x27;&gt;&quot;</span> \<br>           <span class="hljs-string">f&quot;&lt;p&gt;Request Path: <span class="hljs-subst">&#123;path&#125;</span>&lt;/p&gt;&lt;p&gt;Request Method: <span class="hljs-subst">&#123;method&#125;</span>&lt;/p&gt;&quot;</span> \<br>           <span class="hljs-string">f&quot;&lt;p&gt;Request URL: <span class="hljs-subst">&#123;url&#125;</span>&lt;/p&gt;&lt;p&gt;Request Headers: <span class="hljs-subst">&#123;headers&#125;</span>&lt;/p&gt;&lt;/div&gt;&quot;</span><br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>



<h3 id="1-å›è°ƒå‡½æ•°"><a href="#1-å›è°ƒå‡½æ•°" class="headerlink" title="(1) å›è°ƒå‡½æ•°"></a>(1) å›è°ƒå‡½æ•°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, request<br><br>app = Flask(__name__)<br><br><br><span class="hljs-meta">@app.before_request                                 </span><span class="hljs-comment"># åœ¨æ¯ä¸ªè¯·æ±‚å¤„ç†ä¹‹å‰æ‰§è¡Œçš„å›è°ƒå‡½æ•°</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">before_request</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot; * è¯·æ±‚å¤„ç†å‰---æ‰§è¡Œ&quot;</span>)<br><br><br><span class="hljs-meta">@app.after_request                                  </span><span class="hljs-comment"># åœ¨æ¯ä¸ªè¯·æ±‚å¤„ç†ä¹‹åæ‰§è¡Œçš„å›è°ƒå‡½æ•°</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">after_request</span>(<span class="hljs-params">response</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot; * è¯·æ±‚å¤„ç†å---æ‰§è¡Œ&quot;</span>)<br>    <span class="hljs-keyword">return</span> response<br><br><br><span class="hljs-meta">@app.teardown_request                               </span><span class="hljs-comment"># åœ¨æ¯ä¸ªè¯·æ±‚å¤„ç†å®Œæˆå¹¶å“åº”å®¢æˆ·ç«¯åæ‰§è¡Œçš„å›è°ƒå‡½æ•°</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">teardown_request</span>(<span class="hljs-params">exc</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot; * è¯·æ±‚å¤„ç†å®Œæˆå¹¶å“åº”å®¢æˆ·ç«¯å---æ‰§è¡Œ&quot;</span>)<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/&quot;</span></span>)                                     </span><span class="hljs-comment"># è®¿é—®[127.0.0.1:5000]</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">index</span>():                                        <span class="hljs-comment"># åªåœ¨è¯·æ±‚å¤„ç†å‡½æ•°ä¸­æ‰èƒ½ä½¿ç”¨requestå¯¹è±¡ï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸</span><br>    url = request.url                               <span class="hljs-comment"># è·å–å½“å‰è¯·æ±‚URL</span><br>    method = request.method                         <span class="hljs-comment"># è·å–å½“å‰è¯·æ±‚æ–¹æ³•</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;&lt;div style=&#x27;text-align:center;&#x27;&gt;&quot;</span> \<br>           <span class="hljs-string">f&quot;&lt;p&gt;Request Method: <span class="hljs-subst">&#123;method&#125;</span>&lt;/p&gt;&lt;p&gt;Request URL: <span class="hljs-subst">&#123;url&#125;</span>&lt;/p&gt;&lt;/div&gt;&quot;</span><br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>



<h3 id="2-é”™è¯¯å¤„ç†"><a href="#2-é”™è¯¯å¤„ç†" class="headerlink" title="(2) é”™è¯¯å¤„ç†"></a>(2) é”™è¯¯å¤„ç†</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, request<br><br>app = Flask(__name__)<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/&quot;</span></span>)                                     </span><span class="hljs-comment"># è®¿é—®[127.0.0.1:5000]</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">index</span>():<br>    name = request.form.get(<span class="hljs-string">&quot;name&quot;</span>)                 <span class="hljs-comment"># å®šä¹‰ä¸€ä¸ªè·¯ç”±ï¼Œè·å–è¡¨å•ä¸­çš„åå­—</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> name:                                    <span class="hljs-comment"># åå­—ä¸ºç©ºæ—¶ä½¿ç”¨ValueErroræŠ›å‡ºå¼‚å¸¸</span><br>        <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">&quot;Name is required.&quot;</span>)<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;&lt;center&gt;Message: Hello, <span class="hljs-subst">&#123;name&#125;</span>!&lt;/center&gt;&quot;</span><br><br><br><span class="hljs-meta">@app.errorhandler(<span class="hljs-params">ValueError</span>)                       </span><span class="hljs-comment"># è§¦å‘é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œè°ƒç”¨page_not_found</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">page_not_found</span>(<span class="hljs-params">error</span>):                          <span class="hljs-comment"># 404é”™è¯¯ï¼Œå±äºé¡µé¢é”™è¯¯</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;&lt;center&gt;Error: <span class="hljs-subst">&#123;<span class="hljs-built_in">str</span>(error)&#125;</span>&lt;/center&gt;&quot;</span><br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>



<h3 id="3-å…¨å±€é”™è¯¯"><a href="#3-å…¨å±€é”™è¯¯" class="headerlink" title="(3) å…¨å±€é”™è¯¯"></a>(3) å…¨å±€é”™è¯¯</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask<br><br>app = Flask(__name__)<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/&quot;</span></span>)                                     </span><span class="hljs-comment"># è®¿é—®[127.0.0.1:5000]</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">index</span>():<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;&lt;center&gt;Hello, Flask!&lt;/center&gt;&quot;</span><br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/divide/&lt;int:num&gt;&quot;</span></span>)                     </span><span class="hljs-comment"># è®¿é—®[http://127.0.0.1:5000/divide/0]</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">divide</span>(<span class="hljs-params">num</span>):                                    <span class="hljs-comment"># è‹¥ä¼ é€’numä¸º0ï¼ŒæŠ›å‡ºå¼‚å¸¸</span><br>    result = <span class="hljs-number">100</span> / num                              <span class="hljs-comment"># å°†è¢«Flaskå…¨å±€é”™è¯¯å¤„ç†æ•è·</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;&lt;center&gt;Result: <span class="hljs-subst">&#123;result&#125;</span>.&lt;/center&gt;&quot;</span><br><br><br><span class="hljs-meta">@app.errorhandler(<span class="hljs-params">Exception</span>)                        </span><span class="hljs-comment"># æ•è·åˆ°å¼‚å¸¸ï¼Œè°ƒç”¨handle_exception</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">handle_exception</span>(<span class="hljs-params">e</span>):                            <span class="hljs-comment"># 500é¡µé¢é”™è¯¯ï¼ŒInternal server error</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;&lt;center&gt;An error occurred: <span class="hljs-subst">&#123;<span class="hljs-built_in">str</span>(e)&#125;</span>&lt;/center&gt;&quot;</span><br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>



<h3 id="4-å¼‚å¸¸å¤„ç†"><a href="#4-å¼‚å¸¸å¤„ç†" class="headerlink" title="(4) å¼‚å¸¸å¤„ç†"></a>(4) å¼‚å¸¸å¤„ç†</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, request<br><br>app = Flask(__name__)<br>app.config[<span class="hljs-string">&quot;DEBUG&quot;</span>] = <span class="hljs-literal">True</span><br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/&quot;</span></span>)                                     </span><span class="hljs-comment"># è®¿é—®[127.0.0.1:5000]</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">index</span>():                                        <span class="hljs-comment"># è¯·æ±‚æ²¡æœ‰ä¼ é€’nameå‚æ•°ï¼ŒæŠ›å‡ºValueError</span><br>    name = request.form.get(<span class="hljs-string">&quot;name&quot;</span>)<br>    <span class="hljs-keyword">try</span>:                                            <span class="hljs-comment"># ä½¿ç”¨try...exceptè¯­å¥å¤„ç†å¼‚å¸¸</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> name:                                <span class="hljs-comment"># ä½¿ç”¨raiseè¯­å¥æ‰‹åŠ¨è§¦å‘ValueErrorå¼‚å¸¸</span><br>            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">&quot;Name is missing.&quot;</span>)<br>    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>        app.logger.error(<span class="hljs-string">f&quot;Error handling request: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;&lt;center&gt;Error: <span class="hljs-subst">&#123;<span class="hljs-built_in">str</span>(e)&#125;</span>&lt;/center&gt;&quot;</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;&lt;center&gt;Message: Hello, <span class="hljs-subst">&#123;name&#125;</span>!&lt;/center&gt;&quot;</span><br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/bye&quot;</span></span>)                                  </span><span class="hljs-comment"># æ‰‹åŠ¨æŠ›å‡ºä¸€ä¸ªExceptionå¼‚å¸¸</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">bye</span>():                                          <span class="hljs-comment"># è®¿é—®[127.0.0.1:5000/bye]</span><br>    <span class="hljs-keyword">try</span>:<br>        <span class="hljs-keyword">raise</span> Exception(<span class="hljs-string">&quot;Oops, Something went wrong.&quot;</span>)<br>    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>        app.logger.error(<span class="hljs-string">f&quot;Error handling request: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;&lt;center&gt;Error: <span class="hljs-subst">&#123;<span class="hljs-built_in">str</span>(e)&#125;</span>&lt;/center&gt;&quot;</span><br><br><br><span class="hljs-meta">@app.before_request                                 </span><span class="hljs-comment"># åœ¨è¯·æ±‚åˆ°è¾¾åº”ç”¨ä¹‹å‰ï¼Œè®°å½•è¯·æ±‚æ—¥å¿—</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">before_request</span>():<br>    app.logger.info(<span class="hljs-string">f&quot;Request received: <span class="hljs-subst">&#123;request.method&#125;</span> <span class="hljs-subst">&#123;request.url&#125;</span>&quot;</span>)<br><br><br><span class="hljs-meta">@app.after_request                                  </span><span class="hljs-comment"># åº”ç”¨å‘é€å›ç­”ä¹‹å‰ï¼Œè®°å½•HTTPå“åº”ä»£ç </span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">after_request</span>(<span class="hljs-params">response</span>):<br>    app.logger.info(<span class="hljs-string">f&quot;Response sent: <span class="hljs-subst">&#123;response.status_code&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">return</span> response<br><br><br><span class="hljs-meta">@app.teardown_request                               </span><span class="hljs-comment"># è¯·æ±‚çš„æœ€åé˜¶æ®µï¼Œè®°å½•è¯·æ±‚ç»“æŸå¹¶æ‰“å°é”™è¯¯ä¿¡æ¯</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">teardown_request</span>(<span class="hljs-params">exception</span>):<br>    <span class="hljs-keyword">if</span> exception:<br>        app.logger.error(<span class="hljs-string">f&quot;Error processing request: <span class="hljs-subst">&#123;exception&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        app.logger.info(<span class="hljs-string">&quot;Request processing finished&quot;</span>)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>



<h3 id="5-æ—¥å¿—è®°å½•"><a href="#5-æ—¥å¿—è®°å½•" class="headerlink" title="(5) æ—¥å¿—è®°å½•"></a>(5) æ—¥å¿—è®°å½•</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, request<br><br>app = Flask(__name__)<br>app.config[<span class="hljs-string">&quot;DEBUG&quot;</span>] = <span class="hljs-literal">True</span>                          <span class="hljs-comment"># å¼€å¯DEBUGæ¨¡å¼</span><br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/&quot;</span></span>)                                     </span><span class="hljs-comment"># è®¿é—®[127.0.0.1:5000]</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">index</span>():                                        <span class="hljs-comment"># app.loggerè®°å½•è¯·æ±‚å’Œåº”ç”¨ç¨‹åºçŠ¶æ€</span><br>    app.logger.info(<span class="hljs-string">&quot;Welcome request successful&quot;</span>)<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;&lt;center&gt;Message: Welcome to the Flask API!&lt;/center&gt;&quot;</span><br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/bye&quot;</span></span>)                                  </span><span class="hljs-comment"># è®¿é—®[127.0.0.1:5000/bye]</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">bye</span>():<br>    name = request.args.get(<span class="hljs-string">&quot;name&quot;</span>)<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> name:<br>        app.logger.error(<span class="hljs-string">&quot;Name is missing in request&quot;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;&lt;center&gt;Error: Name is missing.&lt;/center&gt;&quot;</span><br>    app.logger.info(<span class="hljs-string">f&quot;Hello request successful for name <span class="hljs-subst">&#123;name&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;&lt;center&gt;Message: Hello, <span class="hljs-subst">&#123;name&#125;</span>!&lt;center&gt;&quot;</span><br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>



<h3 id="6-é”€æ¯å›è°ƒ"><a href="#6-é”€æ¯å›è°ƒ" class="headerlink" title="(6) é”€æ¯å›è°ƒ"></a>(6) é”€æ¯å›è°ƒ</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, request<br><br>app = Flask(__name__)<br>app.config[<span class="hljs-string">&quot;DEBUG&quot;</span>] = <span class="hljs-literal">True</span><br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/&quot;</span>, methods=[<span class="hljs-string">&quot;GET&quot;</span>, <span class="hljs-string">&quot;POST&quot;</span>]</span>)            </span><span class="hljs-comment"># è®¿é—®[127.0.0.1:5000]</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">index</span>():<br>    <span class="hljs-keyword">if</span> request.method == <span class="hljs-string">&quot;GET&quot;</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">            &lt;form method=&quot;post&quot; style=&quot;text-align: center;&quot;&gt;</span><br><span class="hljs-string">                &lt;label for=&quot;name&quot;&gt;è¾“å…¥å§“å&lt;/label&gt;</span><br><span class="hljs-string">                &lt;input type=&quot;text&quot; id=&quot;name&quot; name=&quot;name&quot;&gt;</span><br><span class="hljs-string">                &lt;button type=&quot;submit&quot;&gt;æäº¤&lt;/button&gt;</span><br><span class="hljs-string">            &lt;/form&gt;</span><br><span class="hljs-string">            &quot;&quot;&quot;</span><br>    <span class="hljs-keyword">elif</span> request.method == <span class="hljs-string">&quot;POST&quot;</span>:<br>        name = request.form.get(<span class="hljs-string">&quot;name&quot;</span>)<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> name:<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;&lt;center&gt;Error: Name is missing.&lt;/center&gt;&quot;</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;&lt;center&gt;Message: Hello, <span class="hljs-subst">&#123;name&#125;</span>!&lt;/center&gt;&quot;</span><br><br><br><span class="hljs-meta">@app.before_request</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">before_request</span>():<br>    app.logger.info(<span class="hljs-string">f&quot;Request received: <span class="hljs-subst">&#123;request.method&#125;</span> <span class="hljs-subst">&#123;request.url&#125;</span>&quot;</span>)<br><br><br><span class="hljs-meta">@app.after_request</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">after_request</span>(<span class="hljs-params">response</span>):<br>    app.logger.info(<span class="hljs-string">f&quot;Response sent: <span class="hljs-subst">&#123;response.status_code&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">return</span> response<br><br><br><span class="hljs-meta">@app.teardown_request                               </span><span class="hljs-comment"># é”€æ¯å›è°ƒï¼Œå¯¹è¯·æ±‚ç»“æŸåè¿›è¡Œæ¸…ç†æ“ä½œ</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">teardown_request</span>(<span class="hljs-params">exception=<span class="hljs-literal">None</span></span>):               <span class="hljs-comment"># è¯·æ±‚ç»“æŸæ—¶teardown_requestå‡½æ•°å°†è¢«è‡ªåŠ¨è°ƒç”¨</span><br>    <span class="hljs-keyword">if</span> exception:<br>        app.logger.error(<span class="hljs-string">f&quot;Error processing request: <span class="hljs-subst">&#123;exception&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        app.logger.info(<span class="hljs-string">&quot;Request processing finished&quot;</span>)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>



<h3 id="7-ç•™æ„ä»£ç†"><a href="#7-ç•™æ„ä»£ç†" class="headerlink" title="(7) ç•™æ„ä»£ç†"></a>(7) ç•™æ„ä»£ç†</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> threading<br><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, request, current_app<br><br>app = Flask(__name__)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">worker</span>():<br>    <span class="hljs-keyword">with</span> app.app_context():                         <span class="hljs-comment"># åœ¨æ–°çº¿ç¨‹ä¸­æ‰“å¼€åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡</span><br>        <span class="hljs-keyword">with</span> app.test_request_context():            <span class="hljs-comment"># æ¨é€æµ‹è¯•è¯·æ±‚ä¸Šä¸‹æ–‡</span><br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;è¯·æ±‚æ–¹æ³•ï¼š&quot;</span> + request.method)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;åº”ç”¨åç§°ï¼š&quot;</span> + current_app._get_current_object().name)<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/&quot;</span></span>)                                     </span><span class="hljs-comment"># _get_current_object()å¯è·å–åº”ç”¨ç¨‹åºå¯¹è±¡è€Œéä»£ç†å¯¹è±¡</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">index</span>():                                        <span class="hljs-comment"># è®¿é—®[127.0.0.1:5000]</span><br>    t = threading.Thread(target=worker)<br>    t.start()<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&lt;center&gt;Hello, Flask!&lt;/center&gt;&quot;</span><br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>



<h2 id="5-3-æµ‹è¯•ä¸Šä¸‹æ–‡"><a href="#5-3-æµ‹è¯•ä¸Šä¸‹æ–‡" class="headerlink" title="5-3 æµ‹è¯•ä¸Šä¸‹æ–‡"></a>5-3 æµ‹è¯•ä¸Šä¸‹æ–‡</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> unittest<br><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, request<br><br>app = Flask(__name__)<br>app.config[<span class="hljs-string">&quot;TESTING&quot;</span>] = <span class="hljs-literal">True</span><br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/&quot;</span>, methods=[<span class="hljs-string">&quot;GET&quot;</span>, <span class="hljs-string">&quot;POST&quot;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">index</span>():<br>    <span class="hljs-keyword">if</span> request.method == <span class="hljs-string">&quot;GET&quot;</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">            &lt;form method=&quot;post&quot; style=&quot;text-align: center;&quot;&gt;</span><br><span class="hljs-string">                &lt;label for=&quot;name&quot;&gt;è¾“å…¥å§“å&lt;/label&gt;</span><br><span class="hljs-string">                &lt;input type=&quot;text&quot; id=&quot;name&quot; name=&quot;name&quot;&gt;</span><br><span class="hljs-string">                &lt;button type=&quot;submit&quot;&gt;æäº¤&lt;/button&gt;</span><br><span class="hljs-string">            &lt;/form&gt;</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>    <span class="hljs-keyword">elif</span> request.method == <span class="hljs-string">&quot;POST&quot;</span>:<br>        name = request.form.get(<span class="hljs-string">&quot;name&quot;</span>)<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> name:<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;&lt;center&gt;Error: Name is missing.&lt;/center&gt;&quot;</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;&lt;center&gt;Message: Hello, <span class="hljs-subst">&#123;name&#125;</span>!&lt;/center&gt;&quot;</span><br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestApp</span>(unittest.TestCase):                   <span class="hljs-comment"># å®šä¹‰äº†ä¸¤ä¸ªæµ‹è¯•ç”¨ä¾‹</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">setUp</span>(<span class="hljs-params">self</span>):<br>        self.app = app.test_client()<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_index_get</span>(<span class="hljs-params">self</span>):                       <span class="hljs-comment"># ä¸€ä¸ªæµ‹è¯•è¯·æ±‚ä¸»é¡µæ—¶çš„è¡Œä¸º</span><br>        response = self.app.get(<span class="hljs-string">&quot;/&quot;</span>)                <span class="hljs-comment"># ä½¿ç”¨æµ‹è¯•å®¢æˆ·ç«¯æ¥å‘é€æ¨¡æ‹Ÿè¯·æ±‚</span><br>        self.assertEqual(response.status_code, <span class="hljs-number">200</span>)<br>        self.assertIn(<span class="hljs-string">b&quot;&lt;form&quot;</span>, response.data)      <span class="hljs-comment"># å¹¶æ–­è¨€å“åº”æ˜¯å¦ç¬¦åˆé¢„æœŸ</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_index_post</span>(<span class="hljs-params">self</span>):                      <span class="hljs-comment"># ä¸€ä¸ªæµ‹è¯•æäº¤è¡¨å•æ—¶çš„è¡Œä¸º</span><br>        response = self.app.post(<span class="hljs-string">&quot;/&quot;</span>)<br>        self.assertEqual(response.status_code, <span class="hljs-number">200</span>)<br>        self.assertIn(<span class="hljs-string">b&quot;&lt;center&gt;Error: Name is missing.&lt;/center&gt;&quot;</span>, response.data)<br><br>        response = self.app.post(<span class="hljs-string">&quot;/&quot;</span>, data=&#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Alice&quot;</span>&#125;)<br>        self.assertEqual(response.status_code, <span class="hljs-number">200</span>)<br>        self.assertIn(<span class="hljs-string">b&quot;&lt;center&gt;Message: Hello, Alice!&lt;/center&gt;&quot;</span>, response.data)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:                          <span class="hljs-comment"># å‘½ä»¤æ‰§è¡Œè¯¥æµ‹è¯•ç”¨ä¾‹</span><br>    unittest.main()                                 <span class="hljs-comment"># éƒ½é€šè¿‡ä¸ºOKï¼Œè‹¥å…¶ä¸­ä»»ä½•ä¸€ä¸ªå¤±è´¥ï¼Œåˆ™FAILED</span><br></code></pre></td></tr></table></figure>



<h1 id="6-è“å›¾å®ç°æ¨¡å—åŒ–"><a href="#6-è“å›¾å®ç°æ¨¡å—åŒ–" class="headerlink" title="6 è“å›¾å®ç°æ¨¡å—åŒ–"></a>6 è“å›¾å®ç°æ¨¡å—åŒ–</h1><ul>
<li>è“å›¾å®ç°æ¨¡å—åŒ–<ul>
<li>å…è®¸æŠŠä¸åŒçš„URLè¯·æ±‚å¤„ç†ç¨‹åºç»„æˆä¸€ä¸ªè“å›¾ï¼Œç”¨äºç®¡ç†åº”ç”¨ç¨‹åºçš„ä¸åŒåŠŸèƒ½éƒ¨åˆ†ï¼Œä½¿ä»£ç æ˜“äºç»´æŠ¤å’Œæ‰©å±•ã€‚</li>
<li>æ¯ä¸ªæ¨¡å—ç›¸äº’ç‹¬ç«‹ï¼Œå¯ä»¥å•ç‹¬æµ‹è¯•å’Œè°ƒè¯•ï¼Œæ¯ä¸ªè“å›¾éƒ½æœ‰è‡ªå·±çš„è·¯ç”±å’Œè§†å›¾ï¼Œå¯åœ¨ä¸»åº”ç”¨ç¨‹åºä¸­æ³¨å†Œå’Œå¸è½½ã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> random<br><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Blueprint                         <span class="hljs-comment"># module.py</span><br><br>blueprint = Blueprint(<span class="hljs-string">&quot;blueprint&quot;</span>, __name__)        <span class="hljs-comment"># Blueprintç±»çš„æ„é€ å‡½æ•°éœ€è“å›¾åç§°å’Œæ¨¡å—å¯¼å…¥åç§°</span><br><br><br><span class="hljs-meta">@blueprint.route(<span class="hljs-params"><span class="hljs-string">&quot;/&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">index</span>():<br>    num = random.randint(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>)<br>    <span class="hljs-built_in">print</span>(num)<br>    variable = <span class="hljs-string">f&quot;Hello, Flask! Num: <span class="hljs-subst">&#123;num&#125;</span>.&quot;</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;&lt;center&gt;<span class="hljs-subst">&#123;variable&#125;</span>&lt;/center&gt;&quot;</span><br></code></pre></td></tr></table></figure>



<h2 id="6-1-æ³¨å†Œè“å›¾"><a href="#6-1-æ³¨å†Œè“å›¾" class="headerlink" title="6-1 æ³¨å†Œè“å›¾"></a>6-1 æ³¨å†Œè“å›¾</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask                              <span class="hljs-comment"># app.py</span><br><span class="hljs-keyword">from</span> module <span class="hljs-keyword">import</span> blueprint                         <span class="hljs-comment"># ä¸module.pyå…³è”</span><br><br>app = Flask(__name__)                                <span class="hljs-comment"># è®¿é—®[127.0.0.1:5000]</span><br><br>app.register_blueprint(blueprint)                    <span class="hljs-comment"># åœ¨ä¸»åº”ç”¨ç¨‹åºä¸­æ³¨å†Œè¯¥è“å›¾</span><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)                              <span class="hljs-comment"># å‘½ä»¤python app.pyæ‰§è¡Œè¯¥åº”ç”¨</span><br></code></pre></td></tr></table></figure>



<h2 id="6-2-é™æ€æ–‡ä»¶"><a href="#6-2-é™æ€æ–‡ä»¶" class="headerlink" title="6-2 é™æ€æ–‡ä»¶"></a>6-2 é™æ€æ–‡ä»¶</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Blueprint                         <span class="hljs-comment"># module.py</span><br><br><span class="hljs-comment"># ä½¿ç”¨è“å›¾å¯¹è±¡çš„static_folderå‚æ•°æŒ‡å®šé™æ€æ–‡ä»¶çš„æ–‡ä»¶å¤¹ä¸ºâ€œstaticâ€</span><br><span class="hljs-comment"># static_url_pathå‚æ•°æŒ‡å®šè®¿é—®è¯¥æ–‡ä»¶å¤¹çš„è·¯å¾„ä¸ºâ€œ/staticâ€ï¼Œå¯æ”¾ç½®ä»»ä½•é™æ€æ–‡ä»¶ï¼Œä¾‹å¦‚CSSã€JavaScriptæˆ–å›¾åƒ</span><br>blueprint = Blueprint(<span class="hljs-string">&quot;blueprint&quot;</span>, __name__, static_folder=<span class="hljs-string">&quot;static&quot;</span>, static_url_path=<span class="hljs-string">&quot;/static&quot;</span>)<br><br><span class="hljs-comment"># é€šè¿‡ä»¥ä¸‹æ–¹å¼åœ¨æ¨¡æ¿ä¸­å¼•ç”¨ä¸Šè¿°æŒ‡å®šçš„é™æ€æ–‡ä»¶</span><br><span class="hljs-comment"># &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;&#123;&#123;url_for(&#x27;blueprint.static&#x27;, filename=&#x27;style.css&#x27;)&#125;&#125;&quot;&gt;</span><br><span class="hljs-comment"># &lt;script type=&quot;text/javascript&quot; src=&quot;&#123;&#123;url_for(&#x27;blueprint.static&#x27;, filename=&#x27;script.js&#x27;)&#125;&#125;&quot;&gt;&lt;/script&gt;</span><br><span class="hljs-comment"># &lt;img src=&quot;&#123;&#123;url_for(&#x27;blueprint.static&#x27;, filename=&#x27;image.jpg&#x27;)&#125;&#125;&quot; alt=&quot;Image&quot;&gt;</span><br><br><br><span class="hljs-meta">@blueprint.route(<span class="hljs-params"><span class="hljs-string">&quot;/&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">index</span>():<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&lt;center&gt;Hello, Flask!&lt;/center&gt;&quot;</span><br></code></pre></td></tr></table></figure>



<h2 id="6-3-èµ„æºæ–‡ä»¶å¤¹"><a href="#6-3-èµ„æºæ–‡ä»¶å¤¹" class="headerlink" title="6-3 èµ„æºæ–‡ä»¶å¤¹"></a>6-3 èµ„æºæ–‡ä»¶å¤¹</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs Xml"><span class="hljs-comment">&lt;!-- é¡¹ç›®ç›®å½•ç»“æ„ --&gt;</span><br>- app.py                                             <span class="hljs-comment">&lt;!-- å†…å®¹ä¸å˜ --&gt;</span><br>- module.py                                          <span class="hljs-comment">&lt;!-- ä¿®æ”¹æ–‡ä»¶ --&gt;</span><br>- static<br>    - data.json<br>- templates<br>    - index.html<br><span class="hljs-comment">&lt;!-- å‘½ä»¤çª—å£ä¸‹æ‰§è¡Œ&quot;python app.py&quot;ï¼Œè®¿é—®[http://127.0.0.1:5000] --&gt;</span><br></code></pre></td></tr></table></figure>



<h3 id="1-data-json"><a href="#1-data-json" class="headerlink" title="(1) data.json"></a>(1) data.json</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs Json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;My Website&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;John&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;age&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">30</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;gender&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;male&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;email&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;john@example.com&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;phone&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;123-456-7890&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;address&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;street&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;123 Main St&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;city&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Los Angeles&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;state&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;CA&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;zip&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;90012&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;interests&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;music&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;travel&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;movies&quot;</span><span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>



<h3 id="2-module-py"><a href="#2-module-py" class="headerlink" title="(2) module.py"></a>(2) module.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> json<br><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Blueprint, render_template<br><br>blueprint = Blueprint(<span class="hljs-string">&quot;blueprint&quot;</span>, __name__,        <span class="hljs-comment"># root_pathæŒ‡å®šåº”ç”¨ç¨‹åºçš„æ ¹ç›®å½•</span><br>                      static_folder=<span class="hljs-string">&quot;static&quot;</span>,<br>                      static_url_path=<span class="hljs-string">&quot;/static&quot;</span>,<br>                      template_folder=<span class="hljs-string">&quot;templates&quot;</span>,<br>                      root_path=os.path.abspath(os.path.dirname(__file__)))<br><br><br><span class="hljs-meta">@blueprint.route(<span class="hljs-params"><span class="hljs-string">&quot;/&quot;</span></span>)                               </span><span class="hljs-comment"># è®¿é—®[127.0.0.1:5000]</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">index</span>():<br>    <span class="hljs-keyword">with</span> blueprint.open_resource(<span class="hljs-string">&quot;static/data.json&quot;</span>) <span class="hljs-keyword">as</span> f:<br>        data = json.load(f)<br>    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&quot;index.html&quot;</span>, data=data)<br></code></pre></td></tr></table></figure>



<h3 id="3-index-html"><a href="#3-index-html" class="headerlink" title="(3) index.html"></a>(3) index.html</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs Html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>&#123;&#123; data.title &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-tag">body</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">font-family</span>: Arial, Helvetica, sans-serif;</span><br><span class="language-css">                <span class="hljs-attribute">text-align</span>: center;                 <span class="hljs-comment">/* å°†é¡µé¢å†…å®¹å±…ä¸­æ˜¾ç¤º */</span></span><br><span class="language-css">            &#125;</span><br><span class="language-css">            <span class="hljs-selector-tag">h1</span> &#123;<span class="hljs-attribute">color</span>: blue;&#125;</span><br><span class="language-css">            <span class="hljs-selector-tag">p</span> &#123;<span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.5em</span>;&#125;</span><br><span class="language-css">            <span class="hljs-selector-tag">ul</span> &#123;<span class="hljs-attribute">padding</span>: <span class="hljs-number">0px</span>;&#125;</span><br><span class="language-css">            <span class="hljs-selector-tag">table</span> &#123;<span class="hljs-attribute">margin</span>: auto; <span class="hljs-attribute">border-collapse</span>: collapse;&#125;</span><br><span class="language-css">            <span class="hljs-selector-tag">tr</span><span class="hljs-selector-pseudo">:hover</span> &#123;<span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f5f5f5</span>;&#125;</span><br><span class="language-css">            <span class="hljs-selector-tag">td</span> &#123;<span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span>; <span class="hljs-attribute">text-align</span>: left; <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ddd</span>;&#125;</span><br><span class="language-css">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello, &#123;&#123;data.name&#125;&#125;!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>You are &#123;&#123;data.age&#125;&#125; years old, and your email is &#123;&#123;data.email&#125;&#125;.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>You live in &#123;&#123;data.address.city&#125;&#125;, &#123;&#123;data.address.state&#125;&#125;.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Interests are as follows<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>            &#123;% for interest in data.interests %&#125;<br>                <span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>&#123;&#123; interest &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span><br>            &#123;% endfor %&#125;<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h2 id="6-4-è“å›¾æ„é€ URL"><a href="#6-4-è“å›¾æ„é€ URL" class="headerlink" title="6-4 è“å›¾æ„é€ URL"></a>6-4 è“å›¾æ„é€ URL</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Blueprint, url_for, Flask<br><br>app = Flask(__name__)<br>app.config[<span class="hljs-string">&quot;SERVER_NAME&quot;</span>] = <span class="hljs-string">&quot;localhost:5000&quot;</span>        <span class="hljs-comment"># è®¾ç½®SERVER_NAMEé…ç½®</span><br>blueprint = Blueprint(<span class="hljs-string">&quot;bp&quot;</span>, __name__, url_prefix=<span class="hljs-string">&quot;/my&quot;</span>)<br><br><br><span class="hljs-comment"># [http://localhost:5000/my/index]ï¼Œæœ¬åœ°å›ç¯åœ°å€ï¼Œåªå…è®¸åœ¨åŒä¸€å°æœºå™¨ä¸Šçš„åº”ç”¨ç¨‹åºè®¿é—®</span><br><span class="hljs-comment"># [http://127.0.0.1:5000/my/index]ï¼Œ127.0.0.1æ˜¯æŒ‡å‘æœ¬æœºçš„IPåœ°å€ï¼ŒFlaskåº”ç”¨ç¨‹åºéƒ¨ç½²åœ¨å…¶ä»–æœºå™¨ä¸Šä½¿ç”¨</span><br><span class="hljs-meta">@blueprint.route(<span class="hljs-params"><span class="hljs-string">&quot;/index&quot;</span></span>)                          </span><span class="hljs-comment"># url_prefixæŒ‡è“å›¾çš„URLå‰ç¼€</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">index</span>():                                        <span class="hljs-comment"># è®¿é—®[http://localhost:5000/my/index]</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&lt;center&gt;Hello, Flask!&lt;/center&gt;&quot;</span>         <span class="hljs-comment"># è®¿é—®[http://127.0.0.1:5000/my/index]æ— æ•ˆ</span><br><br><br>app.register_blueprint(blueprint)                   <span class="hljs-comment"># æ³¨å†Œè“å›¾</span><br><br><span class="hljs-keyword">with</span> app.app_context():<br>    url = url_for(<span class="hljs-string">&quot;bp.index&quot;</span>)                       <span class="hljs-comment"># ä½¿ç”¨è“å›¾æ„é€ URL</span><br>    <span class="hljs-built_in">print</span>(url)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>



<h1 id="7-Flaskä¸Shellç»“åˆ"><a href="#7-Flaskä¸Shellç»“åˆ" class="headerlink" title="7 Flaskä¸Shellç»“åˆ"></a>7 Flaskä¸Shellç»“åˆ</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, g<br><br>app = Flask(__name__)<br><br><br><span class="hljs-meta">@app.before_request</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">before_request</span>():<br>    g.request_start_time = time.time()              <span class="hljs-comment"># request_start_timeå˜é‡è®°å½•è¯·æ±‚å¼€å§‹æ—¶é—´</span><br><br><br><span class="hljs-meta">@app.after_request</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">after_request</span>(<span class="hljs-params">response</span>):                        <span class="hljs-comment"># è®¡ç®—è¯·æ±‚æ‰§è¡Œæ—¶é—´ï¼Œå¹¶ä½¿ç”¨æ—¥å¿—è®°å½•åŠŸèƒ½è®°å½•è¯¥æ—¶é—´</span><br>    request_time = time.time() - g.request_start_time<br>    app.logger.info(<span class="hljs-string">&quot;Request Time: %f&quot;</span>, request_time)<br>    <span class="hljs-keyword">return</span> response<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/&quot;</span></span>)                                     </span><span class="hljs-comment"># è®¿é—®[127.0.0.1:5000]</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">index</span>():<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&lt;center&gt;Hello, Flask!&lt;/center&gt;&quot;</span><br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    <span class="hljs-keyword">with</span> app.app_context():                         <span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªè¯·æ±‚ä¸Šä¸‹æ–‡æ¥å¯åŠ¨Flaskåº”ç”¨ç¨‹åº</span><br>        app.run(debug=<span class="hljs-literal">True</span>)       <br></code></pre></td></tr></table></figure>

<ul>
<li>è¿›å…¥å½“å‰æ–‡ä»¶ç›®å½•ä¸­ï¼Œé¼ æ ‡å³å‡»Git Bash Hereï¼Œæ‰“å¼€ä¸€ä¸ªç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼Œè¿›è¡Œä»¥ä¸‹äº¤äº’å¼æ“ä½œã€‚</li>
</ul>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs Powershell"><span class="hljs-comment"># è‹¥æŠ¥é”™Error: Could not locate a Flask application. Use ... in the current directory.</span><br><span class="hljs-variable">$</span> export FLASK_APP=yourfilename                     <span class="hljs-comment"># æ³¨æ„ï¼šè¿™é‡Œæ–‡ä»¶ä¸éœ€è¦æ‰©å±•åï¼Œä¹Ÿä¸ç”¨ä¸­æ–‡å(ä¼šæŠ¥é”™)</span><br><span class="hljs-variable">$</span> flask shell<br>Python <span class="hljs-number">3.9</span>.<span class="hljs-number">13</span> (main, Oct <span class="hljs-number">25</span> <span class="hljs-number">2021</span>, <span class="hljs-number">23</span>:<span class="hljs-number">51</span>:<span class="hljs-number">50</span>) [<span class="hljs-type">MSC</span> <span class="hljs-type">v.1916</span> <span class="hljs-number">64</span> <span class="hljs-type">bit</span> (<span class="hljs-type">AMD64</span>)] on win32<br>App: app<br>Instance: D:\...\Flask\instance<br>&gt;&gt;&gt; app                                             <span class="hljs-comment"># è¿”å›Flaskåº”ç”¨ç¨‹åºå®šä¹‰çš„å¯¹è±¡</span><br>&lt;Flask <span class="hljs-string">&quot;app&quot;</span>&gt;<br>&gt;&gt;&gt; ctx = app.test_request_context()                <span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªæµ‹è¯•è¯·æ±‚ä¸Šä¸‹æ–‡å¯¹è±¡ctx</span><br>&gt;&gt;&gt; ctx.push()                                      <span class="hljs-comment"># å°†ctxæ¨åˆ°æ ˆä¸­ï¼Œä»¥ä¾¿è®¿é—®ä¸Šä¸‹æ–‡ä¸­çš„å˜é‡å’Œå¯¹è±¡</span><br>&gt;&gt;&gt; app.preprocess_request()                        <span class="hljs-comment"># æ¿€æ´»é¢„å¤„ç†å™¨å‡½æ•°ï¼Œå°†åœ¨è¯·æ±‚å¤„ç†ä¹‹å‰è‡ªåŠ¨è°ƒç”¨</span><br>&gt;&gt;&gt; app.process_response(app.response_class())      <span class="hljs-comment"># æ¿€æ´»ç›¸åº”å¤„ç†å™¨å‡½æ•°ï¼Œè´Ÿè´£å¤„ç†äº§ç”ŸHTTPå“åº”çš„å†…å®¹</span><br>&lt;Response <span class="hljs-number">0</span> bytes [<span class="hljs-number">200</span> <span class="hljs-type">OK</span>]&gt;<br>&gt;&gt;&gt; ctx.pop()                                       <span class="hljs-comment"># å½“æµ‹è¯•è¯·æ±‚ä¸Šä¸‹æ–‡å¤„ç†å®Œæ¯•åï¼Œéœ€è¦å°†å…¶ä»æ ˆä¸­å¼¹å‡º</span><br>&gt;&gt;&gt; <span class="hljs-keyword">exit</span>()                                          <span class="hljs-comment"># é€€å‡ºShellä¼šè¯</span><br></code></pre></td></tr></table></figure>



              
            </div>
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Python/" class="category-chain-item">Python</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Flask/">#Flask</a>
      
        <a href="/tags/Routes/">#Routes</a>
      
        <a href="/tags/Templates/">#Templates</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Python Flask</div>
      <div>https://stitch-top.github.io/2021/12/10/python/python13-python-flask/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>ä½œè€…</div>
          <div>Dr.626</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>å‘å¸ƒäº</div>
          <div>2021å¹´12æœˆ10æ—¥ 22:43:15</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>è®¸å¯åè®®</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - ç½²å">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
              <a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
              <span class="hint--top hint--rounded" aria-label="NC - éå•†ä¸šæ€§ä½¿ç”¨">
                <i class="iconfont icon-nc"></i>
              </span>
              </a>
            
              <a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
              <span class="hint--top hint--rounded" aria-label="SA - ç›¸åŒæ–¹å¼å…±äº«">
                <i class="iconfont icon-sa"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/01/05/ce-shi-gong-ju/tt01-jmeter/tt01-01-jmeter-zu-jian/" title="JMeter ç»„ä»¶">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">JMeter ç»„ä»¶</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2021/11/03/python/python12-python-mongodb/" title="Python MongoDB">
                        <span class="hidden-mobile">Python MongoDB</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  <article id="comments">
    
  <div id="valine"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#valine', function() {
      Fluid.utils.createScript('https://cdn.staticfile.org/valine/1.5.1/Valine.min.js', function() {
        var options = Object.assign(
          {"appId":"Jg3BjUa3RtnEFSREy3wsmUR5-MdYXbMMI","appKey":"DwsEb5BeMxwdz0CEJ6MUBdu3","path":"window.location.pathname","placeholder":"èµ äººç«ç‘°ï¼Œæ‰‹ç•™ä½™é¦™(ï½oï¿£3ï¿£)ï½","avatar":"monsterid","meta":["nick","mail","link"],"requiredFields":["nick","mail"],"pageSize":13,"lang":"zh-CN","highlight":"ture","recordIP":"ture","serverURLs":"","emojiCDN":null,"emojiMaps":null,"enableQQ":"ture"},
          {
            el: "#valine",
            path: window.location.pathname
          }
        )
        new Valine(options);
        Fluid.utils.waitElementVisible('#valine .vcontent', () => {
          var imgSelector = '#valine .vcontent img:not(.vemoji)';
          Fluid.plugins.imageCaption(imgSelector);
          Fluid.plugins.fancyBox(imgSelector);
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


  </article>


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar category-bar" style="margin-left: -1rem">
    





<div class="category-list">
  
  
    
    
    
    <div class="category row nomargin-x">
      <a class="category-item 
          list-group-item category-item-action col-10 col-md-11 col-xm-11" title="Python"
        id="heading-a7f5f35426b927411fc9231b56382173" role="tab" data-toggle="collapse" href="#collapse-a7f5f35426b927411fc9231b56382173"
        aria-expanded="true"
      >
        Python
        <span class="list-group-count">(13)</span>
        <i class="iconfont icon-arrowright"></i>
      </a>
      
      <div class="category-collapse collapse show" id="collapse-a7f5f35426b927411fc9231b56382173"
           role="tabpanel" aria-labelledby="heading-a7f5f35426b927411fc9231b56382173">
        
        
          
  <div class="category-post-list">
    
    
      
      
        <a href="/2021/01/01/python/python01-python-ji-chu-yi/" title="Python åŸºç¡€(ä¸€)"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Python åŸºç¡€(ä¸€)</span>
        </a>
      
    
      
      
        <a href="/2021/01/15/python/python02-python-ji-chu-er/" title="Python åŸºç¡€(äºŒ)"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Python åŸºç¡€(äºŒ)</span>
        </a>
      
    
      
      
        <a href="/2021/02/03/python/python03-python-wen-jian-chu-li/" title="Python æ–‡ä»¶å¤„ç†"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Python æ–‡ä»¶å¤„ç†</span>
        </a>
      
    
      
      
        <a href="/2021/03/01/python/python04-python-numpy-ji-chu/" title="Python NumPy åŸºç¡€"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Python NumPy åŸºç¡€</span>
        </a>
      
    
      
      
        <a href="/2021/04/06/python/python05-python-numpy-sui-ji/" title="Python NumPy éšæœº"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Python NumPy éšæœº</span>
        </a>
      
    
      
      
        <a href="/2021/05/05/python/python06-python-numpy-han-shu/" title="Python NumPy å‡½æ•°"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Python NumPy å‡½æ•°</span>
        </a>
      
    
      
      
        <a href="/2021/06/08/python/python07-python-pandas/" title="Python Pandas"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Python Pandas</span>
        </a>
      
    
      
      
        <a href="/2021/07/09/python/python08-python-scipy/" title="Python SciPy"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Python SciPy</span>
        </a>
      
    
      
      
        <a href="/2021/08/02/python/python09-python-matplotlib/" title="Python Matplotlib"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Python Matplotlib</span>
        </a>
      
    
      
      
        <a href="/2021/09/04/python/python10-python-ji-qi-xue-xi/" title="Python æœºå™¨å­¦ä¹ "
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Python æœºå™¨å­¦ä¹ </span>
        </a>
      
    
      
      
        <a href="/2021/10/07/python/python11-python-mysql/" title="Python MySQL"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Python MySQL</span>
        </a>
      
    
      
      
        <a href="/2021/11/03/python/python12-python-mongodb/" title="Python MongoDB"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Python MongoDB</span>
        </a>
      
    
      
      
        <a href="/2021/12/10/python/python13-python-flask/" title="Python Flask"
           class="list-group-item list-group-item-action
           active">
          <span class="category-post">Python Flask</span>
        </a>
      
    
  </div>

        
      </div>
    </div>
  
</div>


  </aside>


    </div>
  </div>
</div>





  



  



  



  



  






    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a><span>Copyright Â© 2021 - 2024</span></a> <i class="iconfont icon-love"></i> <a href="https://stitch-top.github.io" target="_blank" rel="nofollow noopener"><span>Dr.626</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="leancloud-site-pv-container" style="display: none">
        ğŸ“ˆ æ€»è®¿é—®é‡ 
        <span id="leancloud-site-pv"></span>
         æ¬¡
      </span>
    
    
      <span id="leancloud-site-uv-container" style="display: none">
        ğŸ“Š æ€»è®¿å®¢æ•° 
        <span id="leancloud-site-uv"></span>
         äºº ğŸŒ¹
      </span>
    
    

  
</div>

  
  
  
  
  <!-- æ·»åŠ ç½‘ç«™è¿è¡Œæ—¶é—´ -->
  <div class="footer-content">
    <div>
      <span id="timeDate">è½½å…¥å¤©æ•°...</span>
      <span id="times">è½½å…¥æ—¶åˆ†ç§’...</span>
      <script>
      var now = new Date();
      function createtime(){
          var grt= new Date("01/01/2021 00:00:00");   //æ­¤å¤„ä¿®æ”¹ä½ çš„å»ºç«™æ—¶é—´æˆ–è€…ç½‘ç«™ä¸Šçº¿æ—¶é—´
          now.setTime(now.getTime()+250);
          days = (now - grt ) / 1000 / 60 / 60 / 24;
          dnum = Math.floor(days);
          hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum);
          hnum = Math.floor(hours);
          if(String(hnum).length ==1 ){
              hnum = "0" + hnum;
          }
          minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
          mnum = Math.floor(minutes);
          if(String(mnum).length ==1 ){
                    mnum = "0" + mnum;
          }
          seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
          snum = Math.round(seconds);
          if(String(snum).length ==1 ){
                    snum = "0" + snum;
          }
          document.getElementById("timeDate").innerHTML = "æœ¬ç«™å·²å®‰å…¨è¿è¡Œ&nbsp"+dnum+"&nbspå¤©";
          document.getElementById("times").innerHTML = hnum + "&nbspå°æ—¶&nbsp" + mnum + "&nbspåˆ†&nbsp" + snum + "&nbspç§’";
      }
      setInterval("createtime()", 250);
      </script>
    </div>
  </div>
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.staticfile.org/jquery/3.7.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  

  

  

  

  

  

  
    
  




  
    
      <script  src="/js/img-lazyload.js" ></script>
    
  




  
<script>
  Fluid.utils.createScript('https://cdn.staticfile.org/tocbot/4.21.0/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script>
  (function() {
    var enableLang = CONFIG.code_language.enable && CONFIG.code_language.default;
    var enableCopy = CONFIG.copy_btn;
    if (!enableLang && !enableCopy) {
      return;
    }

    function getBgClass(ele) {
      return Fluid.utils.getBackgroundLightness(ele) >= 0 ? 'code-widget-light' : 'code-widget-dark';
    }

    var copyTmpl = '';
    copyTmpl += '<div class="code-widget">';
    copyTmpl += 'LANG';
    copyTmpl += '</div>';
    jQuery('.markdown-body pre').each(function() {
      var $pre = jQuery(this);
      if ($pre.find('code.mermaid').length > 0) {
        return;
      }
      if ($pre.find('span.line').length > 0) {
        return;
      }

      var lang = '';

      if (enableLang) {
        lang = CONFIG.code_language.default;
        if ($pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2 && $pre.children().hasClass('hljs')) {
          lang = $pre[0].children[0].classList[1];
        } else if ($pre[0].getAttribute('data-language')) {
          lang = $pre[0].getAttribute('data-language');
        } else if ($pre.parent().hasClass('sourceCode') && $pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2) {
          lang = $pre[0].children[0].classList[1];
          $pre.parent().addClass('code-wrapper');
        } else if ($pre.parent().hasClass('markdown-body') && $pre[0].classList.length === 0) {
          $pre.wrap('<div class="code-wrapper"></div>');
        }
        lang = lang.toUpperCase().replace('NONE', CONFIG.code_language.default);
      }
      $pre.append(copyTmpl.replace('LANG', lang).replace('code-widget">',
        getBgClass($pre[0]) + (enableCopy ? ' code-widget copy-btn" data-clipboard-snippet><i class="iconfont icon-copy"></i>' : ' code-widget">')));

      if (enableCopy) {
        Fluid.utils.createScript('https://cdn.staticfile.org/clipboard.js/2.0.11/clipboard.min.js', function() {
          var clipboard = new window.ClipboardJS('.copy-btn', {
            target: function(trigger) {
              var nodes = trigger.parentNode.childNodes;
              for (var i = 0; i < nodes.length; i++) {
                if (nodes[i].tagName === 'CODE') {
                  return nodes[i];
                }
              }
            }
          });
          clipboard.on('success', function(e) {
            e.clearSelection();
            e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-copy', 'icon-success');
            setTimeout(function() {
              e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-success', 'icon-copy');
            }, 2000);
          });
        });
      }
    });
  })();
</script>


  
<script>
  Fluid.utils.createScript('https://cdn.staticfile.org/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="/js/leancloud.js" ></script>





<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ï¼Œå°†å®ƒä¿æŒåœ¨æœ€åº•éƒ¨ -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">åšå®¢åœ¨å…è®¸ JavaScript è¿è¡Œçš„ç¯å¢ƒä¸‹æµè§ˆæ•ˆæœæ›´ä½³</div>
  </noscript>
</body>
</html>
